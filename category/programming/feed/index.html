<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Programming &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/programming/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.7.5</generator>
	<item>
		<title>Highlights of YaST Development Sprint 94</title>
		<link>https://lizards.opensuse.org/2020/03/06/yast-sprint-94/</link>
		<comments>https://lizards.opensuse.org/2020/03/06/yast-sprint-94/#comments</comments>
		<pubDate>Fri, 06 Mar 2020 11:29:40 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Hackweek]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14350</guid>
		<description><![CDATA[After some time of silent work (our previous blog post was published a month ago), the YaST Team is back with some news about the latest development sprint and some Hack Week experiments. Those news include: Enabling YaST on the Windows Subsystem for Linux Usability improvements for the Online Search, the Partitioner and the Kdump [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>After some time of silent work (our <a href="https://lizards.opensuse.org/2020/02/07/yast-sprint-93">previous blog post</a> was published a month ago), the YaST Team is back with some news about the latest development sprint and some <a href="https://hackweek.suse.com/">Hack Week</a> experiments. Those news include:</p>
<ul>
<li>Enabling YaST on the Windows Subsystem for Linux</li>
<li>Usability improvements for the Online Search, the Partitioner and the Kdump module</li>
<li>Better control of overridden <code>sysctl</code> configuration values</li>
<li>Improvements in the default selections of the upcoming SLE 15 SP2 installer</li>
<li>New features for zSeries mainframes like Secure Boot and I/O devices auto-configuration</li>
<li>And, as a bonus, a couple of Hack Week projects related to YaST, Ruby and Crystal</a>
</ul>
<p>So, as you can see, we have a little bit of everything in the menu, from WSL to mainframes, from new features to small usability improvements, from installation to system fine-tuning&#8230; So let&#8217;s dive into the details!</p>
<h3 id="wsl">Improved compatibility with WSL</h3>
<p>Have you ever heard about <a href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux">WSL</a>, the Windows Subsystem for Linux? To be honest, before this sprint we haven&#8217;t payed much attention to it either. But as both openSUSE Leap and SUSE Linux Enterprise (SLE) are available to Windows users via WSL images and the 15.2 releases of both distributions are approaching, we decided it was time to dive into WSL to research how it works and how can YaST be useful there.</p>
<p>Setting up an (open)SUSE test system inside a WSL environment was a piece of cake thanks to the <a href="https://en.opensuse.org/openSUSE:WSL">excellent documentation</a> at the openSUSE Wiki.</p>
<p>Many components of YaST are useless in WSL because not everything can actually be configured from the Linux system itself and because systemd is not available (we are talking exclusively about WSL1 here). But YaST is still very useful for the initial setup of the system when running the (open)SUSE image for the first time. It can be used to setup the first user, to confirm the license and, in the SLE case, also to register the system. The YaST modules for software management can also be very handy to customize the image at any point after that initial setup.</p>
<p>So far, we have done three changes to improve the experience of executing YaST within WSL.</p>
<ul>
<li>We increased the speed of the initial boot by removing calls to systemd when it is not available.</li>
<li>We fixed the registration process for YaST Firstboot.</li>
<li>We implemented a feature to explicitly mark YaST modules that work in WSL and show only those modules in the YaST control center.
</li>
</ul>
<p>We also documented all our findings about WSL in <a href="https://yastgithubio.readthedocs.io/en/latest/WSL/">this document</a>.</p>
<p>As always, we are hungry for feedback. Please reach out to us and tell us what&#8217;s your experience using YaST inside WSL and which modules do you miss the most.</p>
<h3 id="online-search">Improving the UX of the Online Search</h3>
<p>As we <a href="https://lizards.opensuse.org/2020/02/07/yast-sprint-93/#the-online-search-feature-comes-to-yast">announced</a> one month ago, YaST will offer a mechanism to search for packages through all SUSE Linux Enterprise modules, even if they are not registered. This feature, known as <em>package online search</em>, was already available using zypper&#8217;s <code>search-packages</code> command or through the <a href="https://scc.suse.com/packages">SCC web interface</a>.</p>
<p>After gathering some feedback during the sprint review meeting, we decided to invest some time improving the overall UX experience. Perhaps the most relevant change is the new summary screen, which shows the list of modules to activate and packages to install. </p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/online-search.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/online-search-300x153.png" alt="New summary screen for the online search" width="300" height="153" class="aligncenter size-medium wp-image-14352" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/online-search-300x153.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/online-search-768x391.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/03/online-search-1024x521.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/03/online-search.png 1263w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Additionally, we improved error handling and, by the way, we fixed the <em>case sensitive</em> filter.</p>
<h3 id="partitioner-ux">&#8230;And the Partitioner as Well</h3>
<p>The online search is not the only part of YaST that has received some love in the UX area. We also tried to improve a bit the usability of the Partitioner. In this occasion, based on the feedback coming from our users via <a href="http://bugzilla.opensuse.org">openSUSE&#8217;s Bugzilla</a>.</p>
<p>On one hand, we got a report about this dialog been too long to properly fit in low screen resolutions.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-qt-193x300.png" alt="Previous dialog for mount options" width="193" height="300" class="aligncenter size-medium wp-image-14356" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-qt-193x300.png 193w, https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-qt.png 400w" sizes="(max-width: 193px) 100vw, 193px" /></a></p>
<p>The result was even worse in a text console with a resolution of 80 columns and 24 lines, which is the minimum size we design all YaST screens to work on.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-curses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-curses-300x181.png" alt="Previous text-based dialog for mount options" width="300" height="181" class="aligncenter size-medium wp-image-14357" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-curses-300x181.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-old-curses.png 642w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>So we dropped some obsolete options and made others more compact. Now the dialog fits in 24 lines again.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-curses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-curses-300x189.png" alt="Revamped text-based dialog for mount options" width="300" height="189" class="aligncenter size-medium wp-image-14358" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-curses-300x189.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-curses.png 641w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And, as you can see below, it looks also nicer (or at least less overwhelming) in graphical mode as well. It&#8217;s worth mentioning we also took the opportunity to fix other related dialogs that had similar problems.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-qt-300x273.png" alt="Revamped dialog for mount options" width="300" height="273" class="aligncenter size-medium wp-image-14359" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-qt-300x273.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/mount-new-qt.png 519w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>On the other hand, we also got a report about how inconvenient was to always jump to the first tab when a device was selected in the devices tree at the left of the Partitioner, forcing the user to click in the &#8220;Partitions&#8221; tab (or any other desired one) over and over.</p>
<p>In that regard and as you may remember, a couple of sprints ago <a href="https://lizards.opensuse.org/2020/01/24/highlights-of-yast-development-sprint-92/#an-actionable-partitioner-overview-screen" rel="nofollow">we made the overview screen <em>actionable</em></a>, avoiding the navigation to the device page just to perform a simple action over it. But navigating through the different devices back and forth is still possible and useful. Now such navigation has been improved by remembering the last tab and row selected per section or device whenever possible, which will save you a bunch of clicks when working with multiple devices.</p>
<p>Related to this, <a href="https://lists.opensuse.org/yast-devel/2020-01/msg00014.html">we started a public discussion</a> about what should be the default tab the first time a device is visited. Once again, we are looking for opinions. So we would be grateful if you read the thread and contribute to the discussion.</p>
<h3 id="kdump">Showing Suggested Values for Kdump Configuration</h3>
<p>But the Partitioner was not the only YaST module for which our users pointed usability problems via Bugzilla. After some changes in how Kdump works after the migration from openSUSE Leap 42.3 to 15.0, it turned out that using YaST to re-adjust the values was not as helpful as it should be. YaST Kdump displayed the current size of the memory reservations, as well as the min and max margins. But it did not show the recommended default values for the current system, so if the user has adjusted the limits in the past it was impossible to get an up-to-date proposal from YaST calculated for the current system.</p>
<p>We have adapted the dialog to show those suggested values. As you can see below, we also took the opportunity to extend the help text to explain the meaning of the different values.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/kdump.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/kdump-300x194.png" alt="New Kdump configuration screen" width="300" height="194" class="aligncenter size-medium wp-image-14367" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/kdump-300x194.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/kdump-768x496.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/03/kdump-1024x661.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/03/kdump.png 1177w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="sysctl">Better Control of Overridden Kernel Parameter Values</h3>
<p>And talking about YaST pieces we are improving step by step, you may remember from <a href="https://lizards.opensuse.org/2019/10/09/highlights-of-yast-development-sprint-86">our report of sprint 86</a> that we are adapting YaST to deal with the new structure of the <code>sysctl</code> configuration.</p>
<p>Up to now YaST has stored <code>sysctl</code> values mainly in <code>/etc/sysctl.conf</code> and <code>/etc/sysctl.d/70-yast.conf</code>. But this reflects only a part of the possibilities for storing those values. The truth is that there are many more locations where these settings can be stored: <code>/run/sysctl.d</code>, <code>/etc/sysctl.d</code>, <code>/usr/local/lib/sysctl.d</code>, <code>/usr/lib/sysctl.d</code>, <code>/lib/sysctl.d</code>, <code>/etc/sysctl.conf</code>&#8230;</p>
<p>Now YaST also takes care of these locations and informs the user if there are some conflicting values, as you can see in the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/sysctl.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/sysctl-300x233.png" alt="YaST alerting about conflicts in sysctl" width="300" height="233" class="aligncenter size-medium wp-image-14355" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/sysctl-300x233.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/sysctl-768x596.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/03/sysctl.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="sle-modules">The Default Pre-selected SLE Modules</h3>
<p>We have also invested some time smoothing some rough edges off the installation process for the upcoming openSUSE 15.2 and SLE 15 SP2. For example, if you register your SLE 15 product during installation you will see the available modules and extensions in the following dialog. Some of them are by default pre-selected because they either contain the base system components (kernel, glibc,&#8230;) or the product specific packages (e.g. GNOME for SLE Desktop).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/modules.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/modules-300x214.png" alt="Modules selection during SLE installation" width="300" height="214" class="aligncenter size-medium wp-image-14362" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/modules-300x214.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/modules.png 740w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>However, if you skip the registration and use the packages from the DVD medium there were no modules or extension pre-selected. The problem is that the information about the default modules was only available in the <a href="https://scc.suse.com">SCC</a> data which obviously is not available in an offline installation.</p>
<p>In SLE 15 SP2 we added this extra information to the installer configuration files so now also in an offline installation YaST can preselect the default modules for each product.</p>
<h3 id="ntp">Proposing NTP Servers During Installation</h3>
<p>And talking about offering sensible defaults for installation, we also improved the situation regarding the configuration of the NTP server. For openSUSE based systems (including Kubic) and a few SUSE products, like CaaSP or SLE High Performance Computing, YaST sets up the NTP daemon during installation. YaST tries to determine which server to use through the DHCP information but, when it is not available, it will propose one from openSUSE and SUSE pools (e.g., <code>n.opensuse.pool.ntp.org</code> where <code>n</code> is a number between 0 and 3).</p>
<p>However, we still were using the <code>novell.pool.ntp.org</code> pool for SUSE based products. During this sprint, we have switched to the <code>suse.pool.ntp.org</code> pool of servers and, additionally, we have refactored some code in order to reduce duplication and improve testability.</p>
<h3 id="secure-boot">Secure Boot Support for IBM zSeries</h3>
<p>You may have noticed by the recent sprint reports that we are improving several aspects related to the installation and configuration of zSeries mainframes. This sprint was not an exception&#8230; and will certainly not be the last one in that regard. </p>
<p>As a result of that effort, YaST now supports the Secure Boot feature found on the latest zSeries machines. It&#8217;s rather similar to the existing UEFI Secure Boot so we took the opportunity to unify the Secure Boot handling found on different architectures.</p>
<p>This means you get this checkbox if your zSeries machine does have Secure Boot support.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-300x165.jpg" alt="Configuring Secure Boot in zSeries" width="300" height="165" class="aligncenter size-medium wp-image-14363" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-300x165.jpg 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot.jpg 606w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In addition, we added a shortcut link on the installation summary screen that lets you enable Secure Boot with just a click.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-proposal.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-proposal-300x165.jpg" alt="Secure Boot in the proposal screen" width="300" height="165" class="aligncenter size-medium wp-image-14364" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-proposal-300x165.jpg 300w, https://lizards.opensuse.org/wp-content/uploads/2020/03/secure-boot-proposal.jpg 606w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As mentioned, we took the opportunity to unify the management of Secure Boot in all platforms, so this new shortcut link is also available in x86_64 or aarch64 machines that have UEFI Secure Boot.</p>
<h3 id="chzdev">Automatic Configuration of I/O Devices in zSeries</h3>
<p>And talking about zSeries mainframes, anyone having used Linux in one of those systems know that input/output devices, like disks or network cards, must be configured and activated before they can be detected and used normally by the operating system.</p>
<p>But thanks to the new I/O device auto-configuration mechanism, users can now specify IDs and settings of I/O devices that should be automatically enabled in Linux. We modified the installer to detect such configuration and trigger the corresponding configuration actions, removing the need of manually activating disks and network devices during the installation process.</p>
<p>This is still an experimental feature and we are waiting for feedback to make sure the current implementation works in all the desired scenarios. If everything goes as expected, the feature will debut in SLE 15 SP2.</p>
<h3 id="hackweek">Hack Week</h3>
<p>As said at the beginning of the post, the main reason for spending almost a month without publishing any report was that the whole YaST Team at SUSE was diving into completely different topics due to <a href="https://hackweek.suse.com/">Hack Week 19</a>, which theme was &#8220;Simplify, Modernize and Accelerate&#8221;.</p>
<p>There were not many projects related to YaST in this edition of Hack Week, but there are at least two that could be interesting for YaST fans and contributors. Fortunately, we have published reports for both of them in the yast-devel mailing list. So check out the results of &#8220;<a href="https://lists.opensuse.org/yast-devel/2020-02/msg00024.html">Learn Crystal by Porting Part of YaST to that Language</a>&#8221; and &#8220;<a href="https://lists.opensuse.org/yast-devel/2020-02/msg00026.html">YaST Logs Analyzer</a>&#8220;.</p>
<h3 id="closing">More to come</h3>
<p>Now that we are back to our usual development pace, we should have more news about YaST development in a couple of weeks. The plan is to focus on fixing bugs for the upcoming releases of openSUSE Leap and SUSE Enterprise Linux, but we are pretty sure we will still find interesting bits of information for you.</p>
<p>Meanwhile, keep in touch through the usual channels and have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2020/03/06/yast-sprint-94/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 91</title>
		<link>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/</link>
		<comments>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/#comments</comments>
		<pubDate>Wed, 18 Dec 2019 10:35:55 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14236</guid>
		<description><![CDATA[The last two weeks of the year, and also the first one of the new year, are vacation season in many parts of the world and YaSTland is not an exception. But before we enter hibernation mode, let&#8217;s take a look to the most important features and bugfixes we implemented in the last sprint of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The last two weeks of the year, and also the first one of the new year, are vacation season in many parts of the world and YaSTland is not an exception. But before we enter hibernation mode, let&#8217;s take a look to the most important features and bugfixes we implemented in the last sprint of 2019. That includes:</p>
<ul>
<li>bringing back to life some sections of the Software Manager,</li>
<li>implementing system upgrade with the new SLE media types,</li>
<li>making the installation in Raspberry Pi and IBM Z System even better,</li>
<li>improving usability of encryption,</li>
<li>reducing the footprint of the Snapper plugin for ZYpp,</li>
<li>as always, many other small improvements and fixes.</li>
</ul>
<h3>Restored Some Package Views: Recommended, Suggested, etc.</h3>
<p>Let&#8217;s start with a redemption story. Some time ago we implemented feature <a href="https://fate.suse.com/326485">fate#326485</a> which requested dropping the &#8220;Package Groups&#8221; view from the package manager UI. That was quite an easy task.</p>
<p>However, a few weeks later we got a bug report that the lists of recommended, suggested, etc&#8230; packages couldn&#8217;t be displayed anymore. It turned out that, in the Qt package manager front-end, the removed &#8220;Package Groups&#8221; view not only used to display the static group data from the packages but it also contained some special computed package lists like orphaned, suggested or recommended packages. So these lists were lost as a collateral damage of removing the &#8220;Package Groups&#8221; view.</p>
<p>The ncurses package manager was not affected by the same problem because, in that front-end, those views are grouped in a separate &#8220;Package Classification&#8221; section. So the task for this sprint was to somehow revive the lists in Qt and make them again available to the users.</p>
<p>We partly reverted the Package Groups removal and restored displaying those special package groups. To make it consistent we also use the &#8220;Package Classification&#8221; name for the view, like in the ncurses package manager.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-300x188.png" alt="The new Package Classification view in Qt" width="300" height="188" class="aligncenter size-medium wp-image-14238" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-300x188.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-768x481.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt.png 775w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>On the other hand, the ncurses front-end was missing some lists like the &#8220;Multiversion Packages&#8221; and &#8220;All Packages&#8221;. To take consistency another step further, we added these missing lists and did some small cleanup and fixes so now both the Qt and the ncurses package managers should offer the same functionality and should look similar.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-300x197.png" alt="The revamped Package Classification view in ncurses" width="300" height="197" class="aligncenter size-medium wp-image-14239" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-300x197.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-768x505.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>User-friendly Encryption Device Names</h3>
<p>And talking about bug reports that trigger some usability revamp, some users had pointed that, when the system is booting and prompts for the password of an encrypted device, it&#8217;s not always that easy to identify which exact device it is referring to:</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/prompt-udev-1.png" alt="Booting password prompt before the change"></p>
<p>The root of the problem is that when YaST creates an encryption device (during the installation by means of the storage proposal, or manually with the Expert Partitioner), the device mapper name for the new encrypted device is generated from the udev id of the underlying device (e.g., <em>cr_ccw-0XAF5E-part2</em>).</p>
<p>We decided to improve the encryption naming generation in YaST for Tumbleweed and future releases of Leap and SLE. From now on, the name will be based on the mount point of the device. For example, if an encrypted device is going to be mounted at root, its device mapper name would be <em>cr_root</em>. In general, when the encrypted device is mounted, the device mapper name would be <em>cr_mount_point</em> (e.g., <em>cr_home_linux</em> for an encrypted device mounted at <em>/home/linux</em>).</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/prompt-mountpoint-1.png" alt="Booting password prompt after the change"></p>
<p>Note that udev-based names might still be used for some scenarios. For example, when the device is not mounted or for an indirectly used encrypted device (e.g., an encrypted LVM Physical Volume).</p>
<p>And related to the identification of encryption devices, we have also added more information about the device when the encryption devices are activated during the installation process. Providing the password for the correct device was very difficult because the user needed to know the UUID of the encryption device. Now on, the activation popup also informs about the kernel name of the underlying device, making much easier to identify it.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-300x225.png" alt="New password prompt during installation" width="300" height="225" class="aligncenter size-medium wp-image-14249" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Because names matter&#8230; which leads us to the next topic.</p>
<h3>How does it Feel to Run a Mainframe?</h3>
<p>As you may know, (open)SUSE runs in a vast range of hardware, including powerful mainframes like the <a href="https://en.wikipedia.org/wiki/IBM_Z">IBM Z family</a>. One of the strengths of our beloved distributions is that, despite the differences in hardware and scope, the installation and usage experience is very similar in all the supported systems.</p>
<p>Consistency and ease of use are good, but when you drive a luxury car you want to see the brand&#8217;s badge on top of the hood. So in future versions of the installer, the model of the machine will be displayed when installing in an IBM Z system. See the right-top corner of the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-300x187.png" alt="IBM Z Model in the installer" width="300" height="187" class="aligncenter size-medium wp-image-14280" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-300x187.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-768x479.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-1024x639.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt.png 1179w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The text-based installer also has been modified to include the same banner in a similar place.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses-300x61.png" alt="IBM Z Model in the text-mode installer" width="300" height="61" class="aligncenter size-medium wp-image-14281" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses-300x61.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses.png 515w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But in the same way that (open)SUSE enables you to install and use Linux in a mainframe &#8220;just like in any other computer&#8221;, we also target to do the same in the other extreme of the hardware spectrum.</p>
<h3>Better Support for Raspberry Pi in the Partitioning Proposal</h3>
<p>One year ago <a href="https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/">we announced</a> that openSUSE Leap 15.1 and SLE-15-SP1 would be the first Linux distributions that could be installed in Raspberry Pi devices following the standard installation procedure, instead of deploying a Raspberry-specific pre-built image. The only prerequisite was the existence in the target SD card (or disk) of a partition containing the Raspberry Pi boot code.</p>
<p>But we are now able to go one step further for SLE-15-SP2 (and Leap 15.2). Thanks to the technologies included in those upcoming releases, (open)SUSE will not longer need a separate partition with the boot code in all cases. Now the installer can make a reasonable installation proposal in all situations, even if the target storage device doesn&#8217;t contain a booting partition in advance. See, for example, what the installer suggests by default for installing a fully standard SLE-15-SP2 Beta1 in a 32 GiB SD card that contained initially a GPT partition table (tip: GPT partition tables cannot be used to boot in a Raspberry Pi device&#8230; and the installer knows it).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb-300x203.png" alt="Installer proposal for a Raspberry Pi" width="300" height="203" class="aligncenter size-medium wp-image-14256" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb-300x203.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb.png 669w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>With that, the installation of the standard SLE-15-SP2 Beta1 (the aarch64 version, of course) in a Raspberry Pi 3 or 4 is as easy as &#8220;next&#8221;, &#8220;next&#8221;, &#8220;next&#8221;&#8230; with the only exception of a couple of packages that must be manually selected for installation (<code>raspberrypi-*</code> and <code>u-boot-rpi3</code>). Hopefully, future beta images of both SLE and openSUSE Leap 15.2 will select those packages automatically when installing in a Pi, which will make the (open)SUSE experience in those devices basically identical to any other computer. </p>
<h3>SLE Upgrade with the New Media Types</h3>
<p>And talking about the standard installation images of the upcoming SLE-15-SP2, we explained in <a href="https://lizards.opensuse.org/2019/12/05/yast-sprint-90/">our previous blog post</a> that those versions of SUSE Linux Enterprise (SLE) and all its associated products will be distributed in two new kinds of media &#8211; Full and Online. The Full Media contains many repositories and the system can be installed without network connectivity. The Online Media is similar to the openSUSE&#8217;s net installer, it contains no repository and it must download everything from the network. The big difference with openSUSE is that SLE systems need to be registered in order to have access to remote repositories.</p>
<p>But apart from installation, those two new media types can also be used to upgrade an existing system&#8230; at least after all the improvements implemented during the latest sprint.</p>
<p>In the case of the Online Media, if the system is registered the upgrade process will switch all repositories to point to their corresponding versions at the SUSE Customer Center (SCC) and will get the new software from there. If the system is not registered, the upgrade process is cancelled and the user is advised to either register the system or use the Full Media.</p>
<p>The Full Media can be used to upgrade any system, registered or not,  but the process is different in each case. For a non-registered system, the repositories will be switched to the ones included in the media and the system will be upgraded from there. For registered systems the process is the same that with the Online Media, so the software will be fetched from the remote repositories at the SUSE Customer Center.</p>
<p>Last but not least, we also made sure the process with both medias works with an AutoYaST upgrade (yes, you can also use AutoYaST to perform an unattended upgrade, in addition to the better known unattended installation). For a registered system, we simplified the   procedure as much as possible and it only needs access to SCC and an empty AutoYaST profile. For non-registered systems it is a little bit more complex because the profile must specify which repositories from the media should be used for the upgrade. But other than that, the process works quite smooth.</p>
<p>And, of course, we used the opportunity to improve the unit test coverage of the code and to improve the documentation, including the profiles we used for testing.</p>
<h3>The Snapper Plugin for ZYpp Becomes More Compact and Future-proof</h3>
<p><a href="http://snapper.io/">Snapper</a> lets you make filesystem snapshots. It has a companion, <code>snapper-zypp-plugin</code>, a plugin for <a href="https://en.opensuse.org/Portal:Libzypp">ZYpp</a> that makes snapshots automatically during commits. See the &#8220;zypp&#8221; descriptions in this listing:</p>
<pre><code>
# snapper list

  # | Type   |Pre # | Date                     | User | Used Space | Cleanup  | Description  | Userdata     
----+--------+------+--------------------------+------+------------+----------+--------------+-------------
  0 | single |      |                          | root |            |          | current      |              
[...]
824 | pre    |      | Tue Dec 17 10:00:27 2019 | root |  16.00 KiB | number   | zypp(zypper) | important=no
826 | post   |  824 | Tue Dec 17 10:02:19 2019 | root |  16.00 KiB | number   |              | important=no
827 | single |      | Tue Dec 17 11:00:01 2019 | root |  16.00 KiB | timeline | timeline     |             
828 | single |      | Tue Dec 17 11:00:01 2019 | root |  16.00 KiB | timeline | timeline     |             </code></pre>
<p>To make our enterprise products supportable for a looong time, we have rewritten this plugin to C++, starting with snapper-0.8.7. (The original Python implementation is not dead, it is resting in old Git commits.)</p>
<p>As a result, <a href="https://www.regular-expressions.info/python.html">Python regular expressions</a> are no longer supported in the <code>/etc/snapper/zypp.conf</code> file. <a href="https://www.regular-expressions.info/posix.html">POSIX extended regular expressions</a> work instead, which should work sufficiently well for the purpose of package name matching. <a href="http://man7.org/linux/man-pages/man7/glob.7.html" rel="nofollow">Shell patterns</a> continue working unchanged.</p>
<h3>Happy new year!</h3>
<p>During the following three weeks, the YaST team will interrupt the usual sprint-based development pace. That also means, almost for sure, that we will not publish any blog post about the development of YaST until mid January of 2020. So we want to take this opportunity to wish you a happy new year full of joy and Free Software.</p>
<p>See you soon and make sure to start the year with a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>openSUSE on reproducible builds summit</title>
		<link>https://lizards.opensuse.org/2019/12/13/opensuse-on-reproducible-builds-summit/</link>
		<pubDate>Fri, 13 Dec 2019 11:43:37 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[reproducible-builds]]></category>
		<category><![CDATA[Summit]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14231</guid>
		<description><![CDATA[As in the past 3 years, I joined the r-b summit where many people interested in reproducible builds met. There were several participants from companies, including Microsoft, Huawei and Google. Also some researchers from universities that work on tools like DetTrace, tuf and in-toto. But the majority still came from various open-source projects &#8211; with [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>As in the past 3 years, I joined <a href="https://reproducible-builds.org/events/Marrakesh2019/">the r-b summit</a> where many people interested in reproducible builds met.</p>
<p>There were several participants from companies, including Microsoft, Huawei and Google.<br />
Also some researchers from universities that work on tools like <a href="http://nickrenner.us-east-2.elasticbeanstalk.com/projects/dettrace">DetTrace</a>, tuf and in-toto.<br />
But the majority still came from various open-source projects &#8211; with Fedora/RedHat being notably absent.</p>
<p>We had many good discussion rounds, one of which spawned my writeup on <a href="https://lists.reproducible-builds.org/pipermail/rb-general/2019-December/001732.html">the goal of reproducible builds</a></p>
<p>Another session was about our wish to design a nice interface, where people can easily find the reproducibility status of a package in various distributions. I might code a Proof-of-Concept of that in the next weeks (when I have time).<br />
I also got some help with java patches in openSUSE and made several nice upstream reproducibility fixes &#8211; showing some others how easy that can be.</p>
<p>This whole event also was good team-building, getting to know each other better. This will allow us to better collaborate in the Future.</p>
<p>Later there will be a larger report compiled by others.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprint 87</title>
		<link>https://lizards.opensuse.org/2019/10/23/yast-sprint-87/</link>
		<comments>https://lizards.opensuse.org/2019/10/23/yast-sprint-87/#comments</comments>
		<pubDate>Wed, 23 Oct 2019 14:02:18 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14141</guid>
		<description><![CDATA[It&#8217;s time for another YaST team report! Let&#8217;s see what&#8217;s on the menu today. More news and improvements in the storage area, specially regarding encryption support. Some polishing of the behavior of YaST Network. New widgets in libYUI. A look into systemd timers and how we are using them to replace cron. And a new [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>It&#8217;s time for another YaST team report! Let&#8217;s see what&#8217;s on the menu today.</p>
<ul>
<li>More news and improvements in the storage area, specially regarding encryption support.</li>
<li>Some polishing of the behavior of YaST Network.</li>
<li>New widgets in libYUI.</li>
<li>A look into systemd timers and how we are using them to replace <code>cron</code>.</li>
<li>And a new cool tool for developers who have to deal with complex object-oriented code!</li>
</ul>
<p>So let&#8217;s go for it all.</p>
<h3>Performance Improvements in Encrypted Devices</h3>
<p>As you may know, we have recently extended YaST to support additional encryption mechanisms like volatile encryption for swap devices or pervasive encryption for data volumes. You can find more details in our blog post titled &quot;<a href="https://lizards.opensuse.org/2019/10/09/advanced-encryption-yast/">Advanced Encryption Options Land in the YaST Partitioner</a>&quot;.</p>
<p>Those encryption mechanisms offer the possibility of adjusting the sector size of the encryption layer according to the sector size of the disk. That can result in a performance boost with storage devices based on 4k blocks. To get the best of your systems, we have instructed YaST to set the sector size to 4096 bytes whenever is possible, which should improve the performance of the encrypted devices created with the recently implemented methods.</p>
<p>Additionally, we took the time to improve the codebase related to encryption, based on the lessons we learned while implementing volatile and pervasive encryption. We also performed some additional tests and we found <a href="https://bugzilla.suse.com/show_bug.cgi?id=1154267">a problem</a> that we are already fixing in the sprint that has just started.</p>
<h3>Other improvements related to encryption</h3>
<p>One of those lessons we have learnt recently is that resizing a device encrypted with a LUKS2 encryption layer works slightly different to the traditional LUKS1 case. With LUKS2 the password must be provided in the moment of resizing, even if the device is already open and active. So we changed how libstorage-ng handles the passwords provided by the user to make it possible to resize LUKS2 devices in several situations, although there are still some cases in which it will not be possible to use the YaST Partitioner to resize a LUKS2 device.</p>
<p>As a side effect of the new passwords management, now the process that analyzes the storage devices at the beginning of the installation should be more pleasant in scenarios like the one described in the <a href="https://bugzesilla.suse.com/show_bug.cgi?id=1129496">report of bug#1129496</a>, where there are many encrypted devices but the user doesn&#8217;t want to activate them all.</p>
<p>And talking about improvements based on our users&#8217; feedback, we have also adapted the names of the new methods for encrypting swap with volatile keys, as suggested in the comments of our already mentioned previous blog post. We also took the opportunity to improve the corresponding warning messages and help texts.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/volatile.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/volatile-300x226.png" alt="New name and description for encryption with volatile keys" width="300" height="226" class="aligncenter size-medium wp-image-14160" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/volatile-300x226.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/volatile-768x579.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/volatile.png 801w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Network and Dependencies Between Devices</h3>
<p>Similar to encryption, the network backend is another area that needed some final adjustments after the big implementation done in the previous sprints. In particular, we wanted to improve the management of devices that depend on other network devices, like VLANs (virtual LANs) or bridges. </p>
<p>Historically, YaST has simply kept the name of the device as a dependency, even if such device does not exist any longer. That leaded to inconsistent states. Now the dependencies are updated dynamically. If the user renames a device, then it&#8217;s automatically renamed in all its dependencies. If the user deletes a device that is needed by any other one, YaST will immediately ask the user whether to modify (in the case of bonding and bridges) or to remove (in the case of VLANs) those dependent devices.</p>
<h3>New libYUI Widget: ItemSelector</h3>
<p>Now that we mention the user experience, it&#8217;s fair to note that it has been quite a while since we created the last new widget for libYUI, our YaST UI toolkit. But we identified a need for a widget that lets the user select one or many from a number of items with not only a short title, but also a descriptive text for each one (and optionally an icon), and that can scroll if there are more items than fit on the screen.</p>
<p>So say hello to the new <code>SingleItemSelector</code>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/single-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/single-qt-300x215.png" alt="SingleItemSelector in graphical mode" width="300" height="215" class="aligncenter size-medium wp-image-14146" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/single-qt-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/single-qt.png 552w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As you would expect from any libYUI widget, there is also a text-based (ncurses) alternative.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/single-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/single-ncurses-300x176.png" alt="SingleItemSelector in text mode" width="300" height="176" class="aligncenter size-medium wp-image-14147" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/single-ncurses-300x176.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/single-ncurses.png 640w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Please, note the screenshots above are just short usage examples. We are NOT planning to bring back the desktop selection screen. On the other hand, now we have the opportunity to make a prettier screen to select the computer role. Stay tuned for more news about that.</p>
<p>There is also an alternative version of the new widget that allows to select several items. The unsurprisingly named <code>MultiItemSelector</code>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/multi-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/multi-qt-300x227.png" alt="MultiItemSelector in graphical mode" width="300" height="227" class="aligncenter size-medium wp-image-14148" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/multi-qt-300x227.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/multi-qt.png 351w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Which, of course, also comes with an ncurses version.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/multi-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/multi-ncurses-300x176.png" alt="MultiItemSelector in text mode" width="300" height="176" class="aligncenter size-medium wp-image-14149" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/multi-ncurses-300x176.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/multi-ncurses.png 641w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In the near future, we are planning to use that for selecting products and add-on modules. But this kind of widgets will find other uses as well.</p>
<h3>Fun with Systemd Timers</h3>
<p>And talking about the close future, many of you may know there is a plan coming together to replace the usage of <code>cron</code> with systemd timers as the default mechanism for (open)SUSE packages to execute periodic tasks.</p>
<p>In our case, we decided to start the change with <code>yast2-ntp-client</code>, which offers the possibility to synchronize the system time once in a while. So let&#8217;s take a look to how systemd timers work and how we used them to replace <code>cron</code>.</p>
<p>When defining a service in systemd it is possible to specify a type for that service to define how it behaves. When started, a service of type <code>oneshot</code> will simply execute some action and then finish. Those services can be combined with the timers, which invoke any service according to monotonous clock with a given cadence. To make that cadence configurable by the user, the YaST module overrides the default timer with another one located at <code>/etc/systemd/system</code>.</p>
<p>As a note for anyone else migrating to systemd timers, our first though was to use the <code>EnvironmentFile</code> directive instead of overriding the timer. But that seems to not be possible for timers.</p>
<p>One clear advantage of using a systemd service to implement this is the possibility of specifying dependencies and relations with other services. In our case, that allows us to specify that one time synchronization cannot be used if the chrony daemon is running, since they would both conflict. So the new system is slightly more complex than a one-liner cron script, but it&#8217;s also more descriptive and solid.</p>
<p>And another tip for anyone dealing with one-shot services and systemd timers, you can use <code>systemd-cat</code> to catch the output of any script and redirect it to the systemd journal.</p>
<h3>Everybody Loves Diagrams</h3>
<p>But apart from tips for sysadmins and packagers, we also have some content for our fellow developers. You know YaST is a huge project that tries to manage all kind of inter-related pieces. Often, the average YaST developer needs to jump into some complex module. Code documentation can help to know your way around YaST internals that you don&#8217;t work with every day. To generate such documentation, we use the <a href="https://yardoc.org/">YARD</a> tool, and its output is for example here, for <a href="https://www.rubydoc.info/github/yast/yast-network">yast-network</a>. Still, for large modules with many small classes, this is not enough to get a good overview.</p>
<p>Enter <a href="https://github.com/mvidner/yard-medoosa">yard-medoosa</a>, a plugin for YARD that automatically creates <a href="https://en.wikipedia.org/wiki/Class_diagram">UML class diagrams</a>, clickable to get you to the classes textual documentation.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/medoosa.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/medoosa-300x35.png" alt="The yast2-network medoosa" width="300" height="35" class="aligncenter size-medium wp-image-14153" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/medoosa-300x35.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/medoosa-768x89.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/medoosa-1024x118.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It is still a prototype but it has proven useful for navigating a certain large pull request. We hope to soon tell you about an improved version.</p>
<h3>More Solid Device Names in fstab and crypttab</h3>
<p>Back to topics related to storage management, you surely know there are several ways to specify a device to be mounted in the <code>/etc/fstab</code> file or a device to be activated in the <code>/etc/crypttab</code>. Apart from using directly the name of the device (like <code>/dev/sda1</code>) or any of its alternative names based on udev, you can also use the UUID or the label of the file-system or of the LUKS device.</p>
<p>By default, YaST will use the udev path in s390 systems and the UUID in any other architecture. Although that&#8217;s something that can be configured modifying the <code>/etc/sysconfig/storage</code> file or simply using this screen of the Partitioner, which makes possible to change how the installation (both the Guided Setup and the Expert Partitioner) writes the resulting <code>fstab</code> and <code>crypttab</code> files.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/mount_by_setting.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/mount_by_setting-300x225.png" alt="Changing the way devices are referenced" width="300" height="225" class="aligncenter size-medium wp-image-14162" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/mount_by_setting-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/mount_by_setting-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/mount_by_setting.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But, what happens when the default option (like the udev path) is not a valid option for some particular device? So far, YaST simply used the device name (e.g. <code>/dev/sda1</code>) as an immediate fallback. That happened at the very end of the process, when already writing the changes to disk.</p>
<p>We have improved that for Tumbleweed, for SLE-15-SP1 (which implies Leap 15.1) and for the upcoming versions of (open)SUSE. Now, if the default value is not suitable for a particular device because the corresponding udev path does not exists, because using a given name is incompatible with the chosen encryption method, or for any other reason, YaST will fall back to the most reasonable and stable alternative. And it will do it from the very beginning of the process, being immediately visible in the Partitioner.</p>
<h3>Stay Tuned for More&#8230; and Stay Communicative</h3>
<p>As usual, when we publish our sprint report we are already working on the next development sprint. So in approximately two weeks you will have more news about our work, this time likely with a strong focus in AutoYaST.</p>
<p>Don&#8217;t forget to keep providing us feedback. As commented above, it&#8217;s very valuable for us and we really use it as an input to plan subsequent development sprints.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/10/23/yast-sprint-87/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Advanced Encryption Options Land in the YaST Partitioner</title>
		<link>https://lizards.opensuse.org/2019/10/09/advanced-encryption-yast/</link>
		<comments>https://lizards.opensuse.org/2019/10/09/advanced-encryption-yast/#comments</comments>
		<pubDate>Wed, 09 Oct 2019 10:07:42 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14054</guid>
		<description><![CDATA[Welcome to a new sneak peek on the YaST improvements you will enjoy in SLE-15-SP2 and openSUSE Leap 15.2&#8230; or much earlier if you, as most YaST developers, are a happy user of openSUSE Tumbleweed. In our report of the 84th sprint we mentioned some changes regarding the encryption capabilities of the YaST Partitioner, like [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Welcome to a new sneak peek on the YaST improvements you will enjoy in SLE-15-SP2 and openSUSE Leap 15.2&#8230; or much earlier if you, as most YaST developers, are a happy user of openSUSE Tumbleweed.</p>
<p>In <a href="https://lizards.opensuse.org/2019/09/16/yast-sprint-84/">our report of the 84th sprint</a> we mentioned some changes regarding the encryption capabilities of the YaST Partitioner, like displaying the concrete encryption technology or the possibility to keep an existing encryption layer.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-300x189.png" alt="Keeping the previous encryption layer" width="300" height="189" class="aligncenter size-medium wp-image-14042" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-300x189.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-768x483.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt.png 958w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And the <a href="https://lizards.opensuse.org/2019/09/26/highlights-of-yast-development-sprint-85/">report of sprint 85</a> contained a promise about a separate blog post detailing the new possibilities we have been adding when it comes to create encrypted devices.</p>
<p>So here we go! But let&#8217;s start with a small disclaimer. Although some of the new options are available for all (open)SUSE users, it&#8217;s fair to say that this time the main beneficiaries are the users of s390 systems, which may enjoy up to four new ways of encrypting their devices.</p>
<h3>Good Things don&#8217;t Need to Change</h3>
<p>As you may know, so far the YaST Partitioner offered an &#8220;Encrypt Device&#8221; checkbox when creating or editing a block device. If such box is marked, the Partitioner asks for an encryption password and creates a LUKS virtual device on top of the device being encrypted.</p>
<p>LUKS (<a href="https://gitlab.com/cryptsetup/cryptsetup/wikis/home">Linux Unified Key Setup</a>) is the standard for Linux hard disk encryption. By providing a standard on-disk-format, it facilitates compatibility among distributions. LUKS stores all necessary setup information in the partition header, enabling to transport or migrate data seamlessly. So far, there are two format specifications for such header: LUKS1 and LUKS2. YaST uses LUKS1 because is established, solid and well-known, being fully compatible with the (open)SUSE installation process and perfectly supported by all the system tools and by most bootloaders, like Grub2.</p>
<p>You should not fix what is not broken. Thus, in most cases, the screen for encrypting a device has not changed at all and it still works exactly in the same way under the hood.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-300x188.png" alt="Editing an encrypted device" width="300" height="188" class="aligncenter size-medium wp-image-14041" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-300x188.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-768x481.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt.png 958w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But using an alternative approach may be useful for some use cases, and we wanted to offer an option in the Partitioner for those who look for something else. So in some special cases that screen will include a new selector to choose the encryption method. Let&#8217;s analyze all those new methods.</p>
<h3>Volatile Swap Encryption with a Random Key</h3>
<p>When a swap device has been marked to be encrypted, the user will be able to choose between &#8220;Regular LUKS1&#8221; and &#8220;Volatile Encryption with Random Key&#8221;. Both options will be there for swap devices on all hardware architectures. The first option simply uses the classical approach described above.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive1-300x225.png" alt="Selecting the encryption method" width="300" height="225" class="aligncenter size-medium wp-image-14102" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive1-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive1-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive1.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The second one allows to configure the system in a way in which the swap device is re-encrypted on every boot with a new randomly generated password.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive2-300x225.png" alt="Encrypt swap with a random password" width="300" height="225" class="aligncenter size-medium wp-image-14103" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive2-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive2-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive2.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Some advanced users may point that configuring such a random encryption for swap was already possible in versions of openSUSE prior to Leap 15.0. But the procedure to do so was obscure to say the least. The encryption with a random password was achieved by simply leaving blank the &#8220;Enter a Password&#8221; field in the encryption step. The exact implications were not explained anywhere in the interface and the help text didn&#8217;t mention all the risks.</p>
<p>Now the same configuration can be achieved with a more explicit interface, relevant information is provided as you can see in the screenshot below and some extra internal controls are in place to try to limit the potential harm.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive3.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/prvasive3-300x225.png" alt="Help text for the random swap method" width="300" height="225" class="aligncenter size-medium wp-image-14104" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive3-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive3-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/prvasive3.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>With this approach, the key used to encrypt the content of the swap is generated on every boot using <code>/dev/urandom</code> which is extremely secure. But you can always go a bit further&#8230;</p>
<h3>Swap Encryption with Volatile Protected AES Keys</h3>
<p>One of the nice things about having a <a href="https://en.wikipedia.org/wiki/Mainframe_computer">mainframe computer</a> (and believe us there are MANY nice things) is the extra security measures implemented at all levels. In the case of IBM Z or IBM LinuxONE that translates into the so-called <a href="https://www.ibm.com/support/knowledgecenter/linuxonibm/liaaf/lnz_r_crypt.html">pervasive encryption</a>. Pervasive encryption is an infrastructure for end-to-end data protection. It includes data encryption with protected and secure keys.</p>
<p>In s390 systems offering that technology, the swap can be encrypted on every boot using a volatile protected AES key, which offers an extra level of security compared to regular encryption using data from <code>/dev/urandom</code>. <a href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lxdc/lxdc_swapdisks.html">This document</a> explains how to setup such system by hand. But now you can just use YaST and configure everything with a single click, as shown in the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-protected.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-protected-300x179.png" alt="Encrypting swap with volatile protected keys" width="300" height="179" class="aligncenter size-medium wp-image-14095" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-protected-300x179.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-protected-768x458.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-protected.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The good thing about this method is that you can use it even if your s390 system does not have a CCA cryptographic coprocessor. Oh, wait&#8230; you may not know what a cryptographic coprocessor is. Don&#8217;t worry, just keep reading.</p>
<h3>Pervasive Encryption for Data Volumes</h3>
<p>Have you ever wondered how James Bond would protect his information from the most twisted and resourceful villains? We don&#8217;t know for sure (or, at least, we are supposed to not disclosure that information), but we would bet he has an s390 system with at least one Crypto Express cryptographic coprocessor configured in CCA mode (shortly referred as a CCA coprocessor).</p>
<p>Those dedicated pieces of hardware, when properly combined with CPU with <a href="https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.1.0/com.ibm.zos.v2r1.csfb300/csfb3za218.htm">CPACF</a> support, make sure the information at-rest in any storage device can only be read in the very same system where that information was encrypted. They even have a physical mechanism to destroy all the keys when the hardware is removed from the machine, like the self-destruction mechanisms in the spy movies!</p>
<p>As <a href="https://www.ibm.com/support/knowledgecenter/linuxonibm/liaaf/lnz_r_dccnt.html">documented here</a>, the process to enjoy the full power of pervasive encryption for data volumes in Linux can be slightly complex&#8230; unless you have the YaST Partitioner at hand!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/pervasive.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/pervasive-300x178.png" alt="Pervasive volume encryption" width="300" height="178" class="aligncenter size-medium wp-image-14078" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive-300x178.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive-768x455.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive.png 803w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As you can see in the screenshot above, the process with YaST is as simple as choosing &#8220;Pervasive Volume Encryption&#8221; instead of the classic LUKS1 that YaST uses regularly for non-swap volumes. If YaST finds in the system a secure AES key already associated to the volume being encrypted, it will use that key and the resulting encryption device will have the DeviceMapper name specified for that key. If such secure keys don&#8217;t exist, YaST will automatically register a new one for each volume.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/pervasive_help.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/pervasive_help-300x194.png" alt="Help for pervasive volume encryption" width="300" height="194" class="aligncenter size-medium wp-image-14077" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive_help-300x194.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive_help-768x496.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/pervasive_help.png 854w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Pervasive encryption can be used on any volume of the system, even the root partition.</p>
<h3>I want it all!</h3>
<p>So far we have seen you can use protected AES keys for randomly encrypting swap and registered secure keys for protecting data volumes. But what if you want your swap to be randomly encrypted with a volatile secure AES key? After all, you have already invested time and money installing those great CCA coprocessors, let&#8217;s use them also for the random swap encryption!</p>
<p>If your hardware supports it, when encrypting the swap you will see a &#8220;Volatile Encryption with Secure Key&#8221; option, in addition to the other four possibilities commented above. As easy as it gets!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-secure.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-secure-300x178.png" alt="All possible methods for encrypting a swap" width="300" height="178" class="aligncenter size-medium wp-image-14096" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-secure-300x178.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-secure-768x457.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/10/perv-swap-secure.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>More Booting Checks in non-s390 Systems</h3>
<p>As described in the help for pervasive volume encryption showed above, that encryption method uses LUKS2 under the hood. So we took the opportunity to improve the Partitioner checks about encryption and booting. Now, in any architecture that is not s390 the following warning will be displayed if the expert partitioner is used to place the root directory in a LUKS2 device without a separate plain <code>/boot</code>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/luks2_warning.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/luks2_warning-300x233.jpg" alt="New check for booting" width="300" height="233" class="aligncenter size-medium wp-image-14076" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/luks2_warning-300x233.jpg 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/luks2_warning-768x597.jpg 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/luks2_warning.jpg 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As mentioned, that doesn&#8217;t apply to s390 mainframes. The usage of <code>zipl</code> makes possible to boot Linux in those systems as long as the kernel supports the encryption technology, independently of the Grub2 (lack of) capabilities.</p>
<h3>What&#8217;s next?</h3>
<p>We are still working to smooth off the rough edges of the new encryption methods offered by YaST and to add AutoYaST support for them. You may have noticed that most of the improvements currently implemented will only directly benefit s390 systems&#8230; even just a subset of those. But at the current stage, we already have built the foundation for a new era of encryption support in YaSTland.</p>
<p>We are thinking about adding more encryption methods that could be useful for all (open)SUSE users, with general support for LUKS2 being an obvious candidate. But that&#8217;s not something we will see in the short term because there are many details to iron up first in those technologies to make then fit nicely into the current installation process.</p>
<p>But hey, meanwhile you can play with all the other new toys!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/10/09/advanced-encryption-yast/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 84</title>
		<link>https://lizards.opensuse.org/2019/09/16/yast-sprint-84/</link>
		<pubDate>Mon, 16 Sep 2019 15:09:29 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14038</guid>
		<description><![CDATA[The YaST Team finished yet another development sprint last week and we want to take the opportunity to let you all glance over the engine room to see what&#8217;s going on. Today we will confess an uncomfortable truth about how we manage the Qt user interface, will show you how we organize our work (or [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The YaST Team finished yet another development sprint last week and we want to take the opportunity to let you all glance over the engine room to see what&#8217;s going on.</p>
<p>Today we will confess an uncomfortable truth about how we manage the Qt user interface, will show you how we organize our work (or at least, how we try to keep the administrative part of that under control) and will give you a sneak peak on some upcoming YaST features and improvements.</p>
<p>Let&#8217;s go for it!</p>
<h3>There Be Dragons: YaST Qt UI Event Handling</h3>
<p>The YaST Qt UI is different in the way that it uses Qt. Normal Qt applications are centered around a short main program that after initializing widgets passes control to the Qt event loop. Not so YaST: it is primarily an interpreter for the scripts (today in Ruby, in former times in YCP) that are executed for the business logic. Those scripts, among other things, also create and destroy widget trees. But the control flow is in the script, not in a Qt event loop. So YaST uses different execution threads to handle both sides: graphic&#8217;s system events for Qt widgets and the control flow from the scripts.</p>
<p>This was always quite nonstandard, and we always needed to do weird things to make it happen. We always kind of misused Qt to hammer it into shape for that. And we always feared that it might break with the next Qt release, and that we might have a hard time to make it work again.</p>
<p>This time has now come with <a href="https://bugzilla.opensuse.org/show_bug.cgi?id=1139967">bug#1139967</a>, but we were lucky enough to find a Qt call to bring it back to life; a <code>QEventLoop::wakeUp()</code> call fixed it. We don&#8217;t quite know (yet) why, though. Any hint, anyone?.</p>
<p>Should we even tell you that? Well, we think you deserve to know. After all, it worked well for about 20 years (!)&#8230; and now it&#8217;s working again.</p>
<h3>The Refactoring of YaST Network Keeps Going</h3>
<p>What is still not working that fine is the revamped network management. We have been working on it during the latest sprint, but it will take at least another one before it&#8217;s stable enough to be submitted to openSUSE Tumbleweed.</p>
<p>On which parts have we be working during the this sprint? Glad you asked! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> We are cleaning the current mess in wireless configuration. Soon that part will be more intuitive and consistent with other types of network. We are also making sure we propose meaningful defaults for the new cards added to the network configuration (all types of cards, not only wireless). The functionality to configure udev in order to enjoy stable names for the network interfaces has also received some love. The new version is more stable and flexible. And last but not least, we are improving the device activation in s390 systems for it to be more straightforward in the code and more clear in the user interface.</p>
<p>If everything goes as planned, by the end of the next sprint we will be ready to submit the improved YaST Network to Tumbleweed. That will be the right time for a dedicated blog post with screenshots and further explanations of all the changes.</p>
<h3>Enhancing the Partitioner Experience with Encrypted Devices</h3>
<p>And talking about ongoing work, we are currently working to broaden the set of technologies and use-cases the Partitioner supports when it comes to data encryption. As with the network area, the big headlines in that regard will have to wait for future blog posts. But if you look close enough to the user interface of the Partitioner available in Tumbleweed you can start spotting some small changes that anticipate the upcoming new features.</p>
<p>The first change is very subtle. When visualizing the details of an encrypted device, next to the previously existing &#8220;Encrypted: Yes&#8221; text you will now be able to see the concrete type of encryption. For all devices encrypted using YaST, that type will always be LUKS1 since that&#8217;s the only format that YaST has supported&#8230; so far. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/enc-part1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/enc-part1-300x120.png" alt="Partitioner: show the type of encryption" width="300" height="120" class="aligncenter size-medium wp-image-14039" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/enc-part1-300x120.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/enc-part1.png 463w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Some other small changes are visible when editing an encrypted device. If such a device was not originally encrypted in the system, nothing changes apart from minor adjustments in the labels. The user simply sees a form with an empty field to enter the password.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/part-new-crypt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/part-new-crypt-300x188.png" alt="Encrypting a plain device" width="300" height="188" class="aligncenter size-medium wp-image-14040" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/part-new-crypt-300x188.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-new-crypt-768x483.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-new-crypt.png 955w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>When editing for a second time a device that was already marked for encryption during the current execution of the Partitioner, the form is already prefilled with the password entered before. In the past, the previous encryption layer was ditched (so it&#8217;s password and other arguments were forgotten) and the user had to define the encryption again from scratch. That will become even more relevant soon, when the form for encryption becomes more than just a password field. Stay tuned for news in that regard.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-300x188.png" alt="Editing an encrypted device" width="300" height="188" class="aligncenter size-medium wp-image-14041" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-300x188.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt-768x481.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-edit-crypt.png 958w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Moreover, when editing a device that is already encrypted in the system, an option is offered to just use the existing encryption layer instead of replacing it with a (likely more limited) encryption created by the Partitioner.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-300x189.png" alt="Keeping the previous encryption layer" width="300" height="189" class="aligncenter size-medium wp-image-14042" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-300x189.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt-768x483.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/09/part-reencrypt.png 958w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Apart from opening the door for more powerful and relevant changes in the area of encryption, these changes represent an important usability improvement by themselves.</p>
<h3>Tidying up the YaST Team&#8217;s Trello Board</h3>
<p>As you can see in this report and in all the previous ones, the YaST Team works constantly on many different areas like installation, network management, storage technologies&#8230; you name it. We use <a href="https://trello.com">Trello</a> to organize all that work.  For each bug in Bugzilla or feature in Jira there is a corresponding Trello card. As it happens, sometimes when a bug is closed its Trello card is forgotten to be updated.</p>
<p>A check with <a href="https://github.com/mvidner/ytrello">ytrello</a> revealed that, out of a total of 900-something cards, about 500 were outdated and could be closed. More than the half! Why so many?</p>
<p>We found that quite a number of these cards were open cards in closed (archived) lists. So when you archive a list, don&#8217;t forget to archive its cards before. We have just learned that Trello does not do this automatically. That&#8217;s exactly why there&#8217;s a menu item <code>Archive All Cards in This List...</code> besides <code>Archive This List</code> in the Trello user interface.</p>
<h3>Back to work!</h3>
<p>This has been a summer of promises on our side. We told you we are working to improve our user interface library (libYUI), revamping the code to manage the network configuration, extending the support for encryption&#8230; which means we have a lot work to be finished.</p>
<p>So let us go back to work while you do your part &#8211; having a lot of fun!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprint 82</title>
		<link>https://lizards.opensuse.org/2019/08/14/yast-sprint-82/</link>
		<comments>https://lizards.opensuse.org/2019/08/14/yast-sprint-82/#comments</comments>
		<pubDate>Wed, 14 Aug 2019 12:16:08 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13988</guid>
		<description><![CDATA[July and August are very sunny months in Europe&#8230; and chameleons like sun. That&#8217;s why most YaST developers run away from their keyboards during this period to enjoy vacations. Of course, that has an impact in the development speed of YaST and, as a consequence, in the length of the YaST Team blog posts. But [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>July and August are very sunny months in Europe&#8230; and chameleons like sun. That&#8217;s why most YaST developers run away from their keyboards during this period to enjoy vacations. Of course, that has an impact in the development speed of YaST and, as a consequence, in the length of the YaST Team blog posts.</p>
<p>But don&#8217;t worry much, we still have enough information to keep you entertained for a few minutes if you want to dive with us into our summer activities that includes:</p>
<ul>
<li>Enhancing the development documentation</li>
<li>Extending AutoYaST capabilities regarding Bcache</li>
<li>Lots of small fixes and improvements</li>
</ul>
<h3>AutoYaST and Bcache &#8211; Broader Powers</h3>
<p>Bcache technology made its debut in YaST several sprints ago. You can use the Expert Partitioner to create your Bcache devices and improve the performance of your slow disks. We even published a <a href="https://lizards.opensuse.org/2019/02/27/recap-bcache-in-yast/">dedicated blog post</a> with all details about it.</p>
<p>Apart of the Expert Partitioner, <a href="https://lizards.opensuse.org/2019/03/14/yast-sprint-73/">AutoYaST was also extended</a> to support Bcache devices. And this time, we are pleased to announce that &#8230; we have fixed our <a href="https://bugzilla.suse.com/show_bug.cgi?id=1139783" rel="nofollow">first Bcache bug</a>!</p>
<p>Actually, there were two different bugs in the AutoYaST side. First, the auto-installation failed when you tried to create a Bcache device without a caching set. On the other hand, it was not possible to create a Bcache with an LVM Logical Volume as backing device. Both bugs are gone, and now AutoYaST supports those scenarios perfectly.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/08/autoyast-bcache.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/08/autoyast-bcache-300x147.png" alt="Configuring Bcache and LVM with AutoYaST" width="300" height="147" class="aligncenter size-medium wp-image-13989" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/08/autoyast-bcache-300x147.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/08/autoyast-bcache-768x376.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/08/autoyast-bcache.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But Bcache is a quite young technology and it is not free of bugs. In fact, it fails when the backing device is an LVM Logical Volume and you try to set the cache mode. We have already <a href="https://bugzilla.suse.com/show_bug.cgi?id=1139948">reported a bug</a> to the Bcache crew and (as you can see in the bug report) a patch is already been tested.</p>
<h3>Enhancing Our Development Documentation</h3>
<p>This sprint we also touched our <a href="https://yastgithubio.readthedocs.io/en/latest/README/">development documentation</a>, specifically we documented our process for creating the maintenance branches for the released products. The <a href="https://yastgithubio.readthedocs.io/en/latest/branching-how-to/">new branching documentation</a> describes not only how to actually create the branches but also how to adapt all the infrastructure around (like Jenkins or Travis) which requires special knowledge.</p>
<p>We will see how much the documentation is helpful next time when somebody has to do the branching process for the next release. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<h3>Working for a better <del datetime="2019-08-14T10:13:54+00:00">world</del> YaST</h3>
<p>We do our best to write code free of bugs&#8230; but some bugs are smarter than us and they manage to survive and reproduce. Fortunately we used this sprint to do some hunting.</p>
<ul>
<li>We made the recently added <code>select_product</code> control file option work as it&#8217;s really expected. That is, selecting the given product in addition to displaying its license. See the <a href="https://github.com/yast/yast-yast2/pull/954">pull request containing the fix</a> for (a lot of) additional information.
</li>
<li>
We fixed the <a href="https://github.com/yast/yast-packager/pull/459">previously improved product selection for multi-repository medias</a>, which was raising some <code>undefined method</code> errors. See <a href="https://github.com/yast/yast-packager/pull/462">yast/yast-packager#462</a>.
</li>
<li>
The Expert Partitioner <a href="https://bugzilla.suse.com/show_bug.cgi?id=1142669">was failing</a> in some cases when trying to remove devices from a Btrfs file system. Now it works as expected.
</li>
<li>
During the installation, the partitioning proposal <a href="https://bugzilla.suse.com/show_bug.cgi?id=1139808">was raising an unexpected exception</a> under certain scenarios involving BIOS RAIDs. This error was also fixed.
</li>
</ul>
<p>Those are only some examples of the kind of bugs we have fought during this sprint. But checking bug reports has also made us think in the future&#8230;</p>
<h3>LibYUI in 21st Century</h3>
<p>We fixed <a href="https://bugzilla.suse.com/show_bug.cgi?id=1142353">a bug</a> related to how the focus was managed in text mode after changing any setting via the hyperlinks available in the installation summary.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-300x224.png" alt="Installation summary in text mode" width="300" height="224" class="aligncenter size-medium wp-image-13262" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-768x574.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-1024x765.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses.png 1025w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The implemented solution is actually not perfect, it&#8217;s just the better we can do with our set of widgets. And that was yet another example of such problem &#8211; LibYUI is an awesome library that allows us to create interfaces that work in both graphic and text modes, but it has basically not evolved for more than a decade&#8230; and it&#8217;s time to fix that!</p>
<p>So we have been discussing how to organize our time in the close future to leave some room for innovation and renovation regarding LibYUI and the YaST UI in general. Stay tuned for more news.</p>
<h3>August is still not over</h3>
<p>The YaST Team will keep working during the rest of the summer sharpening our Linux Swiss army knife. But half of the team is still on vacation or starting their vacation now. So most likely our next report will be here in two weeks and it will also be a light read.</p>
<p>Meanwhile, don&#8217;t forget to have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/08/14/yast-sprint-82/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>SUSE Manager and the Partitioning Guided Setup</title>
		<link>https://lizards.opensuse.org/2019/07/16/suse-manager-guided-setup/</link>
		<comments>https://lizards.opensuse.org/2019/07/16/suse-manager-guided-setup/#comments</comments>
		<pubDate>Tue, 16 Jul 2019 10:50:26 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13895</guid>
		<description><![CDATA[Apart from our usual development sprint reports, we (the YaST Team) sometimes publish separate blog posts to summarize a new feature or to present an idea we are working on. Lately, several of those posts have been focused on new features of the YaST Partitioner, like the support for Bcache or the new Btrfs capabilities. [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Apart from our usual development sprint reports, we (the YaST Team) sometimes publish separate blog posts to summarize a new feature or to present an idea we are working on. Lately, several of those posts have been focused on new features of the YaST Partitioner, like <a href="https://lizards.opensuse.org/2019/02/27/recap-bcache-in-yast/">the support for Bcache</a> or the <a href="https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/">new Btrfs capabilities</a>. But today it&#8217;s the turn of another part of yast2-storage-ng: the partitioning proposal, also known as the Guided Setup.</p>
<p>As you may know, YaST is an universal installer used to configure all the (open)SUSE and derivative products. Moreover, the installer options and steps can be refined even further by each of the system roles available for each product. The goal of this blog post is to present some ideas aimed to add new possibilities in the area of the storage guided proposal for those who configure the installer for a certain product or system role. With that we hope to ease the life for the creators of <a href="https://www.suse.com/products/suse-manager/">SUSE Manager</a>, the SUSE&#8217;s purpose-specific distribution to manage software-defined infrastructures.</p>
<p>Although many of the presented capabilities will land soon in openSUSE Tumbleweed they will not be used by default. Not only because they are not targeted to the openSUSE use-case, but also because so far this is just a prototype. That means all texts are subject to change and most screens will get some adaptations before being used in a final product&#8230; or maybe they will even be completely revamped.</p>
<h3>One Guided Proposal to Rule them All</h3>
<p>Although the Expert Partitioner can be used to tweak the storage configuration of any SUSE or openSUSE distribution during installation, the installer always tries to offer a reasonable proposal about it. Moreover, the &#8220;Guided Setup&#8221; button in the &#8220;Suggested Partitioning&#8221; screen leads to a wizard that can be used to configure some aspects of such a proposal, as shown in the following diagram (some actions have been blurred just to emphasize the fact that the concrete list of actions will change after each execution of the wizard).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc-272x300.png" alt="Default Guided Setup wizard" width="272" height="300" class="aligncenter size-medium wp-image-13896" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc-272x300.png 272w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc-768x846.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc-929x1024.png 929w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054297-7790cb80-a3ef-11e9-8e40-fbecf5e37abc.png 1178w" sizes="(max-width: 272px) 100vw, 272px" /></a></p>
<p>The exact behavior of the Guided Setup is different in every product and, potentially, in every system role. Many things can be adjusted by the creators of the product or the role, like the partitions and LVM volumes to be proposed, the options to be offered in the wizard, the default value for every option and much more. But all those possibilities were still not enough in the case of SUSE Manager and its unique approach to organize the storage devices.</p>
<h3>The Strange Case of SUSE Manager</h3>
<p>First of all, the SUSE Manager documentation suggests to allocate each of several data directories (<code>/var/spacewalk</code>, <code>/var/lib/pgsql</code>, <code>/var/cache</code> and <code>/srv</code>) in its own dedicated disk when installing in a production environment. For such setup to make sense, it&#8217;s absolutely crucial to choose the right disk for every data directory taking into account both the size and the speed of the disks.</p>
<p>The documentation also suggests to use LVM in production environments. In order to achieve a clear separation of disks when using LVM, the recommended approach is to set up a separate LVM volume group for each relevant data directory instead of allocating all the logical volumes in the usual single shared &#8220;system&#8221; group.</p>
<p>So, although it may look overkill when installing SUSE Manager just for evaluation purposes, the preferred setup for a final deployment of the product spreads over up to five disks &#8211; one containing an LVM volume group with the usual logical volumes of any Linux system (like the root system and the swap space) and each of the other disks containing additional LVM groups, each one dedicated to a particular data directory.</p>
<p>Last but not least, the SUSE Manager guided setup should never offer the possibility of keeping the preexisting partitions in any of the disks. So the usual questions &#8220;Choose what to do with existing Linux/Windows/other partitions&#8221; (see the image above) should not even be displayed to the user. The answer is always &#8220;remove even if not needed&#8221;. Period. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<h3>Breaking Down the Problem into Smaller Pieces</h3>
<p>We didn&#8217;t want to implement a completely different guided proposal for SUSE Manager. Instead, we wanted to merge the main ideas behind its approach into the current configurable system, so other products and roles could use them. We identified three different features that we turned into the corresponding optional configuration settings at disposal of anyone defining a new system role. All the new settings are independent of each other and can be combined in any way to provide a fully customized user experience.</p>
<h3>First Piece: Explicit Selection of Disks per Volume</h3>
<p>First of all, it was necessary to support letting the user explicitly choose a disk for every partition or LVM volume, unlike the default guided setup which automatically finds the best disk to allocate every partition given the requirements and a set of &#8220;candidate disks&#8221;. To enable that, now the product or role can choose between two values for the new <code>allocate_volume_mode</code> setting. A value of <code>auto</code> (which is the default to keep backwards compatibility) will result in the already known wizard with up to 4 steps.</p>
<ul>
<li>Select the candidate disks</li>
<li>Decide what to do with existing partitions</li>
<li>Configure the schema (LVM and/or encryption)</li>
<li>Configure each file system</li>
</ul>
<p>As always, the steps in which there is nothing for the user to decide are skipped so the wizard is usually shorter than four steps.</p>
<p>No surprises so far. But <code>allocate_volume_mode</code> can also be set to <code>device</code>, which will result in the alternative wizard displayed in the following image.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56-271x300.png" alt="New possible Guided Setup wizard" width="271" height="300" class="aligncenter size-medium wp-image-13899" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56-271x300.png 271w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56-768x850.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56-925x1024.png 925w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054659-32b96480-a3f0-11e9-8bf7-47261efadc56.png 1175w" sizes="(max-width: 271px) 100vw, 271px" /></a></p>
<p>As you can see, there is no initial step to select the set of disks to be used by the system to automatically allocate the needed partitions. Instead, the following screen allows to explicitly assign a disk to every partition or LVM volume group.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61054596-0e5d8800-a3f0-11e9-8fb3-1b89f4590276.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61054596-0e5d8800-a3f0-11e9-8fb3-1b89f4590276-300x221.png" alt="New step to assign volumes and partitions to disks" width="300" height="221" class="aligncenter size-medium wp-image-13900" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61054596-0e5d8800-a3f0-11e9-8fb3-1b89f4590276-300x221.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054596-0e5d8800-a3f0-11e9-8fb3-1b89f4590276-768x565.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61054596-0e5d8800-a3f0-11e9-8fb3-1b89f4590276.png 974w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Second Piece: Enforcing a Behavior about Previous Partitions</h3>
<p>No matter which allocate mode is configured (<code>auto</code> or <code>device</code>), there is always one step in which the user is asked what to do with the preexisting partitions in the affected disks. So far, the product defined the default answer for those questions, but the user always had the opportunity to change that default option.</p>
<p>Now, the creator of the product or the system role can disable the setting called <code>delete_resize_configurable</code> which is enabled by default in order to prevent the user from modifying the default behavior. The wizard will include no questions about what to do with existing Windows/Linux/other partitions. In most cases, that will imply a whole step of the wizard to be simply skipped.</p>
<h3>Third Piece: Separate Volume Groups for some Directories</h3>
<p>The most important setting configured by every system role is the list of so-called <code>volumes</code>. That list includes all the file systems (both mandatory and optional ones) that the guided setup should create as separate partitions or LVM logical volumes. Now it&#8217;s possible to specify that a volume could be created in its very own separate LVM volume group using the new attribute <code>separate_vg_name</code>. If any of the volumes defined for the current product and role contains such attribute, the screen for selecting the schema will contain an extra checkbox below the usual LVM-related one.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61058982-8def5500-a3f8-11e9-8c24-927769e23b59.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61058982-8def5500-a3f8-11e9-8c24-927769e23b59-300x206.png" alt="New checkbox for directories into their own separate LVM" width="300" height="206" class="aligncenter size-medium wp-image-13901" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61058982-8def5500-a3f8-11e9-8c24-927769e23b59-300x206.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61058982-8def5500-a3f8-11e9-8c24-927769e23b59.png 443w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Putting the Pieces Together for SUSE Manager</h3>
<p>With all the above, we expanded the toolbox for anyone wanting to configure the (open)SUSE installation experience. Which means now we can fulfill the requirements of SUSE Manager maintainers by just adding <code>separate_vg_name</code> to some volumes, setting <code>delete_resize_configurable</code> to false and adjusting the <code>allocate_volume_mode</code>. With all that, the new SUSE Manager workflow for the guided setup will look like this.</p>
<p>First of all, the user will be able to specify the creation of separate LVM volume groups as suggested in the product documentation.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61059008-96e02680-a3f8-11e9-91de-18b24f78e365.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61059008-96e02680-a3f8-11e9-91de-18b24f78e365-300x216.png" alt="SUSE Manager setup - first screen" width="300" height="216" class="aligncenter size-medium wp-image-13902" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61059008-96e02680-a3f8-11e9-91de-18b24f78e365-300x216.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059008-96e02680-a3f8-11e9-91de-18b24f78e365-768x552.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059008-96e02680-a3f8-11e9-91de-18b24f78e365.png 981w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Then a second screen to select which separate file systems should be created and to fine-tune the options for every one of them, if any.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61059028-9f386180-a3f8-11e9-907d-c775732847c7.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61059028-9f386180-a3f8-11e9-907d-c775732847c7-300x213.png" alt="SUSE Manager setup - second screen" width="300" height="213" class="aligncenter size-medium wp-image-13903" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61059028-9f386180-a3f8-11e9-907d-c775732847c7-300x213.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059028-9f386180-a3f8-11e9-907d-c775732847c7-768x544.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059028-9f386180-a3f8-11e9-907d-c775732847c7.png 988w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And finally a last step to assign the correct disk for every partition or separate volume group, depending on the selections on previous screens. With this step the user can optimize the performance by distributing the disks as explained in the SUSE Manager documentation, allocating the areas that need intensive processing to the faster disks and the greedy directories to the bigger devices.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61059078-b7a87c00-a3f8-11e9-85c5-63a62dbc6cfc.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61059078-b7a87c00-a3f8-11e9-85c5-63a62dbc6cfc-300x215.png" alt="SUSE Manager setup - third screen" width="300" height="215" class="aligncenter size-medium wp-image-13904" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61059078-b7a87c00-a3f8-11e9-85c5-63a62dbc6cfc-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059078-b7a87c00-a3f8-11e9-85c5-63a62dbc6cfc-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059078-b7a87c00-a3f8-11e9-85c5-63a62dbc6cfc.png 984w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As usual, the list of actions will reflect the selections of the user creating as many LVM structures as requested.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/61059171-dd358580-a3f8-11e9-8587-6ca10a978869.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/61059171-dd358580-a3f8-11e9-8587-6ca10a978869-300x217.png" alt="SUSE Manager setup - result" width="300" height="217" class="aligncenter size-medium wp-image-13905" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/61059171-dd358580-a3f8-11e9-8587-6ca10a978869-300x217.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059171-dd358580-a3f8-11e9-8587-6ca10a978869-768x555.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/61059171-dd358580-a3f8-11e9-8587-6ca10a978869.png 975w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Beyond SUSE Manager</h3>
<p>As already mentioned, all the guided proposal features can be combined within a given product in any way. For example, one product could adopt the approach of creating separate LVM volume groups while still sticking to the traditional <code>auto</code> allocate mode. Or a given system role could enforce to never delete any existing partition without allowing the user to change that.</p>
<p>But beyond the &#8220;Guided Setup&#8221; button, the availability of two different allocate modes brings back one idea that has been floating around since the introduction of Storage-ng &#8211; adding a section &#8220;Wizards&#8221; to the Expert Partitioner. That would allow to combine some manual steps with the execution of any of the two available allocate modes of the guided proposal&#8230; or with any other workflow that can be implemented in the future.</p>
<p>As always, we are looking forward any feedback about the new features or the guided partitioning proposal in general. And stay tuned for more news!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/07/16/suse-manager-guided-setup/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>Highlights of the Latest YaST Development Sprints</title>
		<link>https://lizards.opensuse.org/2019/06/25/yast-sprints-77-79/</link>
		<pubDate>Tue, 25 Jun 2019 09:33:05 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13843</guid>
		<description><![CDATA[May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are a geographically distributed team), many team members enjoyed vacations (it&#8217;s spring time in Europe), we organized a Leap 15.1 <a href="https://lists.opensuse.org/opensuse-marketing/2019-06/msg00002.html">launch party with technical talks in Gran Canaria</a>&#8230; and we ran out of energy to also publish our traditional sprint reports in this blog.</p>
<p>We will try to fix that with this blog post in which we will try to summarize some highlights from the latest three development sprints, namely the 77th, 78th and 79th. So be warned, this is going to be a loooong post.</p>
<h3>Support for Multi-device Btrfs File Systems</h3>
<p>We have been working steadily during the three sprints in implementing all the necessary bits to offer a good experience installing and upgrading an (open)SUSE system on top of several block devices by means of Btrfs RAID capabilities. That includes support in the Partitioner, in AutoYaST, in the storage guided setup and more.</p>
<p>We decided that all that deserved a separate blog post. You can find here: <a href="https://lizards.opensuse.org/?p=13814">Getting Further with Btrfs in YaST</a>.</p>
<h3>More Improvements for the Partitioner</h3>
<p>That blog post mentions a couple of changes in the Partitioner that, although initially motivated by the introduction of multi-device Btrfs, go beyond that scope and are aimed to make the all the lists of devices more useful and informative.</p>
<p>Traditionally the Partitioner used two separate columns &#8220;Type&#8221; and &#8220;FS Type&#8221; to describe the function of every device. That was sometimes hard to understand. Moreover, quite often the important information (like the relationship between a partition and its RAID or LVM) was simply missing in those tables.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png" alt="Traditional devices table in the Partitioner" width="300" height="214" class="aligncenter size-medium wp-image-13846" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-768x549.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>We have merged those columns into a more informative one that identifies the devices and also gives an overview of the relationship between them at first glance. In addition, the table displaying all the system devices now includes multi-device file systems.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png" alt="Revamped table of devices" width="300" height="215" class="aligncenter size-medium wp-image-13847" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Mitigating CPU vulnerabilities from YaST</h3>
<p>If you are interested in security (or simply if you have not been living under a rock) you probably have heard about CPU based attacks like Spectre or Meltdown. The last year has seen a number of these CPU issues, all of them coming along with their own kernel options to change the Linux behavior in order to mitigate the security risks at a price of some performance loss.</p>
<p>However, not all users know what affects their architectures or particular models of CPU and which kernel parameters to use to gain more performance if the security risk is acceptable for them.</p>
<p>For that purpose, a new meta-option called &#8220;mitigations&#8221; was added to the Linux kernel. It allows to enable and disable at once several of those mitigations that prevent CPU attacks. See more information <a href="https://www.suse.com/support/kb/doc/?id=7023836">at this document</a> published by SUSE.</p>
<p>We find that kernel option very useful, so we decided to provide an easy way for users to adjust it. Now the YaST bootloader screen contains a new setting which offers three pre-defined options and even a fourth one to let the users fine-tune the settings on their own. As you can see in the screenshot below, we have included extensive documentation in the help dialog, so you will not need to search for this blog post in the future.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-13849" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It is also possible to modify this option directly from the installation summary. For that purpose, the &#8220;Firewall&#8221; section was renamed to &#8220;Security&#8221; and it now includes the possibility to tweak the CPU mitigation options, alongside the traditional settings for firewall and opening the SSH port.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png" alt="CPU mitigations in the installation summary" width="300" height="225" class="aligncenter size-medium wp-image-13850" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Another success story of (open)SUSE offering a promptly solution for our users to easily adapt their systems to ever-changing complex needs.</p>
<h3>Memory Optimizations during Installation</h3>
<p>While the release of openSUSE Leap 15.1 was approaching, we got several bug reports stating the YaST installer used to freeze when using only 1GB RAM with online repositories (see <a href="https://bugzilla.suse.com/show_bug.cgi?id=1136051">bug#1136051</a>).</p>
<p>It turned out that at some point YaST loads the details of <em>all available</em> packages. And that needs a lot of memory if you enable the online repositories during installation. For example the OSS Leap repository contains more than 35.000 binary packages!</p>
<p>The problem was in the YaST internal API accessing the package manager library (<a href="https://github.com/openSUSE/libzypp">libzypp</a>). It did not allow to filter the objects, YaST had to read <em>all</em> objects and then do the filtering in the code. And for each object it returned <em>all</em> attributes, even those which were not needed (like the package description, full RPM name, etc&#8230;). All that data required a lot of memory.</p>
<p>To fix that we have introduced new API calls that allow specifying more filters (like return all selected packages, packages from specific repository,&#8230;) and you can set which attributes should be returned. If you need to know only the name and the version then you will not get the other useless attributes. And to ease the usage of the new API in YaST we provided a nice object oriented wrapper written in Ruby.</p>
<p>This optimization saves a lot of memory, 1GB of RAM should be enough for future installations with the online repositories, even if they grow even more.</p>
<p>Unfortunately, we were only able to diagnose the problem and provide a solution a couple of weeks before the official release of Leap 15.1. Introducing a change in such a sensitive part of the installer was considered too risky (it would have invalidated many of the tests that had been already performed) so the installer included in openSUSE Leap 15.1 is still memory hungry if online repositories are used. For that release, we simply increased the official memory requirements to 1.5 GiB.</p>
<h3>Online Migration from openSUSE Leap 15.1 to SLES15-SP1</h3>
<p>For openSUSE Leap 15.0 it was only possible to migrate from Leap to SLES (SUSE Linux Enterprise Server) manually (see the <a href="https://www.suse.com/documentation/sles-15/book_sle_upgrade/data/sec_upgrade-online_opensuse_to_sle.html">documentation</a>). With Leap 15.1 the goal was to also support a migration using YaST. But we got a bug report saying the online migration from openSUSE Leap 15.1 to SLES15-SP1 displayed a wrong migration summary and didn&#8217;t work well.</p>
<p>It turned out that YaST needed some small fixes to support this properly. The main problem was that YaST did not expect that the base product or the package vendor can be changed during online migration, so far it was only possible to upgrade to the next SLE service pack level. But that is fixed now.</p>
<p>Wanna try the migration from openSUSE Leap 15.1 to SLES15-SP1? Then follow these steps.</p>
<ol>
<li>Install the <code>yast2-registration</code> and <code>yast2-migration</code> packages in the Leap 15.1 installation</li>
<li>Make sure the latest online updates are installed (to install the fixes mentioned above)</li>
<li>Start the YaST registration module and register the openSUSE Leap 15.1 product using your registration key</li>
<li>Then start the YaST migration module, select the migration to SLES15-SP1</li>
<li>(There might be reported some package dependency issues in the migration summary, go to the package manager and resolve them. Usually removing the old openSUSE package is the right solution.)</li>
<li>Start the migration, the SLES packages will be downloaded and installed</li>
<li>At the end the system will be rebooted to start the freshly installed SLES, enjoy! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></li>
<li>(It is recommended to review the orphaned packages, leftovers from the Leap installation, with the command <code>zypper packages --orphaned</code> and possibly remove them.)</li>
</ol>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png" alt="From Leap to SLES via YaST" width="300" height="207" class="aligncenter size-medium wp-image-13851" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-768x530.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png 872w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Please note that only minimal server installations of Leap are supported for upgrade, full installations especially with third party packages might not work correctly.</p>
<h3>Why Cannot I Read the Logs?</h3>
<p>Long time ago, the logs of any Linux system were spread over several files living under the <code>/var/log</code> subdirectory. YaST offers its &#8220;System Log&#8221; module to inspect those files in a convenient way. Since the introduction of Systemd and its journal, that information has been gradually moved to this new mechanism by default. And YaST offers its &#8220;Systemd Journal&#8221; module to inspect and query that journal.</p>
<p>Both YaST modules can be executed by any user in the system, not only by root. That&#8217;s intentional because both the Systemd journal and the traditional Linux log files can register information targeted to unprivileged users. But there was some room for improvement in the error message displayed by both modules when such users were trying to access to protected information.</p>
<p>This is how the new more explanatory message looks in the &#8220;System Log&#8221; module.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png" alt="Explanatory pop-up for log viewer" width="300" height="235" class="aligncenter size-medium wp-image-13861" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png 527w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And this is the extended message for &#8220;Systemd Journal&#8221;, that now mentions the <code>systemd-journal</code> user&#8217;s group.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/journal.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png" alt="Improved message in the journal viewer" width="300" height="158" class="aligncenter size-medium wp-image-13862" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/journal.png 363w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Another Day at the YaST Office: Adapting to Changes</h3>
<p>As we usually remark in our blog posts, a significant part of the work of the YaST Team consist in keeping YaST in sync with the constant changes in the underlying system. Of course, these sprints were not an exception in that regard. Without trying to do an exhaustive list, let&#8217;s take a look to some of those adaptations since the mentioned underlying changes may be interesting for some readers.</p>
<p>Turns out Systemd developers has decided to change the list of possible states for Systemd services. The <code>systemd-sigabrt</code> state is obsolete and a new <code>systemd-watchdog</code> one was added. In the YaST team we learned some time ago that the list of Systemd states changes more often than what most people would expect. As a consequence we have an automated check to detect these situations. The bell ringed, we adapted the code and everything keeps working.  </p>
<p>Systemd is not the only technology that keeps evolving. Quite some time ago, <a href="https://www.suse.com/documentation/sles-15/book_rmt/data/book_rmt.html">RMT</a> replaced <a href="https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html">SMT</a> as the default proxy technologies for the <a href="https://scc.suse.com/">SUSE Customer Center</a>. Although both has coexisted for quite some time, from SLE-15 onward only RMT is offered. Thus we have adapted all the references to SMT that still existed in YaST. From now on, only RMT is mentioned to avoid confusion.</p>
<p>Another common adaptation we have to perform in YaST is adjusting some module when the output of the command it runs under the hood has changed. Recently we found out the developers of the command <code>iscsiadm</code> has decided to use more than one exit code to indicate a successful execution (traditionally, only zero should mean that). After a long discussion, we decided to adapt YaST iSCSI to also be happy with the error code 21. What means for you? That future versions of YaST iSCSI should work faster in some situations, since the confusion will not longer result in a timeout. </p>
<h3>YaST Firstboot: a Better Example File</h3>
<p>Those were just some example of the many adaptations we did lately for changes in the system. But not all adjustments are motivated by external changes. We also realized the example configuration file provided by YaST Firstboot (at <code>/etc/YaST2/firstboot.xml</code>) needed some love. Due to the nature of YaST Firstboot, that file should be customized before using YaST Firstboot. But providing an example file with three different steps about acceptance of licenses (two of them enabled and the third one disabled) and other inconsistencies was definitely not helping anyone to understand how to use the module.</p>
<p>In fact, the status of that default example configuration and of the documentation managed to confuse even SUSE&#8217;s quality assurance team. So we improved the example file shipped in the package to make it more realistic and we also updated the YaST Firstboot documentation to clarify how to use that file. Because not all improvements are always done by coding.</p>
<h3>Leap 15.1&#8217;s Most Annoying Bug: Create Home as Btrfs Subvolume</h3>
<p>As all openSUSE users should know, for every Leap release a page is created in the openSUSE wiki listing the so-called Most Annoying Bugs. Leap 15.1 was a very smooth release and this time <a href="https://en.opensuse.org/openSUSE:Most_annoying_bugs_15.1">the corresponding list</a> contains only one bug&#8230; and it&#8217;s a YaST one. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f641.png" alt="&#x1f641;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>In an installed system, when YaST was creating a new user it was always trying to create its home directory as a Btrfs subvolume. Even in cases in which that was impossible. For example, if the directory to be created was not in a Btrfs file system.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png" alt="Writing user error" width="300" height="224" class="aligncenter size-medium wp-image-13865" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-768x572.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Fortunately, the bug didn&#8217;t affect the installation process or AutoYaST. We created a fix that was quickly available as a maintenance update. So make sure your openSUSE system is updated before trying to create new users with YaST.</p>
<h3>YaST Network refactoring: status report</h3>
<p>Since we submitted the first bits of the yast2-network refactoring by the end of April, we have made quite some progress in this area. Although it is still an ongoing effort, we would like you to give you an update on the current state.</p>
<p>We might say that we have been working on two different areas the user interface implementation and the future data model.</p>
<p>About the user interface, the team has improved the code quite a lot to make it easier to maintain and extend. We have introduced some classes to de-couple the widgets from the data, and it pays off. Additionally, we have fixed some bugs (many of them related to validations), simplified the process of adding new devices and reorganized the hardware tab.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png" alt="New hardware tab in YaST Network" width="300" height="239" class="aligncenter size-medium wp-image-13854" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-768x612.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png 844w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Regarding the internal data model, we have been thinking about the best way to represent network configuration in an agnostic way so, in the future, we can not only support <a href="https://en.opensuse.org/Portal:Wicked" rel="nofollow">Wicked</a> but other options too (for the time being, the NetworkManager support is quite limited). If you are curious about the details, we have added a <a href="https://github.com/yast/yast-network/blob/network-ng/doc/network-ng.md">document describing the approach</a> to the repository.</p>
<p>The new data model is already being used to handle DNS and Routing configuration. So if you are using Tumbleweed you have been already using the new network code for some weeks, including the UI enhancements presented in our <a href="https://lizards.opensuse.org/2019/04/30/highlights-of-yast-development-sprint-76/">latest post</a>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png" alt="New network routing dialog" width="300" height="236" class="aligncenter size-medium wp-image-13748" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png 573w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Although the data model is so far only used in the mentioned parts, the plan is to submit to Tumbleweed a heavily refactored UI layer during next sprint. So stay tuned.</p>
<h3>Added Appstream Metadata to the YaST Packages</h3>
<p>The YaST package manager is not the only software manager in the (open)SUSE distributions. There are some more, like Discover in KDE or the GNOME software manager, not to mention the online <a href="https://software.opensuse.org/appstore">openSUSE appstore</a>.</p>
<p>While the YaST manager is <em>package</em> oriented, those other software managers are <em>application</em> oriented. That makes a huge difference, especially for the beginner users.</p>
<p>The full list of packages does not only include the applications (basically anything a user can start from the desktop), but also shared libraries, pieces that provide functionality for other applications or basic components needed for the system to work. With so many software packages (the openSUSE OSS repository contains over 35.000 of them!) it&#8217;s sometimes hard to find the software you need unless you know what you are looking for.</p>
<p>To offer an application-oriented view on top of all that, the application managers need some special data describing the applications inside the packages. The data are located in the <code>/usr/share/metainfo/*.xml</code> files, if you are interested in the technical details check the <a href="https://www.freedesktop.org/wiki/Distributions/AppStream/" rel="nofollow">AppStream documentation</a> provided by the Freedesktop.org.</p>
<p>Our absolutely awesome community contributor <a href="https://github.com/hellcp">Stasiek Michalski</a> (more famous by his nickname <a href="https://lcp.world/">lcp</a>) realized YaST was not offered in those application managers and decided to fix it. So he created an XML generator which collects the data from YaST packages and automagically generates the metainfo XML file needed by the other software managers.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png" alt="YaST in GNOME Software" width="300" height="271" class="aligncenter size-medium wp-image-13856" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-768x693.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-1024x924.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As a result, the Gnome Software Manager, Discover and other software managers will offer YaST in Tumbleweed just as any user-oriented application. Thanks lcp!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png" alt="YaST in Discover" width="300" height="244" class="aligncenter size-medium wp-image-13857" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-768x624.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-1024x832.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>AutoYaST Pre-install Scripts &amp; Storage</h3>
<p>AutoYaST has a special feature to allow users to customize the installation process and take control in different stages of the installation. For that, the AutoYaST profile offers a section where you can insert your custom scripts. There are <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#createprofile.scripts">four types of scripts</a>: <em>pre-scripts</em>, <em>postpartitioning-scripts</em>, <em>chroot-scripts</em>, <em>post-scripts</em> and <em>init-scripts</em>.</p>
<p>For the particular case of <em>pre-scripts</em>, <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#pre-install.scripts">the documentation</a> states that &#8220;<em>It is also possible to change the partitioning in your pre-script</em>&#8220;. That means, for example, you could use a script to create a new partition or to configure some kind of technology. Therefore, it would be very convenient to re-analyze the storage devices after running the user pre-scripts. In fact, that was the default behavior in the old storage stack, but the new one was slightly modified to only re-analyze the system under certain conditions.</p>
<p>But turns out some SLE customers were using pre-scripts to configure the behavior of <a href="https://en.wikipedia.org/wiki/Linux_DM_Multipath">multipath</a> and those changes were not being noticed by AutoYaST.</p>
<p>The solution was quite trivial. We simply decided to always perform a new storage re-analysis after the AutoYaST pre-scripts. We did not find strong reasons to not do it and there should not be significant performance penalty.</p>
<p>And, for the specific case of multipath, YaST now copies some configuration files (e.g., <em>/etc/multipath.conf</em> and <em>/etc/multipath/bindings</em>) to the target system when performing a new installation. Otherwise, the installed system would not contain the configuration applied during the installation.</p>
<h3>Clarifying the Usage of Software Management Options</h3>
<p>Our software manager is one of the most complex YaST modules, which makes some aspects of its usage not fully obvious for some users. You may have even notice that is the only YaST module in which the interface is clearly different when executed in text and graphical mode. Specially the menu at the top of the interface, which is organized in different sections.</p>
<p>Some users where confused by the fact of some options not being persisted between different executions of the module. Those options are there to modify the current operation of the module, not to change the configuration of package management in the system.</p>
<p>When executed in text mode that was clear because such options where labeled as &#8220;<i>temporary change</i>&#8221; but the graphical mode didn&#8217;t have any indication about it. As you can see in the following screenshot, that&#8217;s fixed now.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png" alt="Temporary options in YaST Software" width="300" height="192" class="aligncenter size-medium wp-image-13875" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png 649w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Product License Hard to Understand? Try Another Language!</h3>
<p>Some user reported that in the text-mode installation it was impossible to switch the language of a product license. Although during graphical installation everything works flawlessly, in text mode the language switching widget was there&#8230; but disabled.</p>
<p>The point is that such behavior was not exactly a bug. It was in fact done on purpose. We decided to prevent such language change some time ago because on the Linux console we&#8217;re not able to display the characters of many languages. Hopefully some of our usual reader have just shout &#8220;that&#8217;s not true!&#8221; <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Those users remember that in the <a href="https://lizards.opensuse.org/2018/11/20/yast-sprint-67/">report of our 67th sprint</a> we explained that now we always use <code>fbiterm</code> when installing in text mode in order to be able to display characters of almost every language.</p>
<p>We are now able to display all languages that currently have license translations, so we have enabled the language switching widget and now both graphical installation and text-based one deliver an equivalent user experience.</p>
<h3>More about languages</h3>
<p>This is not the only change related to internationalization we did in these sprints. We also added a specific warning message for situations in which YaST is used to change the language of the system but there is no repository containing the needed translation packages. Something that obviously only affects users configuring system in very restricted environments.</p>
<p>As you can see in this and other recent reports, we have to deal relatively often with difficulties related to translation and internationalization. To reduce the effect of those problems on our final users, we also added some extra mechanisms to detect internationalization errors introduced during development. Hopefully that will mean that in future reports the space dedicated to comment language-related problems gets shorter and shorter. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </p>
<h3>And that was just a summary!</h3>
<p>As long as this post looks, there are many interesting things we have done in these weeks we left out, intentionally or not. We definitely should avoid skipping three reports in a row in the future!</p>
<p>This week it&#8217;s <a href="https://hackweek.suse.com/">Hack Week</a> at SUSE, which means regular YaST development will be put on hold&#8230; or will turn into something completely different. You never know what the result of a Hack Week can be!</p>
<p>But in any case we will go back to our sprint-based pace in August. So expect a new blog post in three weeks. See you then!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Getting further with Btrfs in YaST</title>
		<link>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/</link>
		<comments>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/#comments</comments>
		<pubDate>Wed, 19 Jun 2019 10:42:24 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13814</guid>
		<description><![CDATA[Since the YaST team rewrote the software stack for managing the storage devices, we have been adding and presenting new capabilities in that area regularly. That includes, among other features, the unpaired ability to format and partition all kind of devices and the possibility of creating and managing Bcache devices. Time has come to present [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Since the YaST team rewrote the software stack for managing the storage devices, we have been adding and presenting new capabilities in that area regularly. That includes, among other features, the unpaired <a href="http://yast.opensuse.org/blog/2018/10/09/highlights-of-yast-development-sprint-64/#changes-in-the-partitioner-ui-to-unleash-the-storage-ng-power">ability to format and partition</a> all kind of devices and the possibility of <a href="https://lizards.opensuse.org/2019/02/27/recap-bcache-in-yast/">creating and managing Bcache devices</a>. Time has come to present another largely awaited feature that is just landing in openSUSE Tumbleweed: support for multi-device Btrfs file systems.</p>
<p>As our usual readers surely know, Btrfs is a modern file system for Linux aimed at implementing advanced features that go beyond the scope and capabilities of traditional file systems. Such capabilities include subvolumes (separate internal file system roots), writable and read-only snapshots, efficient incremental backup and our today&#8217;s special: support for distributing a single file system over multiple block devices.</p>
<h3>Multi-device Btrfs at a glance</h3>
<p>Ok, you got it. YaST now supports multi-device Btrfs file system&#8230; but, what that exactly means? Well, as simple as it sounds, it&#8217;s possible to create a Btrfs file system over several disks, partitions or any other block devices. Pretty much like a software-defined RAID. In fact, you can use it to completely replace software RAIDs.</p>
<p>Let&#8217;s see an example. Imagine you have two disks, <code>/dev/sda</code> and <code>/dev/sdb</code>, and you also have some partitions on the first disk. You can create a Btrfs file system over some devices at the same time, e.g., over <code>/dev/sda2</code> and <code>/dev/sdb</code>, so you will have a configuration that looks like this.</p>
<pre>
        /dev/sda                /dev/sdb
            |                       |   
            |                       |   
     ---------------                |   
    |               |               |   
    |               |               |   
/dev/sda1       /dev/sda2           |   
                    |               |   
                    |               |   
                     ---------------
                            |   
                          Btrfs
                            |   
                            |   
                            @ (default subvolume)
                            |   
                            |   
                 -----------------------
                |       |       |       |   
                |       |       |       |   
              @/home  @/log   @/srv    ...
</pre>
<p>Once you have the file system over several devices, you can configure it to do data striping, mirroring, striping + mirroring, etc. Basically everything that RAID can do. In fact, you can configure how to treat the data and the Btrfs meta-data separately. For example, you could decide to do striping with your data (by setting the data RAID level to the <code>raid0</code> value) and to do mirroring with the Btrfs meta-data (setting it as <code>raid1</code> level). For both, data and meta-data, you can use the following levels: <code>single</code>, <code>dup</code>, <code>raid0</code>, <code>raid1</code>, <code>raid10</code>, <code>raid5</code> and <code>raid6</code>.</p>
<p>The combination of this feature and Btrfs subvolumes opens an almost endless world of possibilities. It basically allows you to manage your whole storage configuration from the file system itself. Usage of separate tools and layers like software-defined RAID or LVM are simply dispensable when using Btrfs in all its glory.</p>
<h3>Managing multi-device Btrfs with the YaST Partitioner</h3>
<p>Interesting feature indeed, but where to start? As usual, YaST brings you the answer! Let&#8217;s see how the YaST version that is currently being integrated in openSUSE Tumbleweed will ease the management of this cool Btrfs feature. SLE and Leap users will have to wait to the next release (15.2) to enjoy all the bells and whistles.</p>
<p>First of all, the Btrfs section of our beloved Expert Partitioner has been revamped as shown in the following picture.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-300x157.png" alt="New Btrfs section of the Partitioner" width="300" height="157" class="aligncenter size-medium wp-image-13818" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-768x401.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section.png 1036w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It lists all the Btrfs file systems, single- and multi-device ones. You can distinguish them at first sight by the format of the name. The table contains the most relevant information about the file systems, alongside buttons to add a new file system and to delete and modify the existing ones.</p>
<p>Existing Btrfs file system can be inspected and modified in several ways. The &#8220;Overview&#8221; tab includes details like the mount point, file system label, UUID, data and meta-data RAID levels, etc. The file system can be edited to modify some aspects like the mount options or the subvolumes.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/show.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/show-300x157.png" alt="Overview of a Btrfs file system" width="300" height="157" class="aligncenter size-medium wp-image-13822" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/show-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show-768x402.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show.png 1031w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In addition, the tab called &#8220;Used Devices&#8221; contains a detailed list of the block devices being used by the file system. That list can also be modified to add or remove devices. Note such operation can only be done when the file system does not exist on disk yet. Theoretically, Btrfs allows to add and remove devices from an already created file system, but a balancing operation would be needed after that. Such balancing operation could take quite a considerable amount of time. For that reason it has been avoided in the Expert Partitioner.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/used_devices.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-300x158.png" alt="Devices of a Btrfs file system" width="300" height="158" class="aligncenter size-medium wp-image-13823" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-300x158.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-768x404.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-1024x539.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices.png 1033w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, you can still format a single device as Btrfs in the traditional way (using the &#8220;edit&#8221; button for such device). But let&#8217;s see how the new button for adding a Btrfs file system opens new possibilities.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-300x157.png" alt="Adding a Btrfs file system" width="300" height="157" class="aligncenter size-medium wp-image-13820" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-768x401.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem.png 1036w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Similar to the RAID dialog, you have the available devices on the left and you can select the devices where you want to create the file system, and also you can indicate the data and meta-data RAID levels. Of course, the admissible RAID levels will depend on the number of selected devices. You will go to the second step of the Btrfs creation by clicking the &#8220;Next&#8221; button. In this second step, you can select the mount options and define the subvolumes, see the next image.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/options.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/options-300x203.png" alt="Options for a new Btrfs file system" width="300" height="203" class="aligncenter size-medium wp-image-13821" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/options-300x203.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/options.png 416w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And apart of all that, the Expert Partitioner has received several small improvements after including multi-device Btrfs file systems. Now that the multi-device Btrfs file systems are considered first class citizens, they are included in the general list of devices. Note the &#8220;Type&#8221; column has also been improved to show more useful information, not only for Btrfs but for all kind of devices.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/devices_list.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-300x157.png" alt="Revamped list of devices" width="300" height="157" class="aligncenter size-medium wp-image-13824" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-768x403.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-1024x537.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list.png 1034w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>What else works?</h3>
<p>But YaST goes far beyond the Partitioner. We have also ensured the storage proposal (i.e. the Guided Setup) can deal with existing multi-device Btrfs configurations when you are performing a new installation. Moreover, the upgrade process is also ready to work with your multi-device Btrfs file system.</p>
<p>Last but not least, AutoYaST can now also be used to specify that kind of Btrfs setups. The <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.htmlhttps://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html">official AutoYaST documentation</a> will include a specific section about advanced management of Btrfs file systems on top of several block devices. The content is being reviewed by the SUSE documentation team right now.</p>
<h3>What does not work (yet)?</h3>
<p>There is still one scenario that is not 100% covered. As described in <a href="https://bugzilla.suse.com/show_bug.cgi?id=1137997">bug#1137997</a>, is still not possible to use the &#8220;Import Mount Points&#8221; button in the Partitioner to recreate a multi-device Btrfs layout. But fear not, it&#8217;s in our list of things to fix in the short term!</p>
<h3>Get it while it&#8217;s hot</h3>
<p>Free Software development is a collaborative process and now we need YOU to do your part. Please test this new feature and report bugs if something does not work as you expected. And please, come with your ideas and further improvements and use cases. And, of course, don&#8217;t forget to have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
		</item>
	</channel>
</rss>
