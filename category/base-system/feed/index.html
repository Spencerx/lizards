<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Base System &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/base-system/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>

	<item>
		<title>Highlights of YaST Development Sprint 93</title>
		<link>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/</link>
		<comments>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/#comments</comments>
		<pubDate>Fri, 07 Feb 2020 16:31:11 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Hackweek]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14311</guid>
		<description><![CDATA[Lately, the YaST team has been quite busy fixing bugs and finishing some features for the upcoming (open)SUSE releases. Although we did quite some things, in this report we will have a closer look at just a few topics: A feature to search for packages across all SLE modules has arrived to YaST. Improved support [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Lately, the YaST team has been quite busy fixing bugs and finishing some features for the upcoming (open)SUSE releases. Although we did quite some things, in this report we will have a closer look at just a few topics:</p>
<ul>
<li>A feature to search for packages across all SLE modules has arrived to YaST.</li>
<li>Improved support for S390 systems in the network module.</li>
<li>YaST command-line interface now returns a proper exit-code.</li>
<li>Added progress feedback to the Expert Partitioner.</li>
<li>Partial support for Bitlocker and, as a lesson learned from that, a new warning about resizing empty partitions.</li>
</ul>
<h3 id="the-online-search-feature-comes-to-yast">The Online Search Feature Comes to YaST</h3>
<p>As you already know, starting in version 15, SUSE Linux follows a modular approach. Apart from the base products, the packages are spread through a set of different modules that the user can enable if needed (Basesystem module, Desktop Applications Module, Server Applications Module, Development Tools Module, you name it).</p>
<p>In this situation, you may want to install a package, but you do not know which module contains such a package. As YaST only knows the data of those packages included in your registered modules, you will have to do a manual search.</p>
<p>Fortunately, zypper introduced a new <code>search-packages</code> command some time ago that allows to find out where a given package is. And now it is time to bring this feature to YaST.</p>
<p>For technical reasons, this online search feature cannot be implemented within the package manager, so it is available via the <em>Extra</em> menu.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-300x207.png" alt="Search Online Menu Option" width="300" height="207" class="aligncenter size-medium wp-image-14315" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-768x531.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-1024x708.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option.png 1052w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>YaST offers a simple way to search for the package you want across all available modules and extensions, no matter whether they are registered or not. And, if you find the package you want, it will ask you about activating the needed module/extension right away so you can finally install the package.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-300x207.png" alt="Online Search: Enable Containers Module" width="300" height="207" class="aligncenter size-medium wp-image-14313" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-768x531.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-1024x708.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module.png 1050w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>If you want to see this feature in action, check out the <a href="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-install-php7.webm">demonstration video</a>. Like any other new YaST feature, we are looking forward to your feedback.</p>
<h3 id="fixing-and-improving-network-support-for-S390-systems">Fixing and Improving Network Support for S390 Systems</h3>
<p>We have mentioned a lot of times that we recently refactored the Network module, fixing some long-standing bugs and preparing the code for the future. However, as a result, we introduced a few new bugs too. One of those bugs was dropping, by accident, the network devices activation dialog for S390 systems. Thus, during this sprint, we re-introduced the dialog and, what is more, we did a few improvements as the old one was pretty tricky. Let&#8217;s have a look at them.</p>
<p>The first obvious change is that the overview shows only one line per each s390 group device, instead of using one row per each channel as the old did.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-300x239.png" alt="New YaST Network Overview for S390 Systems" width="300" height="239" class="aligncenter size-medium wp-image-14318" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-768x611.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview.png 927w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Moreover, the overview will be updated after the activation, displaying the Linux device that corresponds to the just activated device.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation-300x190.png" alt="YaST2 Network Overview After Activation" width="300" height="190" class="aligncenter size-medium wp-image-14321" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation-300x190.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation.png 723w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Last but not least, we have improved the error reporting too. Now, when the activation fails, YaST will give more details in order to help the user to solve the problem.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-300x239.png" alt="YaST2 Network Error Reporting in S390 Systems" width="300" height="239" class="aligncenter size-medium wp-image-14319" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-768x613.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting.png 926w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="fixing-the-cli">Fixing the CLI</h3>
<p>YaST command-line interface is a rather unknown feature, although it has been there since ever. Recently, we got some bug reports about its exit codes. We discovered that, due to a technical limitation of our internal API, it always returned a non-zero exit code on any command that was just reading values but not writing anything. Fortunately, we were able to fix the problem and, by the way, we improved the behavior in several situations where, although the exit code was non-zero, YaST did not give any feedback. Now that the CLI works again, it is maybe time to give it a try, especially if it is the first time you hear about it.</p>
<h3 id="yast2-partitioner-feedback">Adding Progress Feedback to the Partitioner</h3>
<p>The <em>Expert Partitioner</em> is a very powerful tool. It allows you to perform very complex configurations in your storage devices. At every time you can check the changes you have been doing in your devices by using the Installation Summary option on the left bar. All those changes will not be applied on the system until you confirm them by clicking the Next button. But once you confirm the changes, the Expert Partitioner simply closes without giving feedback about the progress of the changes being performed.</p>
<p>Actually, this is a kind of regression after migrating YaST to its new Storage Stack (a.k.a. storage-ng). The old Partitioner had a final step which did inform the user about the progress of the changes. That dialog has been brought back, allowing you to be aware of what is happening once you decide to apply the configuration. This progress dialog will be available in SLE 15 SP2, openSUSE 15.2 and, of course, openSUSE Tumbleweed.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-300x155.png" alt="YaST Partitioner Progress Feedback" width="300" height="155" class="aligncenter size-medium wp-image-14325" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-300x155.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-768x397.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback.png 957w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="bitlocker">Recognizing Bitlocker Partitions</h3>
<p><a href="https://en.wikipedia.org/wiki/BitLocker">Bitlocker</a> is a filesystem encrypting technology that comes included with Windows. Until the previous sprint, YaST was not able to recognize that a given partition was encrypted with such technology.</p>
<p>As a consequence, the automatic partitioning proposal of the (open)SUSE installer would happily delete any partition encrypted with Bitlocker to reclaim its space, even for users that had specified they wanted to keep Windows untouched. Moreover, YaST would allow users to resize such partitions using the Expert Partitioner without any warning (more about that below).</p>
<p>All that is fixed. Now Bitlocker partitions are correctly detected and displayed as such in the Partitioner, which will not allow users to resize them, explaining that such operation is not supported. And the installer&#8217;s Guided Setup will consider those partitions to be part of a Windows installation for all matters.</p>
<h3 id="beware-of-empty-partitions">Beware of Empty Partitions</h3>
<p>As explained before, whenever YaST is unable to recognize the content of a partition or a disk, it considers such device to be empty. Although that&#8217;s not longer the case for Bitlocker devices, there are many more technologies out there (and more to come). So users should not blindly trust that a partition displayed as empty in the YaST Partitioner can actually be resized safely.</p>
<p>In order to prevent data loss, in the future YaST will inform the user about a potential problem when trying to resize a partition that looks empty.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message-300x180.png" alt="YaST&quot; Expert Partitioning Warning when Resizing Empty Partitions" width="300" height="180" class="aligncenter size-medium wp-image-14329" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message-300x180.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message.png 355w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="hack-week-is-coming">Hack Week is coming&#8230;</h3>
<p>That special time of the year is already around the corner. Christmas? No, Hack Week! From February 10 to February 14 we will be celebrating the 19th Hack Week at SUSE. The theme of this edition is <em>Simplify, Modernize &amp; Accelerate</em>. If you are curious about the projects that we are considering, have a look at <a href="https://hackweek.suse.com/">SUSE Hack Week&#8217;s Page</a>. Bear in mind that the event is not limited to SUSE employees, so if you are interested in any project, do not hesitate to join us.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 90</title>
		<link>https://lizards.opensuse.org/2019/12/05/yast-sprint-90/</link>
		<comments>https://lizards.opensuse.org/2019/12/05/yast-sprint-90/#respond</comments>
		<pubDate>Thu, 05 Dec 2019 14:21:25 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14198</guid>
		<description><![CDATA[As usual, during this sprint we have been working on a wide range of topics. The release of the next (open)SUSE versions is approaching and we need to pay attention to important changes like the new installation media or the /usr/etc and /etc split. Although we have been working on more stuff, we would like [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>As usual, during this sprint we have been working on a wide range of topics. The release of the next (open)SUSE versions is approaching and we need to pay attention to important changes like the new installation media or the /usr/etc and /etc split.</p>
<p>Although we have been working on more stuff, we would like to highlight these topics:</p>
<ul>
<li>Support for the new SLE installation media.</li>
<li>Proper handling of shadow suite settings.</li>
<li>Mount points handling improvements.</li>
<li>Help others to keep the Live Installation working.</li>
<li>Proper configuration of console fonts.</li>
<li>Better calculation of minimum and maximum sizes while resizing ext2/3/4 filesystems.</li>
<li>Small fixes in the network module.</li>
</ul>
<h3 id="the-new-online-and-full-sle-installation-media">The New Online and Full SLE Installation Media</h3>
<p>The upcoming Service Pack 2 of SUSE Linux Enterprise products will be released on two media types: <em>Online</em> and <em>Full</em>.</p>
<p>On the one hand, the <em>Online</em> medium does not contain any repository at all. They will be added from a registration server (SCC/SMT/RMT) after registering the selected base product. The <em>Online</em> medium is very small and contains only the files needed for booting the system and running the installer. On the other hand, the <em>Full</em> medium includes several repositories containing base products and several add-ons, which can help to save some bandwidth.</p>
<p>Obviously, as the installer is the same for both media types, we need to adapt it to make it work properly in all scenarios. This is an interesting challenge because the code is located in many YaST packages and at different places. Keep also in mind that the same installer needs to also work with the openSUSE Leap 15.2 product. That makes another set of scenarios which we need to support (or at least not to break).</p>
<p>The basic support is already there and we are now fine-tuning the details and corner cases, improving the user experience and so on.</p>
<h3 id="proper-handling-of-shadow-suite-settings">Proper Handling of Shadow Suite Settings</h3>
<p>A few weeks ago, we anticipated that (open)SUSE would split system&#8217;s configuration between <a href="https://lizards.opensuse.org/2019/10/09/highlights-of-yast-development-sprint-86#splitting-configuration-files-between-etc-and-usretc">/usr/etc and /etc directories</a>. The former will contain vendor settings and the latter will define host-specific settings.</p>
<p>One of the first packages to be changed was <code>shadow</code>, which stores now its default configuration in <code>/usr/etc/login.defs</code>. The problem is that YaST was not adapted in time and it was still trying to read settings only from <code>/etc/login.defs</code></p>
<p>During this sprint, we took the opportunity to fix this behavior and, what is more, to define a strategy to adapt the handling of other files in the future. In this case, YaST will take into account the settings from <code>/usr/etc</code> directory and it will write its changes to a dedicated <code>/etc/login.defs.d/70-yast.conf</code> file.</p>
<h3 id="missing-console-font-settings">Missing Console Font Settings</h3>
<p>The YaST team got a nice present this year (long before Christmas) thanks to <a href="https://github.com/jyeray">Joaquín</a>, who made an awesome <a href="https://github.com/yast/yast-country/pulls?q=is%3Apr+is%3Aclosed+author%3Ajyeray">contribution</a> to the YaST project by refactoring the keyboard management module. Thanks a lot, Joaquín!</p>
<p>We owe all of you a blog entry explaining the details but, for the time being, let&#8217;s say that now the module plays nicely with systemd.</p>
<p>After merging those changes, our QA team detected that the console font settings were not being applied correctly. Did you ever think about the importance of having the right font in the console? The problem was that the <a href="https://github.com/yast/yast.github.io/blob/master/doc/architecture.md#system-configuration-repository-scr">SCR agent</a> responsible for writing the <a href="https://www.freedesktop.org/software/systemd/man/vconsole.conf.html">configuration file for the virtual consoles</a> was removed. Fortunately, bringing back the deleted agent was enough to fix the problem, so your console will work fine again.</p>
<h3 id="helping-the-live-installation-to-survive">Helping the Live Installation to Survive</h3>
<p>Years ago, the YaST Team stopped supporting installation from the openSUSE live versions due to maintainability reasons. That has not stopped others from trying to keep the possibility open. Instead of fixing the old <code>LiveInstallation</code> mode of the installer, they have been adapting the live versions of openSUSE to include the regular installer and to be able to work with it.</p>
<p>Sometimes that reveals hidden bugs in the installer that nobody had noticed because they do not really affect the supported standard installation procedures. In this case, YaST was not always marking for installation in the target system all the packages needed by the storage stack. For example, the user could have decided to use Btrfs and still the installer would not automatically select to install the corresponding <code>btrfsprogs</code> package.</p>
<p>It happened because YaST was checking which packages were already installed and skipping them. That check makes sense when YaST is running in an already installed system and is harmless when performed in the standard installation media. But it was tricky in the live media. Now the check is skipped where it does not make sense and the live installation works reasonably well again.</p>
<h3 id="a-more-robust-yast-bootloader">A More Robust YaST Bootloader</h3>
<p>In order to perform any operation, the bootloader module of YaST first needs to inspect the disk layout of the system to determine which devices allocate the more relevant mount points like <code>/boot</code> or the root filesystem. The usage of Btrfs, with all its exclusive features like subvolumes and snapshots, has expanded the possibilities about how a Linux system can look in that regard. Sometimes, that meant YaST Bootloader was not able to clearly identify the root file system and it just crashed.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/missing-root-mount-point-error.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/missing-root-mount-point-error-300x222.png" alt="&quot;Missing &#039;/&#039; mount point&quot; error" width="300" height="222" class="aligncenter size-medium wp-image-14204" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/missing-root-mount-point-error-300x222.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/missing-root-mount-point-error.png 677w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Fortunately, those scenarios are reduced now to the very minimum thanks to all the adaptations and fixes introduced during this sprint regarding <a href="#improving-detection-of-mount-points">mount points detection</a>. But there is still a possibility in extreme cases like unfinished rollback procedures or very unusual subvolumes organization.</p>
<p>So, in addition to the mentioned improvements in <code>yast2-storage-ng</code>, we have also instructed <code>yast2-bootloader</code> to better deal with those unusual Btrfs scenarios, so it will find its way to the root file system, even if it’s tricky. That means the “missing ‘/’ mount point” errors should be gone for good.</p>
<p>But in case we overlooked something and there is still an open door to reach the same situation again in the future, we also have improved YaST to display an explanation and quit instead of crashing. Although we have done our best to ensure this blog entry will be the only chance for our users to see this new error pop-up.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/bootloader-root-file-system-not-found.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/bootloader-root-file-system-not-found-300x223.png" alt="YaST2 Bootloader: root file sytem not found" width="300" height="223" class="aligncenter size-medium wp-image-14206" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/bootloader-root-file-system-not-found-300x223.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/bootloader-root-file-system-not-found.png 677w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="improving-detection-of-mount-points">Improving the Detection of Mount Points</h3>
<p>As mentioned above, improving the detection of mount points helped to prevent some problems that were affecting <code>yast2-bootloader</code>. However, that is not the only module that benefits from such changes.</p>
<p>When you run some clients like the <em>Expert Partitioner</em>, they automatically use the <em>libstorage-ng</em> library to discover all your storage devices. During that phase, <em>libstorage-ng</em> tries to find the mount points for all the file systems by inspecting <code>/etc/fstab</code> and <code>/proc/mounts</code> files. Normally, a file system is mounted only once, either at boot time or manually by the user. For the first case, both files <code>/etc/fstab</code> and <code>/proc/mounts</code> would contain an entry for the file system, for example:</p>
<pre><code>$ cat /etc/fstab
/dev/sda1  /  ext4  defaults  0  0

$ cat /proc/mounts
/dev/sda1 / ext4 rw,relatime 0 0
</code></pre>
<p>In the example above, <em>libstorage-ng</em> associates the <code>/</code> mount point to the file system which is placed on the partition <code>/dev/sda1</code>. But, what happens when the user bind-mounts a directory? In such a situation, <code>/proc/mounts</code> would contain two entries for the same device:</p>
<pre><code>$ mound /tmp/foo /mnt -o bind
$ cat /proc/mounts
/dev/sda1 / ext4 rw,relatime 0 0
/dev/sda1 /mnt ext4 rw,relatime 0 0
</code></pre>
<p>In the <em>Expert Partitioner</em>, that file system will appear as mounted at <code>/mnt</code> instead of <code>/</code>. So it will look like if your system did not have the root file system after all!</p>
<p>This issue was solved by improving the heuristic for associating mount points to the devices. Now, the <code>/etc/fstab</code> mount point is assigned to the device if that mount point also appears in the <code>/proc/mounts</code> file. That means, if a device is included in the <code>/etc/fstab</code> and the device is still mounted at that location, the <code>/etc/fstab</code> mount point takes precedence.</p>
<p>As a bonus, and also related to mount points handling, now the <em>Expert Partitioner</em> is able to detect the situation where, after performing a snapshot-based rollback, the system has not been rebooted. As a result, it will display a nice and informative message to the user.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/not-rebooted-after-rollback.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/not-rebooted-after-rollback-300x225.png" alt="System not rebooted after snapshot rollback" width="300" height="225" class="aligncenter size-medium wp-image-14214" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/not-rebooted-after-rollback-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/not-rebooted-after-rollback-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/not-rebooted-after-rollback.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="improved-calculation-of-minimum-and-maximum-sizes-for-ext234g">Improved Calculation of Minimum and Maximum Sizes for ext2/3/4</h3>
<p>If you want to resize a filesystem using YaST, it needs to find out the minimum and maximum sizes for the given filesystem. Until now, the estimation for ext2/3/4 was based on the <code>statvfs</code> system call and it <a href="https://bugzilla.suse.com/show_bug.cgi?id=1149148">did not work well at all</a>.</p>
<p>Recently, we have improved YaST to use the value reported by <code>resize2fs</code> as the minimum size which is more precise. Additionally, YaST checks now the block size and whether the 64bit feature is on to calculate the maximum size.</p>
<h3 id="polishing-the-network-module">Polishing the Network Module</h3>
<p>As part of our recent network module refactorization, we have improved the workflow of wireless devices configuration, among other UI changes. Usually, these changes are controversial and, as a consequence, we received a few bug reports about some missing steps that are actually not needed anymore. However, checking those bugs allowed us to find some small UI glitches, like a problem with the <em>Authentication Mode</em> widget.</p>
<p>Moreover, we have used this sprint to drop the support for some deprecated device types, like Token Ring or FDDI. Below you can see how bad the device type selection looks now. But fear not! We are aware and we will give it some love during the next sprint.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection-300x173.png" alt="Network Device Type Selection" width="300" height="173" class="aligncenter size-medium wp-image-14216" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection-300x173.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection-768x442.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection-1024x590.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/12/network-device-type-selection.png 1344w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="conclusions">Conclusions</h3>
<p>The last sprint of the year is already in progress. This time, we are still polishing our storage and network stacks, improving the migration procedure, and fixing several miscelaneous issues. We will give you all the details in two weeks through our next sprint report. Until then, have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/12/05/yast-sprint-90/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 83</title>
		<link>https://lizards.opensuse.org/2019/08/30/yast-sprint-83/</link>
		<comments>https://lizards.opensuse.org/2019/08/30/yast-sprint-83/#comments</comments>
		<pubDate>Fri, 30 Aug 2019 13:34:22 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14003</guid>
		<description><![CDATA[The summer is almost gone but, looking back, it has been pretty productive from the YaST perspective. We have fixed a lot of bugs, introduced quite interesting features to the storage layer and the network module refactoring continues to progress (more or less) as planned. So it is time for another sprint report. During the [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The summer is almost gone but, looking back, it has been pretty productive from the YaST perspective. We have fixed a lot of bugs, introduced quite interesting features to the storage layer and the network module refactoring continues to progress (more or less) as planned.</p>
<p>So it is time for another sprint report. During the last two weeks, we have been basically busy squashing bugs and trying to get the network module as feature-complete as possible. But, after all, we have had also some time to improve our infrastructure and organize for the future.</p>
<h3 id="yast2-network-refactoring-status">YaST2 Network Refactoring Status</h3>
<p>Although we have been working hard, we have not said a word about the yast2-network refactoring progress <a href="https://lizards.opensuse.org/2019/07/19/yast-sprint-80/#shipping-another-round-of-network-refactored-code">since the end of July</a>, when we merged part of the changes into yast2-network 4.2.9 and pushed it to Tumbleweed. That version included quite a lot of internal changes related to the user interface and a few bits of the new data model, especially regarding routing and DNS handling.</p>
<p>However, things have changed a lot since then, so we would like you to give you an overview of the current situation. Probably, the most remarkable achievement is that the development version is able to read and write the configuration using the new data model. OK, it is not perfect and does not cover all the use cases, but we are heading in the right direction.</p>
<p>In the screencast below you can see it in action, reading and writing the configuration of an interface. The demo includes handling aliases too, which is done way better than the currently released versions.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/08/yast2-network-new-data-model-in-action.gif"><img src="//lizards.opensuse.org/wp-content/uploads/2019/08/yast2-network-new-data-model-in-action-300x225.gif" alt="YaST2 Network New Data Model in Action" width="300" height="225" class="aligncenter size-medium wp-image-14007" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/08/yast2-network-new-data-model-in-action-300x225.gif 300w, https://lizards.opensuse.org/wp-content/uploads/2019/08/yast2-network-new-data-model-in-action-768x577.gif 768w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Moreover, we had brought back support for many types of devices (VLAN, InfiniBand, qeth, TAP, TUN, etc.), improved the WiFi set-up workflow and reimplemented the support for renaming devices.</p>
<p>Now, during the current sprint, we are focused on taking this new implementation to a usable state so we can release the current work as soon as possible and get some feedback from you.</p>
<p>Finally, if you like numbers, we can give you a few. Since our last update, we have merged <a href="https://github.com/search?q=repo%3Ayast%2Fyast-network+created%3A%3E2019-07-19+state%3Aclosed+type%3Apr&amp;type=Issues">34 pull requests</a> and have increased the unit test coverage from 44% in openSUSE Leap 15.0/SUSE Linux Enterprise SP1 to around 64%. The new version is composed of 31.702 (physical) lines of code scattered through 231 files (around 137 lines per file) vs 22.542 in 70 files of the old one (more than 300 lines per file). And these numbers will get better as we continue to replace the old code <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<h3 id="missing-packages-in-leap">Missing Packages in Leap</h3>
<p>It turned out that some YaST packages were not updated in Leap 15.1. The problem is that, normally, the YaST packages are submitted to the SLE15 product and they are automatically mirrored to the Leap 15 distribution via the build service bots. So we do not need to specially handle the package updates for Leap.</p>
<p>However, there are few packages which are not included in the SUSE Linux Enteprise product line, but are included in openSUSE Leap. Obviously these packages cannot be updated automatically from SUSE Linux Enterprise because they are not present there. In this case Leap contained the old package versions from the initial 15.0 release.</p>
<p>In order to fix this issue, we manually submitted the latest packages to the Leap 15.2 distribution. To avoid this problem in the future we asked the Leap maintainers to add the Leap specific packages to a check list so they are verified before the next release. Of course, if you see any outdated YaST package in Leap you can still open a <a href="https://en.opensuse.org/openSUSE:Report_a_YaST_bug">bug report</a>. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Just for reference, the affected packages are: <code>yast2-alternatives</code>, <code>yast2-slp-server</code>, <code>yast2-docker</code> and <code>skelcd-control-openSUSE</code> (the content is only present on the installation medium, it&#8217;s not released as an RPM).</p>
<h3 id="lets-use-all-disks">Let&#8217;s use all disks!</h3>
<p>As you may remember, three sprints ago we added some extra configuration options to make the storage guided proposal able to deal with the SUSE Manager approach. We even wrote a <a href="https://lizards.opensuse.org/2019/07/16/suse-manager-guided-setup/">dedicated blog post about it</a>!</p>
<p>Despite offering the new options in the Guided Setup, we tried to keep the default initial behavior of the installer consistent with other (open)SUSE products. So the installer initially tried to install the whole system in a single disk, unless that was impossible or it was told by the user to expand on several disks.</p>
<p>But the SUSE Manager folks found that to be contrary to the new ideas introduced in their Guided Setup. According to their feedback, in this case remaining consistent with other (open)SUSE product was not reducing the confusion, but rather increasing it. SUSE Manager should try from the very beginning to expand the product as much as possible among all available disks.</p>
<p>For that reason, during this sprint we introduced the first <a href="https://github.com/yast/yast-storage-ng/pull/953">improvement</a> (a.k.a. another configuration option), so now it is possible to tell whether the initial proposal should try to use multiple disks as first try.</p>
<h3 id="bootloader-and-small-mbr-gaps">Bootloader and Small MBR Gaps</h3>
<p>We received a <a href="https://bugzilla.suse.com/show_bug.cgi?id=1142229">bug report</a> because a system was not able to boot after installation. In this case, the user decided to use Btrfs and placed the root file system in a logical partition. In theory, this scenario should work but, unfortunately, the MBR gap was too small to embed the Grub2 bootloader code.</p>
<p>At first sight, this problem could be solved by asking YaST to install the bootloader into the logical partition and the generic boot code in the MBR. But this will only work if you set the logical partition as the active one. Sadly, some BIOSes could insist on having a primary partition as the active one.</p>
<p>But don&#8217;t worry, we have good news. Grub2 maintainers took care of <a href="https://bugzilla.suse.com/show_bug.cgi?id=841247">this problem</a>. In case the MBR gap is too small, Grub2 will automatically fall-back to the Btrfs partition. That&#8217;s all. And what does it mean for YaST? Well, thanks to this fix, YaST will simply work out of the box and your system will be bootable again. But not so fast! You still have to wait a little bit more to have these Grub2 improvements available in a Tumbleweed installer.</p>
<h3 id="handling-empty-comment-lines-in-ntp-configuration">Handling Empty Comment Lines in NTP Configuration</h3>
<p>AutoYaST supports defining an specific NTP configuration to be applied during the installation and it relies in <a href="http://augeas.net/">Augeas</a> to read/write the <code>ntp.conf</code> file. But it seems that Augeas has some problems when it tries to write comments with empty lines, as you can see in <a href="https://bugzilla.suse.com/show_bug.cgi?id=1142026">bug 1142026</a>. The solution was to adapt YaST to filter out empty comment lines before saving the configuration file, working around the Augeas problem.</p>
<h3 id="error-resizing-some-partitions">Error Resizing Some Partitions</h3>
<p>Typically, an MS-DOS partition table reserves its first MiB for the MBR gap, so the partitions normally start after that point. But it is possible, especially in partitions for old Windows systems, that it starts before that first MiB. In that case, if we try to resize that partition (e.g., by using the Expert Partitioner), <a href="https://bugzilla.suse.com/show_bug.cgi?id=1146686">YaST crashes</a> due to an error when calculating the resize information. Fortunately, this problem is gone now, and you will be able to resize this kind of partitions as well.</p>
<h3 id="side-effects-of-keyboard-layouts-unification">Side Effects of Keyboard Layouts Unification</h3>
<p>During the <a href="https://lizards.opensuse.org/2019/07/29/highlights-of-yast-development-sprint-81/">sprint 81</a>, the openSUSE and SUSE Linux Enterprise <em>console</em> keyboard layouts were unified after some minor changes. One of those changes was to stop using the, in appearance, useless keymaps symlinks for Arabic and Cambodian. But they were there for a reason: are being used by YaST to correctly adapt the keyboard in the X11 environment. Just visit the <a href="https://github.com/yast/yast-country/pull/224">pull request</a> if you <del>prefer to scare yourself</del> want to dive in more technical details.</p>
<p>Fortunately for the users of those keyboards, we realized about this problem before the upcoming SLE-15-SP2 was released <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> And, it&#8217;s fixed.</p>
<h3 id="house-keeping-tasks">House Keeping Tasks</h2>
<p>As part of our development duties for this sprint, we invested quite some time in reviewing and updating our continuous integration (CI) set up. Apart from using Travis CI for pull requests, we rely on <a href="https://ci.opensuse.org">Jenkins</a> to run the tests and submit the code to the appropriate projects in the <a href="https:/build.opensuse.org/">Open Build Service instances</a>.</p>
<p>Then, when the development of a new version starts or when the product is about to be released, we need to adjust the configuration. Just in case you are wondering, we do not do this work by hand anymore and we use <a href="https://saltstack.org/">Salt</a> and <a href="https://docs.openstack.org/infra/jenkins-job-builder/">Jenkins Job Builder</a> to handle this configuration.</p>
<h3 id="closing-thoughts">Closing Thoughts</h3>
<p>During the next sprint (actually, the current one) we are working in three different areas, apart from squashing bugs: improving encryption support in the storage layer, adding some features to the installer (repo-less installer, support for reading product licenses from a tarball, etc.) and, of course, refactoring the network code. Obviously, we will give you all sort of details in our next sprint report.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/08/30/yast-sprint-83/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 80</title>
		<link>https://lizards.opensuse.org/2019/07/19/yast-sprint-80/</link>
		<comments>https://lizards.opensuse.org/2019/07/19/yast-sprint-80/#respond</comments>
		<pubDate>Fri, 19 Jul 2019 11:35:29 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Architectures]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13914</guid>
		<description><![CDATA[After our (really long) sprint report, which featured information from 3 different sprints together, we are back to our regular schedule of publishing a blog post after each sprint. In a nutshell, these are the highlights from the previous one: A new version of yast2-network will be submitted to Tumbleweed shortly, including quite some internal [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>After our (really long) <a href="https://lizards.opensuse.org/2019/06/25/yast-sprints-77-79/">sprint report</a>, which featured information from 3 different sprints together, we are back to our regular schedule of publishing a blog post after each sprint.</p>
<p>In a nutshell, these are the highlights from the previous one:</p>
<ul>
<li>A new version of yast2-network will be submitted to Tumbleweed shortly, including quite some internal changes as part of the refactoring effort.</li>
<li>The support for offline installation of SUSE Linux Enterprise products has been improved to handle modules and extensions dependencies automatically, among other goodies.</li>
<li>The partitioning proposal has been adapted to support SUSE Manager special needs.</li>
<li>The guided partitioning ignores now the <code>adjust_by_ram</code> parameter in IBM z Systems, where it is basically useless.</li>
<li>Some (open)SUSE 15 features have been backported to 5th Service Pack of SUSE Linux Enterprise.</li>
</ul>
<p>And last but not least, we have some words to say about the feedback we get from you (that we really appreciate!) and the future of YaST.</p>
<h3 id="shipping-another-round-of-network-refactored-code">Shipping Another Round of Network Refactored Code</h3>
<p>One of the problems we wanted to avoid while refactoring yast2-network is diverging too much from the version shipped in Tumbleweed. As we mentioned in our last report, we have done quite some work, especially when it comes to the internals of the user interface, and codebases are starting to look quite different.</p>
<p>For that reason, we decided to merge the new code into the master branch so it can be included in Tumbleweed shortly. We are talking about a pull request which contains more than 340 commits, adds 9000 lines, removes 5000 and modifies 197 files. So, what could possibly go wrong? To be honest we did quite some testing but there is a chance that you can find some issues. In that case, please, open a bug report and we will happily fix it.</p>
<p>About the technical details, we put most of our efforts into drawing a clear line between the user interface and the business logic. In parallel, we are still working on the new data model which enables us to read/write the network configuration using different backends, although at this time we are only supporting <code>sysconfig</code>. We have made some progress during this sprint (you can check the <a href="https://github.com/yast/yast-network/pull/875">pull request</a> if you are interested), but we will not merge this code into our master branch yet. You can find more details in the <a href="https://github.com/yast/yast-network/blob/ea1faacb9ef08ec83d53471cc0220df8245ae9c0/doc/network-ng.md">updated documentation</a>.</p>
<p>After reading this status update about the yast2-network refactoring, you might be wondering about our plans. Basically, we would like to finish the support to read/write network interfaces configuration and start using it through all the code, killing some rather old and buggy modules like <a href="https://github.com/yast/yast-network/blob/568aadcd71671bd24715f36396968d7cbbc89277/src/modules/LanItems.rb">LanItems</a>.</p>
<h3 id="offline-media-support">Offline Media Support</h3>
<p>For SUSE Linux Enterprise 15 products, there are two installation media:</p>
<ul>
<li>The installer media, which contains only basic packages for a minimal system.</li>
<li>The so-called Packages DVD, which contains several modules and extensions, like the <em>Development Tools Module</em> or the <em>Server Application Module</em>.</li>
</ul>
<p>The main use case of the Packages DVD is allowing to install the systems without an Internet connection. However, YaST support for such a scenario is pretty simplistic. For instance, dependencies between modules are not evaluated and the user has to select them manually. This approach is error-prone and user-unfriendly.</p>
<p>Fortunately, these shortcomings will be addressed in SLE 15 SP2. YaST is now able to solve modules and extensions dependencies, so the user does not have to worry about them anymore. For instance, if you select the <em>Web and Scripting Module</em>, the <em>Basesystem Module</em> and <em>Server Application Module</em> will be automatically selected.</p>
<p>At first, solving dependencies through the 25 repositories which are included in the Packages DVD might be time-consuming, but the current implementation takes advantage of <a href="https://github.com/openSUSE/libsolv">libsolv</a> to reduce it to about 2 seconds in our testing machine.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/extensions-and-modules-selection.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/extensions-and-modules-selection-300x225.png" alt="Improved Extensions and Modules Selection" width="300" height="225" class="aligncenter size-medium wp-image-13917" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/extensions-and-modules-selection-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/extensions-and-modules-selection-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/extensions-and-modules-selection.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a> </p>
<p>Additionally, other improvements have been included, like displaying additional information about each module/extension or filtering out base products from the list.</p>
<h3 id="suse-manager-and-the-partitioning-guided-setup">SUSE Manager and the Partitioning Guided Setup</h3>
<p>As you know, YaST is a very flexible Linux installer. The creators of each (open)SUSE product or role can define the particular sequence of steps presented to the user and configure many of the options on each of those step. But that was still not enough for the maintainers of <a href="https://www.suse.com/products/suse-manager/">SUSE Manager</a>, the purpose-specific distribution to manage software-defined infrastructures.</p>
<p>SUSE Manager follows a pretty specific approach regarding the management of the storage devices. So we had to add some extra configuration options to our partitioning guided proposal to fulfill their needs. We felt the topic deserved its own separate blog post. So follow the link and enjoy the love story of <a href="https://lizards.opensuse.org/2019/07/16/suse-manager-guided-setup/">SUSE Manager and the Partitioning Guided Setup</a>.</p>
<h3 id="taking-care-of-ibm-z-systems">Taking care of IBM z Systems</h3>
<p>For many reasons, IBM z System architecture (s390) is one of those special cases where YaST flexibility is crucial. One of the many options that YaST offers to products and roles creators is called <code>adjust_by_ram</code>, which instructs YaST to make sure that a given volume size is, at least, as big as the RAM of the system. Obviously, this option is especially useful for the swap volume when we want to be able to suspend the system to disk.</p>
<p>However, on the 64-bits s390 architecture, resuming from a swap device is not supported, which renders this option useless. For that reason, YaST will take this situation into account, and it will not enlarge the swap volume bye default for s390 machines, even if <code>adjust_by_ram</code> was set in the control file. Of course, the user will be able to enlarge the volume by activating the corresponding checkbox in the Guided Setup options.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/guided-partitioning-filesystem-options.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/guided-partitioning-filesystem-options-300x225.png" alt="Guided Partitioning Filesystem Options" width="300" height="225" class="aligncenter size-medium wp-image-13924" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/guided-partitioning-filesystem-options-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/guided-partitioning-filesystem-options-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/guided-partitioning-filesystem-options.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="backporting-stuff">Backporting Stuff to SLE 12 SP5</h3>
<p>Although most of the development effort is focused on SLE 15 SP2 and openSUSE Leap 15.2, we do not forget about SLE 12. SUSE is working on the 5th Service Pack of this release and the YaST team is no exception.</p>
<p>During this sprint, SLE 12 got two interesting features that were backported from SLE 15. The first one is the ability to specify kernel mitigations settings, as you already can do in Tumbleweed. And the second one is the support for PMEM devices, that you can see in the screenshot below.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1-300x173.png" alt="YaST2 Partitioner PMEM Support" width="300" height="173" class="aligncenter size-medium wp-image-13942" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1-300x173.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1-768x443.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1-1024x591.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/07/yast2-partitioner-pmem-support-1.png 1138w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Recently, there was an interesting <a href="https://www.reddit.com/r/openSUSE/comments/cbp2c7/">discussion about the openSUSE installer on Reddit</a>, continued as a <a href="https://lists.opensuse.org/yast-devel/2019-07/msg00021.html">thread on our yast-devel mailing list</a>.</p>
<p>This is just a quick heads-up to confirm that we hear you. Some of the issues discussed there were already known to be sore points, some others may need more clarification on why and how things are as they are.</p>
<p>We are taking your feedback and criticism seriously. But we also have to consider all the requirements, and we try to avoid making unrealistic promises. So please bear with us until we had some further discussions first about what we can do and in what time frame.</p>
<h3 id="conclusions">Conclusions</h3>
<p>In addition to what we have described in this report, we have been working on fixing bugs and making other small improvements here and there. And sprint 81th will not be different: part of the team will keep working on yast2-network while the rest squashes as many bugs as possible.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/07/19/yast-sprint-80/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>experimental openSUSE mirror via IPFS</title>
		<link>https://lizards.opensuse.org/2019/04/03/experimental-opensuse-mirror-via-ipfs/</link>
		<comments>https://lizards.opensuse.org/2019/04/03/experimental-opensuse-mirror-via-ipfs/#comments</comments>
		<pubDate>Wed, 03 Apr 2019 13:41:39 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Infrastructure]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[Toolchain]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13716</guid>
		<description><![CDATA[The InterPlanetary File System (IPFS) can be used to provide files in a more efficient and distributed way than HTTP. Our filesystem repo already has the go-ipfs client. You use it with ipfs daemon --init And then you can add my Tumbleweed mirror with zypper ar http://127.0.0.1:8080/ipns/opensuse.zq1.de./tumbleweed/repo/oss/ ipfs-oss You can also browse the content online [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The <a href="https://en.wikipedia.org/wiki/InterPlanetary_File_System">InterPlanetary File System</a> (IPFS) can be used to provide files in a more efficient and distributed way than HTTP.</p>
<p>Our <a href="https://software.opensuse.org/package/go-ipfs">filesystem repo</a> already has the go-ipfs client.</p>
<p>You use it with<br />
<code>ipfs daemon --init</code></p>
<p>And then you can add my Tumbleweed mirror with<br />
<code>zypper ar http://127.0.0.1:8080/ipns/opensuse.zq1.de./tumbleweed/repo/oss/ ipfs-oss</code></p>
<p>You can also browse the content online at<br />
<a href="http://opensuse.zq1.de./tumbleweed/repo/oss/">http://opensuse.zq1.de./tumbleweed/repo/oss/</a> . During my testing I found that the results are sometimes inappropriately cached on the Cloudflare CDN, so if you used it under this URL without the ipfs client, this might throw signature errors in zypper.</p>
<p>On the server side, the mirror is updated using the <code>syncopensuse</code> script from<br />
<a href="https://github.com/bmwiedemann/opensusearchive">https://github.com/bmwiedemann/opensusearchive</a> and consistency of the repo is verified with <code>checkrepo</code></p>
<p>When a complete repo was synced, <a href="https://github.com/bmwiedemann/dynaname">dynaname</a> updates a DNS entry to point to the new head:</p>
<blockquote><p>
&gt; host -t txt _dnslink.opensuse.zq1.de.<br />
_dnslink.opensuse.zq1.de is an alias for tumbleweedipfs.d.zq1.de.<br />
tumbleweedipfs.d.zq1.de descriptive text &#8220;Last update: 2019-04-03 12:23:43 UTC&#8221;<br />
tumbleweedipfs.d.zq1.de descriptive text &#8220;dnslink=/ipfs/QmSXEVuU5z23rDxMyFYDhSAUaGRUPswuSXD3aVsBEzucjE&#8221;</p></blockquote>
<p>If you got spare bandwidth and 300 GB disk on some public server, you could also host a mirror of today&#8217;s version, simply by doing <code>ipfs pin add QmSXEVuU5z23rDxMyFYDhSAUaGRUPswuSXD3aVsBEzucjE</code></p>
<p>This is a permalink: <a href="http://127.0.0.1:8080/ipfs/QmSXEVuU5z23rDxMyFYDhSAUaGRUPswuSXD3aVsBEzucjE">http://127.0.0.1:8080/ipfs/QmSXEVuU5z23rDxMyFYDhSAUaGRUPswuSXD3aVsBEzucjE</a> also browsable via <a href="https://cloudflare-ipfs.com/ipfs/QmSXEVuU5z23rDxMyFYDhSAUaGRUPswuSXD3aVsBEzucjE">any public IPFS gateway</a>. This means, it will always remain on the 20190401 version of Tumbleweed and no changes in content are possible &#8211; similar to how a git commit ID always refers to the same data.</p>
<p>So why did I create this IPFS mirror? That is related to my work on <a href="https://en.opensuse.org/openSUSE:Reproducible_Builds">reproducible builds for openSUSE</a>. There it regularly happened that published Tumbleweed binaries were built with libraries, compilers and toolchains that were no longer available in current Tumbleweed. This prevented me from verifying that the published binaries were indeed built correctly without manipulation on the OBS build workers.</p>
<p>Now, with this archive of rpms easily available, it was possible to verify many more Tumbleweed packages than before. And most importantly, it remains possible to independently verify even after Tumbleweed moves on to newer versions. This data is going to stay available as long as anyone pins it on a reachable server. I&#8217;m going to pin it as long as it remains relevant to me, so probably a bit until after the next full Tumbleweed rebuild &#8211; maybe 6 to 12 months.</p>
<p>Thus, it now is even less easy to sneak in binary backdoors during our package build process.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/04/03/experimental-opensuse-mirror-via-ipfs/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 69 &#038; 70</title>
		<link>https://lizards.opensuse.org/2019/01/31/highlights-of-yast-development-sprint-6970/</link>
		<comments>https://lizards.opensuse.org/2019/01/31/highlights-of-yast-development-sprint-6970/#comments</comments>
		<pubDate>Thu, 31 Jan 2019 14:31:02 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Usability]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13553</guid>
		<description><![CDATA[Almost two months has passed since our last sprint report but, except during the Christmas break, the team has been quite busy working on some features and bugfixes for the upcoming (open)SUSE releases. But a post describing all that we have done would be quite long :), so let&#8217;s try to highlight a few of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Almost two months has passed since our <a href="https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/">last sprint report</a> but, except during the Christmas break, the team has been quite busy working on some features and bugfixes for the upcoming (open)SUSE releases.</p>
<p>But a post describing all that we have done would be quite long :), so let&#8217;s try to highlight a few of them.</p>
<ul>
<li>YaST got a security audit and, although no real security problems were found, we were asked to introduce some improvements.</li>
<li>Now it is possible to run the installer through PXE Boot without any local repository. Pretty specific but cool stuff!</li>
<li>We are in the process of revamping SUSE Manager Salt Formulas support in the YaST2 Configuration Management module. Do not be fooled by the name, it is not limited to SUSE Manager.</li>
<li>YaST icons are now included in the package were they are used. We hope it will make things easier for icon designers.</li>
<li>The Firewall module got support for creating <a href="https://firewalld.org/">firewalld</a> custom zones.</li>
<li>Performance when reading huge <tt>/etc/hosts</tt> files has been greatly improved.</li>
<li>CD/DVD sources are always disabled after installation.</li>
</ul>
<h2 id="yast-security-hardening">YaST Security Hardening</h2>
<p>Our SUSE security team did a security audit for YaST. The good news is that there were no real security problems that you should be concerned about. Still, we did some hardening to make the code even more secure.</p>
<p>This might have caused some breakages in Factory / Tumbleweed because many places in the code were touched. We apologize for any inconveniences that might have caused; but we are sure you prefer YaST to be more secure.</p>
<p>Most changes were centered around calling external commands, which YaST does a lot. Since YaST is running with root permissions in most cases, we want to make sure that this is as secure as possible. If you find any problems with it, please write bug reports.</p>
<p>What exactly we did and how we did it is summarized here: <a href="https://github.com/yast/yast.github.io/issues/172">YaST Security Audit Fixes: Lessons Learned and Reminder</a></p>
<h2 id="installing-via-pxe-boot-without-any-installation-repository">Installing via PXE Boot without any Installation Repository</h2>
<p>In data centers and other big-scale enterprise environments, administrators rarely install new software via removable media such as DVDs. Instead, administrators rely on <a href="https://en.wikipedia.org/wiki/Preboot_Execution_Environment">PXE (Preboot eXecution Environment)</a> booting to image servers.</p>
<p>Installing Linux Enterprise in such environments typically requires two auxiliary servers in the local network:</p>
<ul>
<li>The DHCP/TFTP server providing the minimal system used by PXE to execute the installer.</li>
<li>A server making the SLE DVD repository accessible in the local network via FTP, HTTP or any similar protocol.</li>
</ul>
<p>Very often, the second one is more a requisite imposed by the installer than something really useful. In most cases, the system been installed will be registered in the <a href="https://scc.suse.com">SUSE Customer Center</a> (or any of its proxy technologies like SMT or RMT) and will get all the software from there. Thus, we decided to save the administrators the extra steps of downloading the SLE ISO image and setting up an install server to serve the content of that ISO, for cases in which that was really not needed.</p>
<p>But the repositories are not only used to get the software been installed in the final system. As explained often in this blog, we have a single installer for all the products and flavors of SUSE and openSUSE, as different as the installation process looks for all of them. That generic installer uses the information in the installation repository to get its own configuration. That includes the available products (and its corresponding system roles), the steps and options to present to the user, the desired partitioning setup and many other aspects. Without that information, the installer is basically a musician without his score.</p>
<p>Starting with SLE-15-SP1, it will be possible to use the boot parameter <code>NOREPO=1</code> to tell the installer to not expect (and more important, to not require) any local repository in the DVD or in the local network. In that case, the installer will be able to proceed up to the registration screen and get the information for the upcoming steps of the installation from the registration server. In the openSUSE case (where registration makes no sense), it will be able to reach the screen that allows to add more repositories.</p>
<p>Another step (and certainly not an easy one) to improve the installation experience for our users. Data center administrators, enjoy! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<h2 id="revamping-salt-formulas-forms-support">Revamping SUSE Manager Salt Formulas Support</h2>
<p>Back in 2017, the <a href="https://github.com/yast/yast-configuration-management/">YaST Configuration Management</a> module got support to handle SUSE Manager Salt Formulas as part of <a href="https://hackweek.suse.com/15/projects/yast-module-for-suse-manager-salt-parametrizable-formulas">a Hack Week project</a>. If you do not know what this feature is about, you might be interested in checking the <a href="https://www.suse.com/communities/blog/forms-formula-success/">Forms are the Formula for Success</a> presentation or the Hack Week project <a href="https://imobachgs.github.io/yast/2017/03/01/yast2-cm-gets-support-for-salt-parametrizable-formulas.html">follow-up post</a>.</p>
<p>Since then, the forms specification has evolved quite a lot and YaST support was basically outdated. So on November 2018 we started to work in order to bring the missing pieces to the YaST module. Basically, we rewrote the forms support and, although there are still rough edges, we are pretty close to release a new version with up-to-date support for this powerful feature.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-configuration-management.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-configuration-management-300x225.png" alt="Screenshot of how the dhcpd formula looks like" width="300" height="225" class="aligncenter size-medium wp-image-13565" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-configuration-management-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-configuration-management-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-configuration-management.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h2 id="managing-custom-zones-definitions-in-yast-firewall">Managing Custom Zones Definitions in YaST Firewall</h2>
<p>The new YaST UI for configuring <code>firewalld</code> was announced in <a href="https://lizards.opensuse.org/2018/10/01/yast-sprint-63/">the report of the sprint #63</a> (four months ago&#8230; time flies!) and, since then, we have continued improving it.</p>
<p><code>firewalld</code> ships with some predefined <a href="https://firewalld.org/documentation/man-pages/firewalld.zones.html">zones</a>. Although it covers most users needs, in addition it allows the user to define custom zones. During the last sprint we have added support in the new UI and also in AutoYaST to manage <a href="https://firewalld.org/documentation/man-pages/firewalld.zones.html">custom zones</a>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-firewall-custom-zones.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-firewall-custom-zones-300x266.png" alt="YaST2 Firewall custom zones definition dialog" width="300" height="266" class="aligncenter size-medium wp-image-13555" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-firewall-custom-zones-300x266.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-firewall-custom-zones.png 560w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>During the development process some problems detected in the <strong>AutoYaST configuration</strong> were addressed too.</p>
<h2 id="updated-yast-branding-and-icon-handling">Updated YaST Branding and Icon Handling</h2>
<p>In the past the YaST icons were included in the <code>yast2-branding-openSUSE</code> (openSUSE) and <code>yast2-theme-SLE</code> (SUSE Linux Enterprise) packages. The standard YaST icons were included in these packages, the standard YaST modules did not include any icons.</p>
<p>However, the disadvantage for the icon designer was that it was not clear which icons were really used.<br />
If you wanted to update the icon theme you could potentially do a lot of useless work because some icons were not used anymore.</p>
<p>Now the icons are included in the respective YaST package, if the package is dropped the icon is dropped as well.</p>
<p>The package manager UI includes compiled-in fallback icons. That means if the branding package is broken or the icon files are accidentally deleted from disk then it will be still usable for emergency recovery.</p>
<p>The branding still works, the vendor can still provide specific icons which will override the included ones. So it is still possible to have a different look in the openSUSE and SLE products.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-control-center-icons.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/01/yast2-control-center-icons-300x224.png" alt="YaST2 Control Center new branding Screenshot" width="300" height="224" class="aligncenter size-medium wp-image-13561" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-control-center-icons-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-control-center-icons-768x575.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/01/yast2-control-center-icons.png 786w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>A big thank you goes to Stasiek Michalski and Noah Davis from the community who did the changes in the YaST code, designed the new icons and did a lot of cleanup!</p>
<h2 id="improving-performance-when-loading-huge-etchosts">Improving Performance when Loading Huge <code>/etc/hosts</code> Files</h2>
<p>It might happen that you need to maintain a huge <code>/etc/hosts</code> file, especially when dealing with ads blockers. Such file with thousands of lines took an incredible amount of time to get loaded into YaST2. On some configurations it could even happen that loading a <code>/etc/hosts</code> with around 10.000 lines freezes the system completely. After some refactoring in YaST2 Host module, the performance has been significantly improved and loading a file with 10.000 lines now takes approximately 30s on the same configuration where it crashed before.</p>
<h2 id="disabling-cd-dvd-repositories-after-installation">Disabling CD/DVD Repositories After Installation</h2>
<p>If you install your system from a CD/DVD source it usually happens that this repository was not available for whole live of the system. In some use cases this was only uncomfortable because of some warnings but, in other cases, it caused serious complications, for instance, when trying to do a migration.</p>
<p>In the past, under some circumstances, those repositories were already disabled. But, from now on, they will be disabled always in order to avoid unwanted side effects.</p>
<h2 id="closing-thoughs">Closing Thoughts</h2>
<p>That&#8217;s all for the first report of 2019. In case you are wondering, the plan is to stick to the plan of publishing a report after each sprint, so expect the next one in about two weeks.</p>
<p>However, we recently had to migrate from the so called GitHub Services (now deprecated) to GitHub web hooks, so you might get an extra blog post about that very soon.</p>
<p>Stay tuned!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/01/31/highlights-of-yast-development-sprint-6970/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>Report from the reproducible builds summit 2018</title>
		<link>https://lizards.opensuse.org/2018/12/17/report-from-the-reproducible-builds-summit-2018/</link>
		<comments>https://lizards.opensuse.org/2018/12/17/report-from-the-reproducible-builds-summit-2018/#comments</comments>
		<pubDate>Mon, 17 Dec 2018 10:36:10 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Events]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[Toolchain]]></category>
		<category><![CDATA[Paris]]></category>
		<category><![CDATA[reproducible-builds]]></category>
		<category><![CDATA[Summit]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13522</guid>
		<description><![CDATA[Last week I attended the reproducible builds world summit in Paris. It was very well organized by Holger, Gunner and their hidden helpers in the background. Very similar to the last 2 summits I attended in Berlin. Because we were around 50 participants, introductions and announcements were the only things done in the big group. [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Last week I attended <a href="https://reproducible-builds.org/events/paris2018/">the reproducible builds world summit in Paris</a>.<br />
It was very well organized by Holger, Gunner and their hidden helpers in the background. Very similar to the last 2 summits I attended in Berlin.</p>
<p>Because we were around 50 participants, introductions and announcements were the only things done in the big group. All actual work happened in 5-10 smaller circles.</p>
<p>We had participants from large companies like Google (with bazel), MicroSoft and Huawei, but also from many distributions and open source projects. Even MirageOS as non-Linux OS.</p>
<p>We did knowledge-sharing, refine definitions of terms, evolve concepts like &#8220;rebuilders&#8221; for verifying builds and allow users to better trust software they install, and such.</p>
<p>I learned about <a href="https://tests.reproducible-builds.org/reproducible.sql.xz">the undocumented DB dump</a> (153 MB) and  <a href="https://tests.reproducible-builds.org/reproducibledb.html">DB schema</a></p>
<p>And we had some hacking time, too, so there is now<br />
<a href="https://jenkins.debian.net/job/reproducible_opensuse_import_json/">a jenkins job</a> that renders <a href="https://tests.reproducible-builds.org/opensuse/factory/x86_64/index_FTBR.html">the list of unreproducible openSUSE Factory packages</a>.</p>
<p>Also, <a href="https://maintainer.zq1.de/?pkg=bash">my maintainer tool</a> now has added support for the Alpine Linux distribution, thanks to help by one of its maintainers: Natanael Copa.<br />
This is meant to help all cross-distro collaboration, not just for reproducible builds.</p>
<p>There is still work to be done to make better use of Mitre CPE to map package names across distributions.</p>
<p>I think, one major benefit of the summit was all the networking and talking going on, so that we have an easier time working with each other over the internet in the future.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/12/17/report-from-the-reproducible-builds-summit-2018/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 66</title>
		<link>https://lizards.opensuse.org/2018/11/07/highlights-of-yast-development-sprint-66/</link>
		<comments>https://lizards.opensuse.org/2018/11/07/highlights-of-yast-development-sprint-66/#respond</comments>
		<pubDate>Wed, 07 Nov 2018 11:37:29 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13462</guid>
		<description><![CDATA[The YaST team is working hard in order to extend the installer, improve the new storage layer and get rid of some bugs. So after this sprint, there is quite some unfinished work that will be ready within two weeks. However, we have some stuff that we would like you to check out: Snapper takes [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The YaST team is working hard in order to extend the installer, improve the new storage layer and get rid of some bugs. So after this sprint, there is quite some unfinished work that will be ready within two weeks.</p>
<p>However, we have some stuff that we would like you to check out:</p>
<ul>
<li>Snapper takes the free space into account when cleaning up snapshots.</li>
<li>The partitioning proposal tries to use just a single disk first.</li>
<li>The description of those actions that are related to BCache and MD-RAID devices have been greatly improved.</li>
<li>YaST is now able to handle repository variables properly.</li>
<li>The log viewer displays a helpful message when no logs are found.</li>
<li>And last but not least, yast2-sshd got a new maintainer outside of the YaST team. Let&#8217;s celebrate!</li>
</ul>
<h3 id="snapper-deletes-snapshots">Extended Snapshots Clean-up Mechanisms in Snapper</h3>
<p>So far <em>snapper</em> would delete snapshots if the overall spaced used for them was above a given limit. Now, <em>snapper</em> is able to take the free space into account too, so it will delete snapshots when the free space of the filesystem drops below a given threshold.</p>
<p>Of course, the threshold can be adjusted by the user through the <em>snapper</em> configuration files.</p>
<h3 id="better-actions-descriptions">Better Actions Descriptions in Storage-ng</h3>
<p>When describing what actions will be performed for storage actions, we already collapsed related actions to one to make it better readable. Instead of:</p>
<pre>- Create  partition /dev/sda1 (40.00 GiB)
- Set ID of partition /dev/sda1 to "Linux" (0x83)
- Create ext4 on /dev/sda1
- Add mount point /home for /dev/sda1
- Add entry for /dev/sda1 to /etc/fstab
</pre>
<p>we report:</p>
<pre>- Create partition /dev/sda1 (40.00 GiB) with ext4 for /home
</pre>
<p>However, actions related to BCache and MD-RAID devices were not taken into account, which produced quite long (and confusing) descriptions. Fortunately, these cases are now properly handled and the description is now quite informative and concise:</p>
<pre>Create encrypted RAID1 /dev/md0 (511.87 GiB) for /secret with xfs
from /dev/sda (512.00 GiB), /dev/sdb (512.00 GiB)
</pre>
<h3 id="replacing-libzypp-variables">Properly Handling Repository Variables</h3>
<p>libzypp supports variable substitution in the <em>name</em> and the <em>URLs</em> of repositories and services. So a <tt>.repo</tt> file might contain something like this (notice the <tt>$releasever</tt> variable):</p>
<pre>[repo-oss]
name=openSUSE-Leap-$releasever
baseurl=http://download.opensuse.org/distribution/leap/$releasever/repo/oss/
</pre>
<p>libzypp will take care of injecting the correct value but the user could override those values too. So in the example above, upgrading to Leap 15.1 might be as easy as:</p>
<pre>zypper --releasever 15.1 dup
</pre>
<p>However, YaST2 had some problems in these situations that, hopefully, have been fixed during this sprint. Now openSUSE release managers can adjust the list of online repositories in order to take advantage of such a feature. If you want to know more about variable substitution, please check <a href="https://doc.opensuse.org/projects/libzypp/HEAD/zypp-repovars.html">libzypp documentation</a>.</p>
<h3 id="partitioning-proposel-uses-a-single-disk">Partitioning Proposal Uses a Single Disk</h3>
<p>Until now, the partitioning proposal that is calculated during the installation uses all available disks by default. However, according to the feedback that we have received from our users, most people simply expect the system to be installed in just one disk. So, from now on, this initial proposal will consider each candidate disk in isolation before falling back to a multi-disk approach.</p>
<p>A picture is worth a thousand words, so just compare the images below to see the difference on a system which has three hard disks.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk.png"><img class="aligncenter size-medium wp-image-13472" src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk-300x215.png" alt="Initial Multi-Disk Partitioning Proposal" width="300" height="215" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk-768x549.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk-1024x733.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-multi-disk.png 1026w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-single-disk.png"><img class="aligncenter size-medium wp-image-13473" src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-single-disk-300x198.png" alt="Initial Single Disk Partitioning Proposal" width="300" height="198" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-single-disk-300x198.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-single-disk-768x508.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-partitioning-single-disk.png 953w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="improve-log-view-usability">Improve Log Viewer Usability</h3>
<p>YaST has featured a log viewer for a long time which allows the user to inspect files under <tt>/var/log</tt> like <tt>messages</tt>, <tt>boot.log</tt> or even YaST logs (<tt>YaST2/y2log</tt>). However, we are already in the <em>Systemd</em> times and most of your system services will log relevant information to the <em>Systemd</em> journal.</p>
<p>For that reason, YaST2 offers a really nice log viewer for (<tt>yast2-journal</tt>) which includes interesting filtering capabilities.</p>
<p>The problem is that, as one of our users stated in a <a href="https://bugzilla.suse.com/show_bug.cgi?id=948729">rather old bug report</a>, having two different tools to check logs can be confusing. Of course, they are getting information from different places so we decided to keep both of them. However, now the old log viewer will show a hint when no information is found in those old-style logs.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint.png"><img class="aligncenter size-medium wp-image-13463" src="//lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint-300x169.png" alt="Use yast2-journal instead" width="300" height="169" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint-300x169.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint-768x433.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint-1024x578.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/11/use-yast2-journal-hint.png 1347w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="yast-sshd-has-a-new-maintainer">yast2-sshd Has a New Maintainer</h3>
<p>We would like to finish this report announcing that yast2-sshd has a new maintainer outside of the YaST team. This module was dropped back in 2013 and it was shipped in openSUSE 12.3 for the last time.</p>
<p>However, YaST is open source and Caleb Woodbine has built <a href="https://build.opensuse.org/package/show/home:Boby_MC_bobs/yast2-sshd">fresh RPM packages</a> after fixing <a href="https://bugzilla.suse.com/show_bug.cgi?id=1112491">a problem he found</a> in the firewalld integration. So if you are interested in such a module, check out Caleb&#8217;s work.</p>
<p>Thanks a lot, Caleb!</p>
<h3 id="conclusions">Conclusions</h3>
<p>As we mentioned at the beginning of this post, there is quite some work in progress but, sadly, you will need to wait for another two weeks to get more details <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Stay tunned!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/11/07/highlights-of-yast-development-sprint-66/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Fun things to do with driver updates</title>
		<link>https://lizards.opensuse.org/2017/04/25/fun-things-to-do-with-driver-updates-3/</link>
		<comments>https://lizards.opensuse.org/2017/04/25/fun-things-to-do-with-driver-updates-3/#respond</comments>
		<pubDate>Tue, 25 Apr 2017 07:45:33 +0000</pubDate>
		<dc:creator><![CDATA[Steffen Winterfeldt]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[DUD]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[Linux]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12432</guid>
		<description><![CDATA[Today: And what if I want to remove some files? It&#8217;s easy and obvious to add new files with a driver update (DUD). But what if you need to remove some files? Or, related: can you replace some read-only file by a writable copy? Let&#8217;s for this article assume you want to modify the Xorg [&#8230;]]]></description>
				<content:encoded><![CDATA[<h3>Today: And what if I want to <i>remove</i> some files?</h3>
<p>It&#8217;s easy and obvious to add new files with a driver update (DUD). But what if you need to <b>remove</b> some files? Or, related: can you replace some read-only file by a writable copy?</p>
<p>Let&#8217;s for this article assume you want to modify the Xorg configuration. Say,<br />
<code>/usr/share/X11/xorg.conf.d/10-evdev.conf</code> troubles you.</p>
<p>The direct way would be to write an <code>update.pre</code> script than removes the file and include this into a DUD.</p>
<p><code>update.pre</code> is run right after the DUD has updated the files in the installation system.</p>
<p>For example:</p>
<pre>
echo \
  rm /usr/share/X11/xorg.conf.d/10-evdev.conf \
  &gt; update.pre
mkdud --create test1.dud --dist tw --name "remove 10-evdev.conf" update.pre
</pre>
<p>But when we try <code>test1.dud</code> we run into this:</p>
<pre>
Driver Update: remove 10-evdev.conf
Driver Updates added:
  remove 10-evdev.conf
[...]
rm: cannot remove '/usr/share/X11/xorg.conf.d/10-evdev.conf': Read-only file system
</pre>
<p>So, we see the catch: much of the installation system resides on a read-only file system! You can&#8217;t just go and modify things.</p>
<p>But how does the driver update process manage to add new files to the installation system then? It does so by restructuring the file system using symlinks. In the process all directories that need to be modified are replaced by writable copies.</p>
<p>In other words: if you include the file you want to remove in the DUD &#8211; you will be able to remove it. It&#8217;s actually sufficient to include the directory the file resides in to make this work.</p>
<p>So, let&#8217;s try this:</p>
<pre>
mkdir -p /tmp/dud/usr/share/X11/xorg.conf.d
echo \
  "rm /usr/share/X11/xorg.conf.d/10-evdev.conf" \
  &gt; update.pre
mkdud --create test2.dud --dist tw --name "remove 10-evdev.conf" update.pre /tmp/dud
</pre>
<p>Now we don&#8217;t get any error applying <code>test2.dud</code> and when we login to the installation system, we see:</p>
<pre>
console:vm9732:/ # ls -l /usr/share/X11/xorg.conf.d
total 0
console:vm9732:/ # 
</pre>
<blockquote>
<h4>Tip</h4>
<p>For easy testing a DUD, boot the machine with</p>
<pre>
startshell=1 sshd=1 password=*** dud=&lt;URL&gt;
</pre>
<p><code>startshell=1</code> wi ll stop the installation workflow after the installation system has been fully prepared just before <code>YaST</code> will be started. <code>sshd=1</code> will start an SSH daemon and you&#8217;ll be able to connect to the machine and look around.</p>
</blockquote>
<p>A similar trick can be used to make files writable (watch out for correct shell quoting):</p>
<pre>
mkdir -p /tmp/dud/usr/share/X11/xorg.conf.d
echo \
  cp --remove-destination '$(readlink -f /usr/share/X11/xorg.conf.d/10-evdev.conf)' \
  /usr/share/X11/xorg.conf.d/10-evdev.conf \
  &gt; update.pre
mkdud --create test3.dud --dist tw --name "make 10-evdev.conf writable" update.pre /tmp/dud
</pre>
<p>We can verify the result:</p>
<pre>
console:vm9732:/ # ls -l /usr/share/X11/xorg.conf.d               
total 4
-rw-r--r-- 1 root root 1099 Apr 24 13:06 10-evdev.conf
console:vm9732:/ #
</pre>
<p>The file is now writable.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2017/04/25/fun-things-to-do-with-driver-updates-3/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Fun things to do with driver updates</title>
		<link>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/</link>
		<comments>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/#comments</comments>
		<pubDate>Thu, 16 Mar 2017 12:12:16 +0000</pubDate>
		<dc:creator><![CDATA[Steffen Winterfeldt]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[DUD]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[Linux]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12356</guid>
		<description><![CDATA[Today: But what if I need a new kernel? A driver update (DUD) can of course update a single driver. But if that&#8217;s not enough and you need a whole new kernel to run an installation? There are two parts to solve: replace the kernel used during installation and get the new kernel installed We&#8217;ll [&#8230;]]]></description>
				<content:encoded><![CDATA[<h3>Today: But what if I need a new kernel?</h3>
<p>A driver update (<a href="https://en.opensuse.org/SDB:Linuxrc#p_dud">DUD</a>) can of course update a single driver. But if that&#8217;s not enough and you need a whole new kernel to run an installation?</p>
<p>There are two parts to solve:</p>
<ol>
<li>replace the kernel used <b>during</b> installation and</li>
<li>get the new kernel installed</li>
</ol>
<p>We&#8217;ll need two tools for this (both available in Tumbleweed or here: <a href="https://software.opensuse.org/package/mksusecd">mksusecd</a> and <a href="https://software.opensuse.org/package/mkdud">mkdud</a>).</p>
<h4>1. Replace the kernel used during installation</h4>
<p>For this it&#8217;s important to know which kernel packages you&#8217;ll actually need. Typically it will be <code>kernel-default</code> and <code>kernel-firmware</code>. But older SUSE distributions (SLE 11 comes to mind) had the kernel packages split into <code>kernel-default</code> and <code>kernel-default-base</code> &#8211; you&#8217;ll need them <b>both</b>.</p>
<p>To make things confusing, modern SUSE distributions also have <code>kernel-default-base</code> &#8211; but it&#8217;s an <b>alternative</b> to <code>kernel-default</code>. In this case we <b>don&#8217;t</b> need it.</p>
<p>If unsure, check <code>kernel-default</code>. If it contains the actual kernel (e.g. <code>/boot/vmlinuz</code>) then you <b>don&#8217;t</b> need <code>kernel-default-base</code>.</p>
<p>On some architectures modules are also taken from <code>xen-kmp-default</code>. If that&#8217;s important for you, you can add this package to the kernel list as well.</p>
<p>In fact you can add any number of kernel packages or kmps you like.</p>
<p>In the past, sometimes a different kernel flavor was used. For example PowerPC had <code>kernel-ppc64</code> for a while. Simply use the flavor you need.</p>
<p>It&#8217;s a good idea to gather all the kernel rpms into a single directory for easier use:</p>
<pre>&gt; mkdir k
&gt; cp kernel-default.rpm kernel-firmware.rpm k
&gt; cp kernel-default-base.rpm k    # only if needed
# add any kernel-related rpms you need
</pre>
<p>Then, take your SUSE installation iso and run</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* -- \
  original_dvd1.iso
</pre>
<p>Note that the <code>--kernel</code> option accepts a variable number of arguments, so you have to add an isolated <code>--</code> to terminate the argument list properly.</p>
<p>The output could look like this:</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
kernel version: 3.0.101-63-ppc64 --&gt; 3.0.101-94-ppc64
CHRP bootable (ppc64)
building: 100%
calculating sha1...
</pre>
<p>The command above will actually get the list of required modules from the old installation iso. If you are missing some driver or the new kernel comes with some additional driver, the module will not be added to the new iso.</p>
<p>But there&#8217;s the <code>--modules</code> option. It will add the listed modules together with any implicitly required modules via module dependencies.</p>
<p>For example, let&#8217;s add the <code>airport</code> wifi-module to our PowerPC iso:</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* \
  --modules airport -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
kernel version: 3.0.101-63-ppc64 --&gt; 3.0.101-94-ppc64
kernel modules added:
  airport, cfg80211, orinoco
CHRP bootable (ppc64)
building: 100%
calculating sha1...
</pre>
<p>As you can see, it automatically adds <code>orinoco</code> and <code>cfg80211</code> as well.</p>
<h4>2. Get the new kernel installed</h4>
<p>This is relatively simple. A driver update can do this:</p>
<pre>&gt; mkdud --create foo.dud \
  --dist sle11 \
  --install repo \
  k/*
</pre>
<p>This creates a driver update for SLE 11 (which also applies to SP4) and the kernel rpms are installed via an auto-generated add-on repo (<code>--install repo</code>).</p>
<p>Now we have the driver update that installs our kernel packages. But how do we use it?</p>
<p>We integrate it into our iso above!</p>
<pre>&gt; mksusecd --create new.iso \
  --initrd foo.dud \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
</pre>
<p><code>mksusecd</code> has an <code>--initrd</code> option that directly accepts driver updates and integrates them into the iso.</p>
<h4>3. Can I have a choice?</h4>
<p>Maybe you just want to test this new kernel or sometimes need the old one and sometimes the new one. Can you make an installation iso that lets you choose the kernel?</p>
<p>Oh yes! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<pre>&gt; mksusecd --create new.iso \
  --add-entry 3.0.101-94 \
  --initrd foo.dud \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
</pre>
<p>This does not replace the old kernel but <b>adds</b> a new boot entry <code>Installation - 3.0.101-94</code>.</p>
<p>So you can install with old or the new kernel.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
	</channel>
</rss>
