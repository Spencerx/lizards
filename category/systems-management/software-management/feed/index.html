<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Software Management &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/systems-management/software-management/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>

	<item>
		<title>Highlights of YaST Development Sprint 93</title>
		<link>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/</link>
		<comments>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/#comments</comments>
		<pubDate>Fri, 07 Feb 2020 16:31:11 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Hackweek]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14311</guid>
		<description><![CDATA[Lately, the YaST team has been quite busy fixing bugs and finishing some features for the upcoming (open)SUSE releases. Although we did quite some things, in this report we will have a closer look at just a few topics: A feature to search for packages across all SLE modules has arrived to YaST. Improved support [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Lately, the YaST team has been quite busy fixing bugs and finishing some features for the upcoming (open)SUSE releases. Although we did quite some things, in this report we will have a closer look at just a few topics:</p>
<ul>
<li>A feature to search for packages across all SLE modules has arrived to YaST.</li>
<li>Improved support for S390 systems in the network module.</li>
<li>YaST command-line interface now returns a proper exit-code.</li>
<li>Added progress feedback to the Expert Partitioner.</li>
<li>Partial support for Bitlocker and, as a lesson learned from that, a new warning about resizing empty partitions.</li>
</ul>
<h3 id="the-online-search-feature-comes-to-yast">The Online Search Feature Comes to YaST</h3>
<p>As you already know, starting in version 15, SUSE Linux follows a modular approach. Apart from the base products, the packages are spread through a set of different modules that the user can enable if needed (Basesystem module, Desktop Applications Module, Server Applications Module, Development Tools Module, you name it).</p>
<p>In this situation, you may want to install a package, but you do not know which module contains such a package. As YaST only knows the data of those packages included in your registered modules, you will have to do a manual search.</p>
<p>Fortunately, zypper introduced a new <code>search-packages</code> command some time ago that allows to find out where a given package is. And now it is time to bring this feature to YaST.</p>
<p>For technical reasons, this online search feature cannot be implemented within the package manager, so it is available via the <em>Extra</em> menu.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-300x207.png" alt="Search Online Menu Option" width="300" height="207" class="aligncenter size-medium wp-image-14315" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-768x531.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option-1024x708.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/02/search-online-menu-option.png 1052w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>YaST offers a simple way to search for the package you want across all available modules and extensions, no matter whether they are registered or not. And, if you find the package you want, it will ask you about activating the needed module/extension right away so you can finally install the package.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-300x207.png" alt="Online Search: Enable Containers Module" width="300" height="207" class="aligncenter size-medium wp-image-14313" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-768x531.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module-1024x708.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/02/online-search-enable-containers-module.png 1050w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>If you want to see this feature in action, check out the <a href="//lizards.opensuse.org/wp-content/uploads/2020/02/online-search-install-php7.webm">demonstration video</a>. Like any other new YaST feature, we are looking forward to your feedback.</p>
<h3 id="fixing-and-improving-network-support-for-S390-systems">Fixing and Improving Network Support for S390 Systems</h3>
<p>We have mentioned a lot of times that we recently refactored the Network module, fixing some long-standing bugs and preparing the code for the future. However, as a result, we introduced a few new bugs too. One of those bugs was dropping, by accident, the network devices activation dialog for S390 systems. Thus, during this sprint, we re-introduced the dialog and, what is more, we did a few improvements as the old one was pretty tricky. Let&#8217;s have a look at them.</p>
<p>The first obvious change is that the overview shows only one line per each s390 group device, instead of using one row per each channel as the old did.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-300x239.png" alt="New YaST Network Overview for S390 Systems" width="300" height="239" class="aligncenter size-medium wp-image-14318" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview-768x611.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-new-overview.png 927w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Moreover, the overview will be updated after the activation, displaying the Linux device that corresponds to the just activated device.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation-300x190.png" alt="YaST2 Network Overview After Activation" width="300" height="190" class="aligncenter size-medium wp-image-14321" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation-300x190.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-overview-after-activation.png 723w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Last but not least, we have improved the error reporting too. Now, when the activation fails, YaST will give more details in order to help the user to solve the problem.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-300x239.png" alt="YaST2 Network Error Reporting in S390 Systems" width="300" height="239" class="aligncenter size-medium wp-image-14319" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting-768x613.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-network-s390-error-reporting.png 926w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="fixing-the-cli">Fixing the CLI</h3>
<p>YaST command-line interface is a rather unknown feature, although it has been there since ever. Recently, we got some bug reports about its exit codes. We discovered that, due to a technical limitation of our internal API, it always returned a non-zero exit code on any command that was just reading values but not writing anything. Fortunately, we were able to fix the problem and, by the way, we improved the behavior in several situations where, although the exit code was non-zero, YaST did not give any feedback. Now that the CLI works again, it is maybe time to give it a try, especially if it is the first time you hear about it.</p>
<h3 id="yast2-partitioner-feedback">Adding Progress Feedback to the Partitioner</h3>
<p>The <em>Expert Partitioner</em> is a very powerful tool. It allows you to perform very complex configurations in your storage devices. At every time you can check the changes you have been doing in your devices by using the Installation Summary option on the left bar. All those changes will not be applied on the system until you confirm them by clicking the Next button. But once you confirm the changes, the Expert Partitioner simply closes without giving feedback about the progress of the changes being performed.</p>
<p>Actually, this is a kind of regression after migrating YaST to its new Storage Stack (a.k.a. storage-ng). The old Partitioner had a final step which did inform the user about the progress of the changes. That dialog has been brought back, allowing you to be aware of what is happening once you decide to apply the configuration. This progress dialog will be available in SLE 15 SP2, openSUSE 15.2 and, of course, openSUSE Tumbleweed.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-300x155.png" alt="YaST Partitioner Progress Feedback" width="300" height="155" class="aligncenter size-medium wp-image-14325" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-300x155.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback-768x397.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-progress-feedback.png 957w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="bitlocker">Recognizing Bitlocker Partitions</h3>
<p><a href="https://en.wikipedia.org/wiki/BitLocker">Bitlocker</a> is a filesystem encrypting technology that comes included with Windows. Until the previous sprint, YaST was not able to recognize that a given partition was encrypted with such technology.</p>
<p>As a consequence, the automatic partitioning proposal of the (open)SUSE installer would happily delete any partition encrypted with Bitlocker to reclaim its space, even for users that had specified they wanted to keep Windows untouched. Moreover, YaST would allow users to resize such partitions using the Expert Partitioner without any warning (more about that below).</p>
<p>All that is fixed. Now Bitlocker partitions are correctly detected and displayed as such in the Partitioner, which will not allow users to resize them, explaining that such operation is not supported. And the installer&#8217;s Guided Setup will consider those partitions to be part of a Windows installation for all matters.</p>
<h3 id="beware-of-empty-partitions">Beware of Empty Partitions</h3>
<p>As explained before, whenever YaST is unable to recognize the content of a partition or a disk, it considers such device to be empty. Although that&#8217;s not longer the case for Bitlocker devices, there are many more technologies out there (and more to come). So users should not blindly trust that a partition displayed as empty in the YaST Partitioner can actually be resized safely.</p>
<p>In order to prevent data loss, in the future YaST will inform the user about a potential problem when trying to resize a partition that looks empty.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message-300x180.png" alt="YaST&quot; Expert Partitioning Warning when Resizing Empty Partitions" width="300" height="180" class="aligncenter size-medium wp-image-14329" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message-300x180.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/02/yast2-storage-ng-empty-partition-warning-message.png 355w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="hack-week-is-coming">Hack Week is coming&#8230;</h3>
<p>That special time of the year is already around the corner. Christmas? No, Hack Week! From February 10 to February 14 we will be celebrating the 19th Hack Week at SUSE. The theme of this edition is <em>Simplify, Modernize &amp; Accelerate</em>. If you are curious about the projects that we are considering, have a look at <a href="https://hackweek.suse.com/">SUSE Hack Week&#8217;s Page</a>. Bear in mind that the event is not limited to SUSE employees, so if you are interested in any project, do not hesitate to join us.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2020/02/07/yast-sprint-93/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 91</title>
		<link>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/</link>
		<comments>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/#comments</comments>
		<pubDate>Wed, 18 Dec 2019 10:35:55 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14236</guid>
		<description><![CDATA[The last two weeks of the year, and also the first one of the new year, are vacation season in many parts of the world and YaSTland is not an exception. But before we enter hibernation mode, let&#8217;s take a look to the most important features and bugfixes we implemented in the last sprint of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The last two weeks of the year, and also the first one of the new year, are vacation season in many parts of the world and YaSTland is not an exception. But before we enter hibernation mode, let&#8217;s take a look to the most important features and bugfixes we implemented in the last sprint of 2019. That includes:</p>
<ul>
<li>bringing back to life some sections of the Software Manager,</li>
<li>implementing system upgrade with the new SLE media types,</li>
<li>making the installation in Raspberry Pi and IBM Z System even better,</li>
<li>improving usability of encryption,</li>
<li>reducing the footprint of the Snapper plugin for ZYpp,</li>
<li>as always, many other small improvements and fixes.</li>
</ul>
<h3>Restored Some Package Views: Recommended, Suggested, etc.</h3>
<p>Let&#8217;s start with a redemption story. Some time ago we implemented feature <a href="https://fate.suse.com/326485">fate#326485</a> which requested dropping the &#8220;Package Groups&#8221; view from the package manager UI. That was quite an easy task.</p>
<p>However, a few weeks later we got a bug report that the lists of recommended, suggested, etc&#8230; packages couldn&#8217;t be displayed anymore. It turned out that, in the Qt package manager front-end, the removed &#8220;Package Groups&#8221; view not only used to display the static group data from the packages but it also contained some special computed package lists like orphaned, suggested or recommended packages. So these lists were lost as a collateral damage of removing the &#8220;Package Groups&#8221; view.</p>
<p>The ncurses package manager was not affected by the same problem because, in that front-end, those views are grouped in a separate &#8220;Package Classification&#8221; section. So the task for this sprint was to somehow revive the lists in Qt and make them again available to the users.</p>
<p>We partly reverted the Package Groups removal and restored displaying those special package groups. To make it consistent we also use the &#8220;Package Classification&#8221; name for the view, like in the ncurses package manager.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-300x188.png" alt="The new Package Classification view in Qt" width="300" height="188" class="aligncenter size-medium wp-image-14238" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-300x188.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt-768x481.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-qt.png 775w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>On the other hand, the ncurses front-end was missing some lists like the &#8220;Multiversion Packages&#8221; and &#8220;All Packages&#8221;. To take consistency another step further, we added these missing lists and did some small cleanup and fixes so now both the Qt and the ncurses package managers should offer the same functionality and should look similar.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-300x197.png" alt="The revamped Package Classification view in ncurses" width="300" height="197" class="aligncenter size-medium wp-image-14239" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-300x197.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses-768x505.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/packages-ncurses.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>User-friendly Encryption Device Names</h3>
<p>And talking about bug reports that trigger some usability revamp, some users had pointed that, when the system is booting and prompts for the password of an encrypted device, it&#8217;s not always that easy to identify which exact device it is referring to:</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/prompt-udev-1.png" alt="Booting password prompt before the change"></p>
<p>The root of the problem is that when YaST creates an encryption device (during the installation by means of the storage proposal, or manually with the Expert Partitioner), the device mapper name for the new encrypted device is generated from the udev id of the underlying device (e.g., <em>cr_ccw-0XAF5E-part2</em>).</p>
<p>We decided to improve the encryption naming generation in YaST for Tumbleweed and future releases of Leap and SLE. From now on, the name will be based on the mount point of the device. For example, if an encrypted device is going to be mounted at root, its device mapper name would be <em>cr_root</em>. In general, when the encrypted device is mounted, the device mapper name would be <em>cr_mount_point</em> (e.g., <em>cr_home_linux</em> for an encrypted device mounted at <em>/home/linux</em>).</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/prompt-mountpoint-1.png" alt="Booting password prompt after the change"></p>
<p>Note that udev-based names might still be used for some scenarios. For example, when the device is not mounted or for an indirectly used encrypted device (e.g., an encrypted LVM Physical Volume).</p>
<p>And related to the identification of encryption devices, we have also added more information about the device when the encryption devices are activated during the installation process. Providing the password for the correct device was very difficult because the user needed to know the UUID of the encryption device. Now on, the activation popup also informs about the kernel name of the underlying device, making much easier to identify it.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-300x225.png" alt="New password prompt during installation" width="300" height="225" class="aligncenter size-medium wp-image-14249" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/luks-activation.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Because names matter&#8230; which leads us to the next topic.</p>
<h3>How does it Feel to Run a Mainframe?</h3>
<p>As you may know, (open)SUSE runs in a vast range of hardware, including powerful mainframes like the <a href="https://en.wikipedia.org/wiki/IBM_Z">IBM Z family</a>. One of the strengths of our beloved distributions is that, despite the differences in hardware and scope, the installation and usage experience is very similar in all the supported systems.</p>
<p>Consistency and ease of use are good, but when you drive a luxury car you want to see the brand&#8217;s badge on top of the hood. So in future versions of the installer, the model of the machine will be displayed when installing in an IBM Z system. See the right-top corner of the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-300x187.png" alt="IBM Z Model in the installer" width="300" height="187" class="aligncenter size-medium wp-image-14280" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-300x187.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-768x479.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt-1024x639.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-qt.png 1179w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The text-based installer also has been modified to include the same banner in a similar place.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses-300x61.png" alt="IBM Z Model in the text-mode installer" width="300" height="61" class="aligncenter size-medium wp-image-14281" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses-300x61.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/s390-curses.png 515w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But in the same way that (open)SUSE enables you to install and use Linux in a mainframe &#8220;just like in any other computer&#8221;, we also target to do the same in the other extreme of the hardware spectrum.</p>
<h3>Better Support for Raspberry Pi in the Partitioning Proposal</h3>
<p>One year ago <a href="https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/">we announced</a> that openSUSE Leap 15.1 and SLE-15-SP1 would be the first Linux distributions that could be installed in Raspberry Pi devices following the standard installation procedure, instead of deploying a Raspberry-specific pre-built image. The only prerequisite was the existence in the target SD card (or disk) of a partition containing the Raspberry Pi boot code.</p>
<p>But we are now able to go one step further for SLE-15-SP2 (and Leap 15.2). Thanks to the technologies included in those upcoming releases, (open)SUSE will not longer need a separate partition with the boot code in all cases. Now the installer can make a reasonable installation proposal in all situations, even if the target storage device doesn&#8217;t contain a booting partition in advance. See, for example, what the installer suggests by default for installing a fully standard SLE-15-SP2 Beta1 in a 32 GiB SD card that contained initially a GPT partition table (tip: GPT partition tables cannot be used to boot in a Raspberry Pi device&#8230; and the installer knows it).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb-300x203.png" alt="Installer proposal for a Raspberry Pi" width="300" height="203" class="aligncenter size-medium wp-image-14256" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb-300x203.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/12/proposal-32gb.png 669w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>With that, the installation of the standard SLE-15-SP2 Beta1 (the aarch64 version, of course) in a Raspberry Pi 3 or 4 is as easy as &#8220;next&#8221;, &#8220;next&#8221;, &#8220;next&#8221;&#8230; with the only exception of a couple of packages that must be manually selected for installation (<code>raspberrypi-*</code> and <code>u-boot-rpi3</code>). Hopefully, future beta images of both SLE and openSUSE Leap 15.2 will select those packages automatically when installing in a Pi, which will make the (open)SUSE experience in those devices basically identical to any other computer. </p>
<h3>SLE Upgrade with the New Media Types</h3>
<p>And talking about the standard installation images of the upcoming SLE-15-SP2, we explained in <a href="https://lizards.opensuse.org/2019/12/05/yast-sprint-90/">our previous blog post</a> that those versions of SUSE Linux Enterprise (SLE) and all its associated products will be distributed in two new kinds of media &#8211; Full and Online. The Full Media contains many repositories and the system can be installed without network connectivity. The Online Media is similar to the openSUSE&#8217;s net installer, it contains no repository and it must download everything from the network. The big difference with openSUSE is that SLE systems need to be registered in order to have access to remote repositories.</p>
<p>But apart from installation, those two new media types can also be used to upgrade an existing system&#8230; at least after all the improvements implemented during the latest sprint.</p>
<p>In the case of the Online Media, if the system is registered the upgrade process will switch all repositories to point to their corresponding versions at the SUSE Customer Center (SCC) and will get the new software from there. If the system is not registered, the upgrade process is cancelled and the user is advised to either register the system or use the Full Media.</p>
<p>The Full Media can be used to upgrade any system, registered or not,  but the process is different in each case. For a non-registered system, the repositories will be switched to the ones included in the media and the system will be upgraded from there. For registered systems the process is the same that with the Online Media, so the software will be fetched from the remote repositories at the SUSE Customer Center.</p>
<p>Last but not least, we also made sure the process with both medias works with an AutoYaST upgrade (yes, you can also use AutoYaST to perform an unattended upgrade, in addition to the better known unattended installation). For a registered system, we simplified the   procedure as much as possible and it only needs access to SCC and an empty AutoYaST profile. For non-registered systems it is a little bit more complex because the profile must specify which repositories from the media should be used for the upgrade. But other than that, the process works quite smooth.</p>
<p>And, of course, we used the opportunity to improve the unit test coverage of the code and to improve the documentation, including the profiles we used for testing.</p>
<h3>The Snapper Plugin for ZYpp Becomes More Compact and Future-proof</h3>
<p><a href="http://snapper.io/">Snapper</a> lets you make filesystem snapshots. It has a companion, <code>snapper-zypp-plugin</code>, a plugin for <a href="https://en.opensuse.org/Portal:Libzypp">ZYpp</a> that makes snapshots automatically during commits. See the &#8220;zypp&#8221; descriptions in this listing:</p>
<pre><code>
# snapper list

  # | Type   |Pre # | Date                     | User | Used Space | Cleanup  | Description  | Userdata     
----+--------+------+--------------------------+------+------------+----------+--------------+-------------
  0 | single |      |                          | root |            |          | current      |              
[...]
824 | pre    |      | Tue Dec 17 10:00:27 2019 | root |  16.00 KiB | number   | zypp(zypper) | important=no
826 | post   |  824 | Tue Dec 17 10:02:19 2019 | root |  16.00 KiB | number   |              | important=no
827 | single |      | Tue Dec 17 11:00:01 2019 | root |  16.00 KiB | timeline | timeline     |             
828 | single |      | Tue Dec 17 11:00:01 2019 | root |  16.00 KiB | timeline | timeline     |             </code></pre>
<p>To make our enterprise products supportable for a looong time, we have rewritten this plugin to C++, starting with snapper-0.8.7. (The original Python implementation is not dead, it is resting in old Git commits.)</p>
<p>As a result, <a href="https://www.regular-expressions.info/python.html">Python regular expressions</a> are no longer supported in the <code>/etc/snapper/zypp.conf</code> file. <a href="https://www.regular-expressions.info/posix.html">POSIX extended regular expressions</a> work instead, which should work sufficiently well for the purpose of package name matching. <a href="http://man7.org/linux/man-pages/man7/glob.7.html" rel="nofollow">Shell patterns</a> continue working unchanged.</p>
<h3>Happy new year!</h3>
<p>During the following three weeks, the YaST team will interrupt the usual sprint-based development pace. That also means, almost for sure, that we will not publish any blog post about the development of YaST until mid January of 2020. So we want to take this opportunity to wish you a happy new year full of joy and Free Software.</p>
<p>See you soon and make sure to start the year with a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/12/18/yast-sprint-91/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of the Latest YaST Development Sprints</title>
		<link>https://lizards.opensuse.org/2019/06/25/yast-sprints-77-79/</link>
		<pubDate>Tue, 25 Jun 2019 09:33:05 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13843</guid>
		<description><![CDATA[May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are a geographically distributed team), many team members enjoyed vacations (it&#8217;s spring time in Europe), we organized a Leap 15.1 <a href="https://lists.opensuse.org/opensuse-marketing/2019-06/msg00002.html">launch party with technical talks in Gran Canaria</a>&#8230; and we ran out of energy to also publish our traditional sprint reports in this blog.</p>
<p>We will try to fix that with this blog post in which we will try to summarize some highlights from the latest three development sprints, namely the 77th, 78th and 79th. So be warned, this is going to be a loooong post.</p>
<h3>Support for Multi-device Btrfs File Systems</h3>
<p>We have been working steadily during the three sprints in implementing all the necessary bits to offer a good experience installing and upgrading an (open)SUSE system on top of several block devices by means of Btrfs RAID capabilities. That includes support in the Partitioner, in AutoYaST, in the storage guided setup and more.</p>
<p>We decided that all that deserved a separate blog post. You can find here: <a href="https://lizards.opensuse.org/?p=13814">Getting Further with Btrfs in YaST</a>.</p>
<h3>More Improvements for the Partitioner</h3>
<p>That blog post mentions a couple of changes in the Partitioner that, although initially motivated by the introduction of multi-device Btrfs, go beyond that scope and are aimed to make the all the lists of devices more useful and informative.</p>
<p>Traditionally the Partitioner used two separate columns &#8220;Type&#8221; and &#8220;FS Type&#8221; to describe the function of every device. That was sometimes hard to understand. Moreover, quite often the important information (like the relationship between a partition and its RAID or LVM) was simply missing in those tables.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png" alt="Traditional devices table in the Partitioner" width="300" height="214" class="aligncenter size-medium wp-image-13846" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-768x549.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>We have merged those columns into a more informative one that identifies the devices and also gives an overview of the relationship between them at first glance. In addition, the table displaying all the system devices now includes multi-device file systems.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png" alt="Revamped table of devices" width="300" height="215" class="aligncenter size-medium wp-image-13847" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Mitigating CPU vulnerabilities from YaST</h3>
<p>If you are interested in security (or simply if you have not been living under a rock) you probably have heard about CPU based attacks like Spectre or Meltdown. The last year has seen a number of these CPU issues, all of them coming along with their own kernel options to change the Linux behavior in order to mitigate the security risks at a price of some performance loss.</p>
<p>However, not all users know what affects their architectures or particular models of CPU and which kernel parameters to use to gain more performance if the security risk is acceptable for them.</p>
<p>For that purpose, a new meta-option called &#8220;mitigations&#8221; was added to the Linux kernel. It allows to enable and disable at once several of those mitigations that prevent CPU attacks. See more information <a href="https://www.suse.com/support/kb/doc/?id=7023836">at this document</a> published by SUSE.</p>
<p>We find that kernel option very useful, so we decided to provide an easy way for users to adjust it. Now the YaST bootloader screen contains a new setting which offers three pre-defined options and even a fourth one to let the users fine-tune the settings on their own. As you can see in the screenshot below, we have included extensive documentation in the help dialog, so you will not need to search for this blog post in the future.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-13849" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It is also possible to modify this option directly from the installation summary. For that purpose, the &#8220;Firewall&#8221; section was renamed to &#8220;Security&#8221; and it now includes the possibility to tweak the CPU mitigation options, alongside the traditional settings for firewall and opening the SSH port.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png" alt="CPU mitigations in the installation summary" width="300" height="225" class="aligncenter size-medium wp-image-13850" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Another success story of (open)SUSE offering a promptly solution for our users to easily adapt their systems to ever-changing complex needs.</p>
<h3>Memory Optimizations during Installation</h3>
<p>While the release of openSUSE Leap 15.1 was approaching, we got several bug reports stating the YaST installer used to freeze when using only 1GB RAM with online repositories (see <a href="https://bugzilla.suse.com/show_bug.cgi?id=1136051">bug#1136051</a>).</p>
<p>It turned out that at some point YaST loads the details of <em>all available</em> packages. And that needs a lot of memory if you enable the online repositories during installation. For example the OSS Leap repository contains more than 35.000 binary packages!</p>
<p>The problem was in the YaST internal API accessing the package manager library (<a href="https://github.com/openSUSE/libzypp">libzypp</a>). It did not allow to filter the objects, YaST had to read <em>all</em> objects and then do the filtering in the code. And for each object it returned <em>all</em> attributes, even those which were not needed (like the package description, full RPM name, etc&#8230;). All that data required a lot of memory.</p>
<p>To fix that we have introduced new API calls that allow specifying more filters (like return all selected packages, packages from specific repository,&#8230;) and you can set which attributes should be returned. If you need to know only the name and the version then you will not get the other useless attributes. And to ease the usage of the new API in YaST we provided a nice object oriented wrapper written in Ruby.</p>
<p>This optimization saves a lot of memory, 1GB of RAM should be enough for future installations with the online repositories, even if they grow even more.</p>
<p>Unfortunately, we were only able to diagnose the problem and provide a solution a couple of weeks before the official release of Leap 15.1. Introducing a change in such a sensitive part of the installer was considered too risky (it would have invalidated many of the tests that had been already performed) so the installer included in openSUSE Leap 15.1 is still memory hungry if online repositories are used. For that release, we simply increased the official memory requirements to 1.5 GiB.</p>
<h3>Online Migration from openSUSE Leap 15.1 to SLES15-SP1</h3>
<p>For openSUSE Leap 15.0 it was only possible to migrate from Leap to SLES (SUSE Linux Enterprise Server) manually (see the <a href="https://www.suse.com/documentation/sles-15/book_sle_upgrade/data/sec_upgrade-online_opensuse_to_sle.html">documentation</a>). With Leap 15.1 the goal was to also support a migration using YaST. But we got a bug report saying the online migration from openSUSE Leap 15.1 to SLES15-SP1 displayed a wrong migration summary and didn&#8217;t work well.</p>
<p>It turned out that YaST needed some small fixes to support this properly. The main problem was that YaST did not expect that the base product or the package vendor can be changed during online migration, so far it was only possible to upgrade to the next SLE service pack level. But that is fixed now.</p>
<p>Wanna try the migration from openSUSE Leap 15.1 to SLES15-SP1? Then follow these steps.</p>
<ol>
<li>Install the <code>yast2-registration</code> and <code>yast2-migration</code> packages in the Leap 15.1 installation</li>
<li>Make sure the latest online updates are installed (to install the fixes mentioned above)</li>
<li>Start the YaST registration module and register the openSUSE Leap 15.1 product using your registration key</li>
<li>Then start the YaST migration module, select the migration to SLES15-SP1</li>
<li>(There might be reported some package dependency issues in the migration summary, go to the package manager and resolve them. Usually removing the old openSUSE package is the right solution.)</li>
<li>Start the migration, the SLES packages will be downloaded and installed</li>
<li>At the end the system will be rebooted to start the freshly installed SLES, enjoy! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></li>
<li>(It is recommended to review the orphaned packages, leftovers from the Leap installation, with the command <code>zypper packages --orphaned</code> and possibly remove them.)</li>
</ol>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png" alt="From Leap to SLES via YaST" width="300" height="207" class="aligncenter size-medium wp-image-13851" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-768x530.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png 872w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Please note that only minimal server installations of Leap are supported for upgrade, full installations especially with third party packages might not work correctly.</p>
<h3>Why Cannot I Read the Logs?</h3>
<p>Long time ago, the logs of any Linux system were spread over several files living under the <code>/var/log</code> subdirectory. YaST offers its &#8220;System Log&#8221; module to inspect those files in a convenient way. Since the introduction of Systemd and its journal, that information has been gradually moved to this new mechanism by default. And YaST offers its &#8220;Systemd Journal&#8221; module to inspect and query that journal.</p>
<p>Both YaST modules can be executed by any user in the system, not only by root. That&#8217;s intentional because both the Systemd journal and the traditional Linux log files can register information targeted to unprivileged users. But there was some room for improvement in the error message displayed by both modules when such users were trying to access to protected information.</p>
<p>This is how the new more explanatory message looks in the &#8220;System Log&#8221; module.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png" alt="Explanatory pop-up for log viewer" width="300" height="235" class="aligncenter size-medium wp-image-13861" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png 527w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And this is the extended message for &#8220;Systemd Journal&#8221;, that now mentions the <code>systemd-journal</code> user&#8217;s group.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/journal.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png" alt="Improved message in the journal viewer" width="300" height="158" class="aligncenter size-medium wp-image-13862" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/journal.png 363w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Another Day at the YaST Office: Adapting to Changes</h3>
<p>As we usually remark in our blog posts, a significant part of the work of the YaST Team consist in keeping YaST in sync with the constant changes in the underlying system. Of course, these sprints were not an exception in that regard. Without trying to do an exhaustive list, let&#8217;s take a look to some of those adaptations since the mentioned underlying changes may be interesting for some readers.</p>
<p>Turns out Systemd developers has decided to change the list of possible states for Systemd services. The <code>systemd-sigabrt</code> state is obsolete and a new <code>systemd-watchdog</code> one was added. In the YaST team we learned some time ago that the list of Systemd states changes more often than what most people would expect. As a consequence we have an automated check to detect these situations. The bell ringed, we adapted the code and everything keeps working.  </p>
<p>Systemd is not the only technology that keeps evolving. Quite some time ago, <a href="https://www.suse.com/documentation/sles-15/book_rmt/data/book_rmt.html">RMT</a> replaced <a href="https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html">SMT</a> as the default proxy technologies for the <a href="https://scc.suse.com/">SUSE Customer Center</a>. Although both has coexisted for quite some time, from SLE-15 onward only RMT is offered. Thus we have adapted all the references to SMT that still existed in YaST. From now on, only RMT is mentioned to avoid confusion.</p>
<p>Another common adaptation we have to perform in YaST is adjusting some module when the output of the command it runs under the hood has changed. Recently we found out the developers of the command <code>iscsiadm</code> has decided to use more than one exit code to indicate a successful execution (traditionally, only zero should mean that). After a long discussion, we decided to adapt YaST iSCSI to also be happy with the error code 21. What means for you? That future versions of YaST iSCSI should work faster in some situations, since the confusion will not longer result in a timeout. </p>
<h3>YaST Firstboot: a Better Example File</h3>
<p>Those were just some example of the many adaptations we did lately for changes in the system. But not all adjustments are motivated by external changes. We also realized the example configuration file provided by YaST Firstboot (at <code>/etc/YaST2/firstboot.xml</code>) needed some love. Due to the nature of YaST Firstboot, that file should be customized before using YaST Firstboot. But providing an example file with three different steps about acceptance of licenses (two of them enabled and the third one disabled) and other inconsistencies was definitely not helping anyone to understand how to use the module.</p>
<p>In fact, the status of that default example configuration and of the documentation managed to confuse even SUSE&#8217;s quality assurance team. So we improved the example file shipped in the package to make it more realistic and we also updated the YaST Firstboot documentation to clarify how to use that file. Because not all improvements are always done by coding.</p>
<h3>Leap 15.1&#8217;s Most Annoying Bug: Create Home as Btrfs Subvolume</h3>
<p>As all openSUSE users should know, for every Leap release a page is created in the openSUSE wiki listing the so-called Most Annoying Bugs. Leap 15.1 was a very smooth release and this time <a href="https://en.opensuse.org/openSUSE:Most_annoying_bugs_15.1">the corresponding list</a> contains only one bug&#8230; and it&#8217;s a YaST one. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f641.png" alt="&#x1f641;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>In an installed system, when YaST was creating a new user it was always trying to create its home directory as a Btrfs subvolume. Even in cases in which that was impossible. For example, if the directory to be created was not in a Btrfs file system.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png" alt="Writing user error" width="300" height="224" class="aligncenter size-medium wp-image-13865" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-768x572.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Fortunately, the bug didn&#8217;t affect the installation process or AutoYaST. We created a fix that was quickly available as a maintenance update. So make sure your openSUSE system is updated before trying to create new users with YaST.</p>
<h3>YaST Network refactoring: status report</h3>
<p>Since we submitted the first bits of the yast2-network refactoring by the end of April, we have made quite some progress in this area. Although it is still an ongoing effort, we would like you to give you an update on the current state.</p>
<p>We might say that we have been working on two different areas the user interface implementation and the future data model.</p>
<p>About the user interface, the team has improved the code quite a lot to make it easier to maintain and extend. We have introduced some classes to de-couple the widgets from the data, and it pays off. Additionally, we have fixed some bugs (many of them related to validations), simplified the process of adding new devices and reorganized the hardware tab.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png" alt="New hardware tab in YaST Network" width="300" height="239" class="aligncenter size-medium wp-image-13854" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-768x612.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png 844w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Regarding the internal data model, we have been thinking about the best way to represent network configuration in an agnostic way so, in the future, we can not only support <a href="https://en.opensuse.org/Portal:Wicked" rel="nofollow">Wicked</a> but other options too (for the time being, the NetworkManager support is quite limited). If you are curious about the details, we have added a <a href="https://github.com/yast/yast-network/blob/network-ng/doc/network-ng.md">document describing the approach</a> to the repository.</p>
<p>The new data model is already being used to handle DNS and Routing configuration. So if you are using Tumbleweed you have been already using the new network code for some weeks, including the UI enhancements presented in our <a href="https://lizards.opensuse.org/2019/04/30/highlights-of-yast-development-sprint-76/">latest post</a>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png" alt="New network routing dialog" width="300" height="236" class="aligncenter size-medium wp-image-13748" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png 573w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Although the data model is so far only used in the mentioned parts, the plan is to submit to Tumbleweed a heavily refactored UI layer during next sprint. So stay tuned.</p>
<h3>Added Appstream Metadata to the YaST Packages</h3>
<p>The YaST package manager is not the only software manager in the (open)SUSE distributions. There are some more, like Discover in KDE or the GNOME software manager, not to mention the online <a href="https://software.opensuse.org/appstore">openSUSE appstore</a>.</p>
<p>While the YaST manager is <em>package</em> oriented, those other software managers are <em>application</em> oriented. That makes a huge difference, especially for the beginner users.</p>
<p>The full list of packages does not only include the applications (basically anything a user can start from the desktop), but also shared libraries, pieces that provide functionality for other applications or basic components needed for the system to work. With so many software packages (the openSUSE OSS repository contains over 35.000 of them!) it&#8217;s sometimes hard to find the software you need unless you know what you are looking for.</p>
<p>To offer an application-oriented view on top of all that, the application managers need some special data describing the applications inside the packages. The data are located in the <code>/usr/share/metainfo/*.xml</code> files, if you are interested in the technical details check the <a href="https://www.freedesktop.org/wiki/Distributions/AppStream/" rel="nofollow">AppStream documentation</a> provided by the Freedesktop.org.</p>
<p>Our absolutely awesome community contributor <a href="https://github.com/hellcp">Stasiek Michalski</a> (more famous by his nickname <a href="https://lcp.world/">lcp</a>) realized YaST was not offered in those application managers and decided to fix it. So he created an XML generator which collects the data from YaST packages and automagically generates the metainfo XML file needed by the other software managers.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png" alt="YaST in GNOME Software" width="300" height="271" class="aligncenter size-medium wp-image-13856" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-768x693.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-1024x924.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As a result, the Gnome Software Manager, Discover and other software managers will offer YaST in Tumbleweed just as any user-oriented application. Thanks lcp!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png" alt="YaST in Discover" width="300" height="244" class="aligncenter size-medium wp-image-13857" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-768x624.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-1024x832.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>AutoYaST Pre-install Scripts &amp; Storage</h3>
<p>AutoYaST has a special feature to allow users to customize the installation process and take control in different stages of the installation. For that, the AutoYaST profile offers a section where you can insert your custom scripts. There are <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#createprofile.scripts">four types of scripts</a>: <em>pre-scripts</em>, <em>postpartitioning-scripts</em>, <em>chroot-scripts</em>, <em>post-scripts</em> and <em>init-scripts</em>.</p>
<p>For the particular case of <em>pre-scripts</em>, <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#pre-install.scripts">the documentation</a> states that &#8220;<em>It is also possible to change the partitioning in your pre-script</em>&#8220;. That means, for example, you could use a script to create a new partition or to configure some kind of technology. Therefore, it would be very convenient to re-analyze the storage devices after running the user pre-scripts. In fact, that was the default behavior in the old storage stack, but the new one was slightly modified to only re-analyze the system under certain conditions.</p>
<p>But turns out some SLE customers were using pre-scripts to configure the behavior of <a href="https://en.wikipedia.org/wiki/Linux_DM_Multipath">multipath</a> and those changes were not being noticed by AutoYaST.</p>
<p>The solution was quite trivial. We simply decided to always perform a new storage re-analysis after the AutoYaST pre-scripts. We did not find strong reasons to not do it and there should not be significant performance penalty.</p>
<p>And, for the specific case of multipath, YaST now copies some configuration files (e.g., <em>/etc/multipath.conf</em> and <em>/etc/multipath/bindings</em>) to the target system when performing a new installation. Otherwise, the installed system would not contain the configuration applied during the installation.</p>
<h3>Clarifying the Usage of Software Management Options</h3>
<p>Our software manager is one of the most complex YaST modules, which makes some aspects of its usage not fully obvious for some users. You may have even notice that is the only YaST module in which the interface is clearly different when executed in text and graphical mode. Specially the menu at the top of the interface, which is organized in different sections.</p>
<p>Some users where confused by the fact of some options not being persisted between different executions of the module. Those options are there to modify the current operation of the module, not to change the configuration of package management in the system.</p>
<p>When executed in text mode that was clear because such options where labeled as &#8220;<i>temporary change</i>&#8221; but the graphical mode didn&#8217;t have any indication about it. As you can see in the following screenshot, that&#8217;s fixed now.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png" alt="Temporary options in YaST Software" width="300" height="192" class="aligncenter size-medium wp-image-13875" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png 649w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Product License Hard to Understand? Try Another Language!</h3>
<p>Some user reported that in the text-mode installation it was impossible to switch the language of a product license. Although during graphical installation everything works flawlessly, in text mode the language switching widget was there&#8230; but disabled.</p>
<p>The point is that such behavior was not exactly a bug. It was in fact done on purpose. We decided to prevent such language change some time ago because on the Linux console we&#8217;re not able to display the characters of many languages. Hopefully some of our usual reader have just shout &#8220;that&#8217;s not true!&#8221; <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Those users remember that in the <a href="https://lizards.opensuse.org/2018/11/20/yast-sprint-67/">report of our 67th sprint</a> we explained that now we always use <code>fbiterm</code> when installing in text mode in order to be able to display characters of almost every language.</p>
<p>We are now able to display all languages that currently have license translations, so we have enabled the language switching widget and now both graphical installation and text-based one deliver an equivalent user experience.</p>
<h3>More about languages</h3>
<p>This is not the only change related to internationalization we did in these sprints. We also added a specific warning message for situations in which YaST is used to change the language of the system but there is no repository containing the needed translation packages. Something that obviously only affects users configuring system in very restricted environments.</p>
<p>As you can see in this and other recent reports, we have to deal relatively often with difficulties related to translation and internationalization. To reduce the effect of those problems on our final users, we also added some extra mechanisms to detect internationalization errors introduced during development. Hopefully that will mean that in future reports the space dedicated to comment language-related problems gets shorter and shorter. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </p>
<h3>And that was just a summary!</h3>
<p>As long as this post looks, there are many interesting things we have done in these weeks we left out, intentionally or not. We definitely should avoid skipping three reports in a row in the future!</p>
<p>This week it&#8217;s <a href="https://hackweek.suse.com/">Hack Week</a> at SUSE, which means regular YaST development will be put on hold&#8230; or will turn into something completely different. You never know what the result of a Hack Week can be!</p>
<p>But in any case we will go back to our sprint-based pace in August. So expect a new blog post in three weeks. See you then!</p>
]]></content:encoded>
			</item>
		<item>
		<title>zypper-upgraderepo 1.2 is out</title>
		<link>https://lizards.opensuse.org/2019/02/23/zypper-upgraderepo-1-2-is-out/</link>
		<comments>https://lizards.opensuse.org/2019/02/23/zypper-upgraderepo-1-2-is-out/#comments</comments>
		<pubDate>Sat, 23 Feb 2019 15:26:03 +0000</pubDate>
		<dc:creator><![CDATA[FabioMux]]></dc:creator>
				<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[zypper]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13401</guid>
		<description><![CDATA[Fixes and updates applied with this second minor version improved and extended the main functions, let&#8217;s see what&#8217;s new. If you are new to the zypper-upgraderepo plugin, give a look to the previous article to better understand the mission and the basic usage. Repository check The first important change is inherent the way to check [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Fixes and updates applied with this second minor version improved and extended the main functions, let&#8217;s see what&#8217;s new.</p>
<p>If you are new to the zypper-upgraderepo plugin, give a look to the <a href="//lizards.opensuse.org/2018/08/07/zypper-upgraderepo-plugin-is-here/">previous article</a> to better understand the mission and the basic usage.</p>
<h3>Repository check</h3>
<p>The first important change is inherent the way to check a valid repository:</p>
<ul>
<li>the HTTP request sent is <em>HEAD</em> instead of <em>GET</em> in order to have a more lightweight answer from the server, being the HTML page not included in the packet;</li>
<li>the request point directly to the <em>repodata.xml</em> file instead of the folder, that because some server security setting could hide the directory listing and send back a 404 error although the repository works properly.</li>
</ul>
<h3>Check just a few repos</h3>
<p>Most of the times we want to check the whole repository&#8217;s list at once, but sometimes we want to check few of them to see whether or not they are finally available or ready to be upgraded without looping through the whole list again and again. That&#8217;s where the <em>&#8211;only-repo</em> switch followed by a list of comma-separated numbers comes in help.</p>
<div id="attachment_13541" style="width: 310px" class="wp-caption alignnone"><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120602.png"><img class="size-medium wp-image-13541" src="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120602-300x182.png" alt="--only-repo switch" width="300" height="182" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120602-300x182.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120602-768x466.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120602.png 992w" sizes="(max-width: 300px) 100vw, 300px" /></a><p class="wp-caption-text">&#8211;only-repo switch</p></div>
<h3>All repo by default</h3>
<p>The disabled repositories now are shown by default and a new column highlights which of them are enabled or not, keeping their number in sync with the <code>zypper lr</code> output. To see only the enabled ones just use the switch <em>&#8211;only-enabled.</em></p>
<div id="attachment_13540" style="width: 310px" class="wp-caption alignnone"><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120224.png"><img class="size-medium wp-image-13540" src="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120224-300x182.png" alt="Table view" width="300" height="182" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120224-300x182.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120224-768x466.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_120224.png 992w" sizes="(max-width: 300px) 100vw, 300px" /></a><p class="wp-caption-text">Table view</p></div>
<h3>Report view</h3>
<p>Beside the table view, the switch <em>&#8211;report</em> introduce a new pleasant view using just two columns and spanning the right cell to more rows in order to improve the number of info and the reading quality.</p>
<div id="attachment_13542" style="width: 310px" class="wp-caption alignnone"><a href="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_160739.png"><img class="size-medium wp-image-13542" src="//lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_160739-300x182.png" alt="Report view" width="300" height="182" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_160739-300x182.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_160739-768x466.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/01/Screenshot_20181228_160739.png 992w" sizes="(max-width: 300px) 100vw, 300px" /></a><p class="wp-caption-text">Report view</p></div>
<h3>Other changes</h3>
<p>The procedure which tries to discover an alternative URL now dives back and forth the directory list in order to explore the whole tree of folders wherever the access is allowed by the server itself. The side effect is a general improvement also in repo downgrade.</p>
<p>The output in upgrade mode is now verbose and shows a table similar to the checking one, giving details about the changed URLs in the details column.</p>
<p>The server timeout error is now handled through the switch <em>&#8211;timeout</em> which allows tweaking the time before to consider an error any late answer from the server itself.</p>
<h3>Final thoughts and what&#8217;s next</h3>
<p>This plugin is practically completed, achieving all the goals needed for its main purpose no other relevant changes are scheduled, so I started thinking of other projects to work in my spare time.</p>
<p>Among them, there is one I am interested in: bring the power of <a href="http://software.opensuse.org">openSUSE software search page</a> to the command line.</p>
<p>However, there are some problems:</p>
<ul>
<li>This website doesn&#8217;t implement any web API so will be a lot of scraping job;</li>
<li>There are missing packages while switching from the global research (selecting <em>All distribution</em>) to the specific distribution;</li>
<li>Packages from Packman are not included.</li>
</ul>
<p>I have already got some ideas to solve them and did lay down several lines of code, so let&#8217;s see what happens!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/02/23/zypper-upgraderepo-1-2-is-out/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 67</title>
		<link>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/</link>
		<comments>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/#comments</comments>
		<pubDate>Tue, 20 Nov 2018 16:16:47 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13484</guid>
		<description><![CDATA[Time flies and another development sprint has finished for the YaST team. During it we have focused on improving the installation process, refining it and adding new features to unleash new possibilities. That includes: More options to configure Kubic during installation. Several improvements in the storage proposal. Easing the network configuration and the usage of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Time flies and another development sprint has finished for the YaST team. During it we have focused on improving the installation process, refining it and adding new features to unleash new possibilities. That includes:</p>
<ul>
<li>More options to configure Kubic during installation.</li>
<li>Several improvements in the storage proposal.</li>
<li>Easing the network configuration and the usage of online repositories in openSUSE.</li>
<li>Improving installation in text mode for CJK and other languages.</li>
<li>Configuring SSH access during installation and in a running system.</li>
<li>And many other small fixes here and there!</li>
<p>Many of these features will be already available in openSUSE Tumbleweed during November (the sprint just finished November 16th and the integration process usually takes some days), others will be visible for the first time in the next SLE-15-SP1 and Leap 15.1 Alpha versions.</p>
<h3>New Dialogs in the openSUSE Kubic Installation</h3>
<p>The <a href="https://www.suse.com/products/caas-platform/">SUSE CaaSP</a> and the <a href="https://kubic.opensuse.org/">openSUSE Kubic</a> products got a new installation workflow some time ago. Originally they used a specific installation workflow (a single all-in-one configuration dialog), but the problem was that many openSUSE/SLE installation features were missing because the installer code was completely different.</p>
<p>That has been changed some time ago to use the usual installation as in standard SLE or openSUSE products. You can read the details about the new installation workflow at the <a href="https://en.opensuse.org/Kubic:CaaSPInstallationComparision#Combined_Workflow">Kubic wiki page</a>.</p>
<p>However, the CaaSP or Kubic products required some more specific settings depending on the  selected role. During this sprint we have added the corresponding steps to the installation.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/kubic.gif" alt="New installation steps for openSUSE Kubic" /></p>
<p>Currently the extra dialog only asks for the NTP server address, but some more options can be added later.</p>
<h3>Improve Textmode Support for CJK and Other Languages</h3>
<p>YaST is able to cope with many languages even when running in textmode. When a user wants to run the installer in textmode using some specific languages -like Chinese, Japanese or Korean-, YaST will use a special terminal emulator called <code>fbiterm</code> which is able to display the characters which are needed in those languages.</p>
<p>Now, instead of keeping two different approaches depending on the language, YaST will try to use this special terminal emulator whenever is possible for all text based installations. Unfortunately, there is a small set of languages that are not properly handled by fbiterm. In those cases, YaST will inform the user about the problem and it will fall back to English.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/japanese.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/japanese-300x225.png" alt="YaST installing SLE-15-SP1 in Japanese" width="300" height="225" class="aligncenter size-medium wp-image-13487" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As a side effect of this unification, the font used during the textmode installation has changed for all the languages that didn&#8217;t used <code>fbiterm</code> in the past. So your SUSE or openSUSE installation may now look slightly different.</p>
<h3>Storage proposal: playing nicely with Intel Rapid Start Technology</h3>
<p><a href="https://software.intel.com/en-us/articles/what-is-intel-rapid-start-technology">Intel Rapid Start Technology</a> (shorted as IRST) enables systems to quickly resume from deep sleep (e.g. if your battery runs out). It&#8217;s a firmware-driven technology that relies on the existence of a special partition located on a SSD (solid state device).</p>
<p>But our partitioning proposal (the so-called Guided Setup) was not aware of the important role of such partition, so it sometimes proposed to delete it in order to use the freed space for installing (open)SUSE on top.</p>
<p>We have improved that and now the IRST partition will only be deleted as a last resort, if deleting all other allowed partitions in the disk is still not enough to make the new system fit. Moreover, an IRST partition located in the same disk than a Windows system will only be deleted if the user explicitly allows the storage proposal to delete that Windows installation.</p>
<h3>Running the storage proposal on top of software RAIDs and USB devices</h3>
<p>But that&#8217;s not the only improvement done in the area of the partitioning guided setup. We have also broadened its usefulness by allowing it to be used on top of new kinds of devices.</p>
<p>First of all, it&#8217;s now possible to execute the guided setup on top of a software MD RAID. For that, the candidate RAIDs has to fulfill one of two conditions: to contain a partition table or to be completely empty (which includes not being formatted, encrypted or used for any other purpose). That is not only another step to take advantage of the relatively recent capability of YaST to partition software RAIDs (thanks to <code>libstorage-ng</code>) but also a very natural way to support the usage of Dell EMC PowerEdge RAID controllers S130 and S140, which offer an hybrid solution based on software RAIDs but backed up by a firmware-driven configuration.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/md_raid.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-300x208.png" alt="Partitioning proposal on top of a software MD RAID" width="300" height="208" class="aligncenter size-medium wp-image-13489" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-300x208.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-768x533.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid.png 803w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Almost for the same price, we decided that it was time to offer the available USB devices as candidates for the guided setup, even when there are also non-USB candidates. Excluding, of course, the installation media (except when performing a network-based installation, in that case the USB device can be reused to install the system).</p>
<p>As usual, these features will be soon available in openSUSE Tumbleweed, as well as in the next stable versions of openSUSE Leap (15.1) and SUSE Linux Enterprise (SLE-15-SP1).</p>
<h3>Fine-tuning the initial storage proposal</h3>
<p>All the described changes open new possibilities for the users to decide where to execute the storage proposal. But as our users already know, when the installer reaches the storage proposal step for first time (before the user has had the chance to run the Guided Setup or the Expert Partitioner), an initial proposal is automatically calculated and displayed. This proposal is performed without user intervention, and all necessary information is taken from the control file of the current product. For example, whether to create a separate home, or whether to enable snapshots for root, etc.</p>
<p><a href="https://lizards.opensuse.org/2018/11/07/highlights-of-yast-development-sprint-66/#partitioning-proposel-uses-a-single-disk" rel="nofollow">During the previous sprint</a>, this initial proposal was already improved to make an attempt over each individual disk instead of considering all disks together. Now we have improved this behavior to not discard the first disk so early, even if that means getting a smaller (open)SUSE system.</p>
<p>For example, let&#8217;s image we have a system with a first small SSD disk of 40 GiB and a second big Hard Disk of 1 TiB, which is a relatively common configuration for laptops. Since the first disk is too small to allocate a system with the optimal partition sizes and a separate <code>/home</code> partition, the installer used to switch to the second disk, in which it could propose a root partition of the recommended size to use Btrfs snapshots (50 GiB) and a partition for <code>/home</code> bigger than the 40GiB specified as minimum for it in the product description.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-old.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-old-300x228.png" alt="Initial storage proposal before the latest change" width="300" height="228" class="aligncenter size-medium wp-image-13490" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-old-300x228.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-old.png 511w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Now, more attempts will be performed in the first disk before giving up and moving to the next one. So, when the proposal is not possible with the desired sizes and with all the optional devices enabled, it will try to disable some optional settings and to relax the size requirements (using the minimum sizes instead of the recommended ones). In the following screenshot you can see the result of this adjusted initial proposal.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-new.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-new-300x222.png" alt="Initial storage proposal after the latest change" width="300" height="222" class="aligncenter size-medium wp-image-13491" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-new-300x222.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-new.png 508w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Tumbleweed: Add Online Repositories during Installation</h3>
<p>We added a step in the installation workflow to enable online repositories. This means you can now get the latest packages installed immediately during installation instead of installing older versions from the installation media first and later updating them to the latest versions from the openSUSE servers.</p>
<p>Also, because of disk space limitations, the installation media don&#8217;t contain all the packages that openSUSE provides and thus not all <i>system roles</i>; some of the less frequently used desktops, for example, had not been available in the <i>role selection</i> (formerly <em>desktop selection</em>) dialog. With online repositories, they are now available immediately during installation.</p>
<p>For details, see the corresponding <a href="https://github.com/yast/yast-packager/pull/385">pull request</a>.</p>
<h3>Choosing the network backend</h3>
<p>And more changes to the installer you will be able to enjoy very soon in openSUSE Tumbleweed and also in the upcoming openSUSE Leap 15.1. Now it&#8217;s possible to choose the network backend, <i>wicked</i> or NetworkManager, to be used in the final installed system from the Network proposal.</p>
<p>As easy as a click on a hyperlink, as you can see in the images below.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked-300x169.png" alt="New shortcut to change the network backend" width="300" height="169" class="aligncenter size-medium wp-image-13496" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked-300x169.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked.png 555w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Managing SSH public keys</h3>
<p>When you want to access to a system via SSH, it is a good practice to use public key based authentication instead of the common password-based approach. For that reason, we have added support to handle authorized SSH public keys in the <em>user and group management module</em>, also known as the <em>users module</em>.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/ssh-keys.gif" alt="Configuring SSH in yast2-users" /></p>
<p>Additionally, you will be able to set up a public key for the root user at installation time, something that can be especially handy for products like the SUSE CaaS Platform.</p>
<h3>And it keeps moving!</h3>
<p>The YaST crew keeps working hard on fixing bugs and, specially, on building new features for everybody to enjoy in the upcoming versions of all the products of the SLE and openSUSE families. So, as much as we would like to keep talking to you all about all the improvements&#8230; it&#8217;s time to go back to coding! See you again in two weeks with a new report.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
		<item>
		<title>zypper-upgraderepo-plugin is here</title>
		<link>https://lizards.opensuse.org/2018/08/07/zypper-upgraderepo-plugin-is-here/</link>
		<comments>https://lizards.opensuse.org/2018/08/07/zypper-upgraderepo-plugin-is-here/#comments</comments>
		<pubDate>Tue, 07 Aug 2018 18:55:25 +0000</pubDate>
		<dc:creator><![CDATA[FabioMux]]></dc:creator>
				<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[zypper]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13239</guid>
		<description><![CDATA[zypper-upgraderepo-plugin adds to zypper the ability to check the repository URLs either for the current version or the next release, and upgrade them all at once in order to upgrade the whole system from command line. This tool started as a personal project when a day I was in the need to upgrade my distro [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>zypper-upgraderepo-plugin adds to zypper the ability to check the repository URLs either for the current version or the next release, and upgrade them all at once in order to <a href="https://en.opensuse.org/SDB:System_upgrade">upgrade the whole system from command line</a>.</p>
<p>This tool started as a personal project when a day I was in the need to upgrade my distro quicker than using a traditional ISO image, Zypper was the right tool but I got a little stuck when I had to handle repositories: some of them were not yet upgraded, others changed slightly in the URL path.</p>
<p>Who knows how <em>to Bash</em> the problem is not exactly a nightmare, and so I did until I needed to make a step further.</p>
<p>The result is <a href="https://rubygems.org/gems/zypper-upgraderepo">zypper-upgraderepo</a> Ruby gem which can be integrated as a zypper plugin just installing the zypper-upgraderepo-plugin package.</p>
<h3>Installing zypper-upgraderepo-plugin</h3>
<p>Installing <em>zypper-upgraderepo-plugin</em> is as easy as:</p>
<ol>
<li>Adding my repo:<br />
<code>sudo zypper ar https://download.opensuse.org/repositories/home:/FabioMux/openSUSE_Leap_42.3/home:FabioMux.repo</code></li>
<li>Install the package:<br />
<code>sudo zypper in zypper-upgraderepo-plugin</code></li>
</ol>
<h3>How to use it</h3>
<p>Sometime we want to know the status of current repositories, the command <em>zypper ref</em> does a similar job but it is primarily intended to update the repository&#8217;s data and that slow down a bit the whole process.<br />
Instead we can type:<br />
<code><br />
$ zypper upgraderepo --check-current<br />
</code><br />
<a href="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451.png"><img class="alignnone size-medium wp-image-13242" src="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451-300x179.png" alt="" width="300" height="179" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451-300x179.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451-768x457.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451-1024x610.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174451.png 1060w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>To know whether or not all the available repositories are <em>upgrade-ready</em>:<br />
<code><br />
$ zypper upgraderepo --check-next<br />
</code><br />
<a href="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520.png"><img class="alignnone size-medium wp-image-13243" src="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520-300x179.png" alt="" width="300" height="179" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520-300x179.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520-768x457.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520-1024x610.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174520.png 1060w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
As you can see from the example above all the enabled repositories are ready to upgrade except for the OSS repo which has a slightly different URL.<br />
<code><br />
# The URL used in the openSUSE Leap 42.3<br />
http://download.opensuse.org/distribution/leap/42.3/repo/oss/suse/<br />
# The suggested one for openSUSE Leap 15.0<br />
http://download.opensuse.org/distribution/leap/15.0/repo/oss/<br />
</code></p>
<p>Let&#8217;s try again overriding the URL without make any real change:<br />
<code><br />
$ zypper upgraderepo --check-next \<br />
--override-url 8,http://download.opensuse.org/distribution/leap/15.0/repo/oss/<br />
</code><br />
<a href="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904.png"><img class="alignnone size-medium wp-image-13244" src="//lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904-300x179.png" alt="" width="300" height="179" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904-300x179.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904-768x457.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904-1024x610.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/Screenshot_20180703_174904.png 1060w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Once everything is ok, and after performed a backup including all the repositories, it&#8217;s time to upgrade all the repository at once:<br />
<code><br />
$ sudo zypper upgraderepo --upgrade \<br />
--override-url 8,http://download.opensuse.org/distribution/leap/15.0/repo/oss/<br />
</code></p>
<h3>Conclusions</h3>
<p>That&#8217;s all with the basic commands, more information is available in the wiki page of <a href="https://github.com/fabiomux/zypper-upgraderepo/wiki">zypper-upgraderepo</a> gem where all the commands are intended with the only use of the gem, but installing the plugin they are also available as zypper subcommands like shown above, also a man page is available as<br />
<code><br />
$ zypper help upgraderepo<br />
</code></p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/08/07/zypper-upgraderepo-plugin-is-here/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 49</title>
		<link>https://lizards.opensuse.org/2018/01/25/yast-sprint-49/</link>
		<comments>https://lizards.opensuse.org/2018/01/25/yast-sprint-49/#comments</comments>
		<pubDate>Thu, 25 Jan 2018 11:29:42 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12957</guid>
		<description><![CDATA[Time goes by and the YaST wheel keeps rolling. So let&#8217;s take a look to what have moved since our previous development report. More flexible NET installation ISOs Network installation media for Tumbleweed or Leap only work properly with the exact repository they have been built for &#8211; which for Tumbleweed may mean they could [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Time goes by and the YaST wheel keeps rolling. So let&#8217;s take a look to what have moved since our <a href="https://lizards.opensuse.org/2018/01/09/highlights-of-yast-development-sprint-48/">previous development report</a>.</p>
<h3>More flexible NET installation ISOs</h3>
<p>Network installation media for Tumbleweed or Leap only work properly with the exact repository they have been built for &#8211; which for Tumbleweed may mean they could be outdated after just one day.</p>
<p>You would then run into this message:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net1.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net1-300x167.jpg" alt="Linuxrc warning" width="300" height="167" class="aligncenter size-medium wp-image-12961" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net1-300x167.jpg 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net1.jpg 720w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>To improve the situation the installer can now offer to download matching boot files (kernel and <code>initrd</code>, to be precise) from the repository if it detects this situation:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net2.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net2-300x167.jpg" alt="Linuxrc offering a solution, as always" width="300" height="167" class="aligncenter size-medium wp-image-12962" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net2-300x167.jpg 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/linuxrc_net2.jpg 720w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, you can say &#8216;No&#8217; here &#8211; but then you&#8217;re back to the red dialog. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f600.png" alt="&#x1f600;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Technically, what&#8217;s done is to download a new kernel/initrd pair from the repository and restart the installation process with them (using kexec). So be prepared for a slight déjà vu.</p>
<p>This feature is controlled by the <a href="https://en.opensuse.org/SDB:Linuxrc#p_kexec"><code>kexec</code></a> boot option.</p>
<h3>Storage-ng lands into Tumbleweed: handle with care</h3>
<p>But that&#8217;s not the only news we have about openSUSE Tumbleweed. Our usual readers already know about Storage-ng, our effort to rewrite the whole YaST storage stack from scratch. And they also know it&#8217;s still a work in progress. But since there were too many valuable changes blocked by the adoption of Storage-ng, it was decided it was time to push the red button. So we are glad to announce the Storage-ng era has started with its inclusion in the first official (open)SUSE product &#8211; starting with snapshot 20180117, <code>libstorage-ng</code> has replaced <code>libstorage</code> and, thus, <code>yast2-storage-ng</code> has replaced <code>yast2-storage</code>.</p>
<p>They say forewarned is forearmed, so an article <a href="https://news.opensuse.org/2018/01/09/future-tumbleweed-snapshot-to-bring-yast-changes/">was published in advance</a> in news.opensuse.org to set the expectations and to provide and overview of the current status. We would like to encourage all openSUSE Tumbleweed users to (re)visit the article to get a better picture of the situation.</p>
<h3>Alignment of partitions in the expert partitioner</h3>
<p>An important part of that work in progress is the re-implementation of the Expert Partitioner with Storage-ng technologies. As mentioned many times in previous posts, this is mainly a 1:1 clone, with the same functionality presented in exactly the same way than the classic YaST partitioner. But some times we take the opportunity to introduce some improvement here and there, as we did this week with a topic that can have a very noticeable impact in the system performance: partitions alignment.</p>
<p>Although many people is not aware of it, the partitions in a system must be properly aligned to avoid the performance drop caused by excessive read-modify-write cycles. For details please refer to the <a href="https://en.wikipedia.org/wiki/Partition_alignment">great article at Wikipedia explaining the topic</a>, especially the sections titled &#8220;4 KB sector alignment&#8221; and &#8220;SSD page partition alignment&#8221;. Moreover, leaving performance considerations aside, some partition tables require alignment to simply work, like DASD partition tables which need alignment to tracks (usually 12 sectors).</p>
<p>The new expert partitioner takes all that into consideration when creating and resizing partitions, ensuring always the required alignment (like the DASD tracks) and encouraging the optional performance-related one, avoiding undesired gaps between partitions in the process.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/add_partition.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/add_partition-300x193.png" alt="Detail of the Expert Partitioner dialog to create a partition" width="300" height="193" class="aligncenter size-medium wp-image-12963" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/add_partition-300x193.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/add_partition.png 626w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Above you can see the dialog for choosing the size for a new partition that, unsurprisingly, looks very much like the same dialog in the pre-storage-ng Expert Partitioner. If a size is specified by the user in that dialog (any of the two first options in the form), the start and end of the partition will be aligned to ensure optimal performance and to minimize gaps. That may result in a slightly smaller partition (with the difference being usually less than 1MiB). If a custom region is specified, the start and end will be honored as closely as possible, with no performance optimizations (although mandatory alignment, like DASD tracks, still will take place). This third option is the best to create very small partitions.</p>
<p>The same considerations for optimal alignment will also be taken into account while resizing an existing partition and calculating the minimal and maximal sizes suggested by the partitioner during that process.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/resize_partition.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/resize_partition-300x216.png" alt="Choosing the new size of a resized partition" width="300" height="216" class="aligncenter size-medium wp-image-12964" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/resize_partition-300x216.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/resize_partition.png 464w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Sanity checks for the storage setup</h3>
<p>The possibility of bypassing the performance optimizations in the Expert Partitioner is just one example of the (potentially unleashed) power that tool provides. As a consequence of that flexibility, sometimes the user can overlook some important setup configurations or even make mistakes. To help with that, the Expert Partitioner recovered this week its ability to check the entered storage setup. </p>
<p>Once the user has set partitions, LVM volumes, file systems, mount points, etc. and decides to proceed, the Partitioner will validate that setup to ensure it fulfills all necessary requirements for booting and running the system. When some issue is detected, a popup message is presented to show what the problem is, offering the option to ignore the warning and move forward.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/setup_checks-1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/setup_checks-1-300x207.png" alt="The resurrected partitioner sanity checks" width="300" height="207" class="aligncenter size-medium wp-image-12966" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/setup_checks-1-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/setup_checks-1-768x531.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/setup_checks-1.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Two kind of checks are carried out to ensure the partitioning setup validity. First, the presence of needed partitions for booting is checked. Booting requirements depends on the current architecture (x86, PowerPC, AArch, etc.) and other technical details like the partition table type (GPT vs MS-DOS). Then, the mandatory volumes for the current product are checked. The mandatory volumes are defined in the revamped <code>partitioning</code> section of the control file. Typically, only a volume for root and another for swap used to be mandatory, but now this is totally configurable by anyone defining the product (SLE, Leap, Tumbleweed, your own custom openSUSE derivative&#8230;).</p>
<p>As a bonus, all the sanity checks are now centralized (they used to be scattered around the YaST source code) and it&#8217;s easier to add new ones (you will miss some old checks at this moment) and to use them from other parts of YaST (like the bootloader module or AutoYaST).</p>
<h3>More improvements in the Expert Partitioner</h3>
<p>The new warnings and the alignment improvements commented above are not the only news on the evolution of the Expert Partitioner clone this week. Resizing of LVM devices has also been brought back to life, both for volume groups and logical volumes. In the case of logical volumes, the functionality is not much different, at least in the surface, from the partition resizing that was already present and that you can see in the screenshot of the alignment section.</p>
<p>On the other hand, in the context of the Partitioner, resizing a volume group actually means adding or removing physical volumes. Actions that are now possible again, including the corresponding checks. For example, a physical volume cannot be removed if it already exists on disk (that could destroy your data) or if the resulting size of the volume group is not enough to cover all its logical volumes.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/remove_pv.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/remove_pv-300x207.png" alt="Trying to remove the wrong PV" width="300" height="207" class="aligncenter size-medium wp-image-12967" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/remove_pv-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/remove_pv-768x529.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/remove_pv.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Apart from the mentioned functionality, there has also been improvements in how the Expert Partitioner presents the information. For example, now the &#8220;type&#8221; column shows the correct label and icon for each device instead of that useless <code>TODO</code> label. Moreover, similar <code>TODO</code> marks were replaced by proper data in the device overview tab.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/no_more_todos.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/no_more_todos-300x207.png" alt="TODO labels are gone" width="300" height="207" class="aligncenter size-medium wp-image-12968" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/no_more_todos-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/no_more_todos-768x530.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/no_more_todos.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Minimize changes between the SLE15 &#8220;Installer&#8221; and &#8220;Packages&#8221; DVDs</h3>
<p>The SUSE Enterprise Server 15 (SLES15) product can be installed from a bootable &#8220;Installer&#8221; DVD medium which contains the installer and a subset of packages needed for a very minimal system. The other packages are available either from a registration server (after registering the SLES product) or via a separate &#8220;Packages&#8221; DVD medium.</p>
<p>Due to the structure of those DVDs (with some packages being in present in both) the SLES installer was asking the user to change the medium several times during the installation process. Ideally the installer should use all packages from the &#8220;Packages&#8221; medium without changing the media.</p>
<p>In addition, there is yet another requirement for preferring the packages from the installation DVD to the packages available via a remote repository. Downloading a package from the internet is usually much slower than the DVD and can be problematic in network connections with a download limit or with a price based on the bandwidth usage.</p>
<p>Now the installer properly adjust the priority of all the repositories to achieve the desired behavior. To avoid possible side effects we decided to change the repository priority only when more than one repository is used and all repositories are local (e.g. DVD, hard disk, USB flash disk&#8230;). That means in some less common cases (2 DVDs + a remote repository) you will still need to change the medium but this is a safer solution.</p>
<h3>Add On products in AutoYaST</h3>
<p>For those using SLE Add On products, we have improved the error message if an Add On Product cannot be added during an AutoYaST installation. The user can see now which wrongly configured Add On Product has produced the error.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/autoyast_addon.jpeg"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/autoyast_addon-300x231.jpeg" alt="AutoYaST reporting which Add On is wrong" width="300" height="231" class="aligncenter size-medium wp-image-12969" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/autoyast_addon-300x231.jpeg 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/autoyast_addon-768x592.jpeg 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/autoyast_addon.jpeg 971w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>This will be specially useful with the upcoming SLE15, in which the concepts of Add Ons and Modules will become more relevant than ever.</p>
<h3>Fixed a crash when shutting down the YaST user interface</h3>
<p>And now it&#8217;s time for the corresponding dose of technical insights for those who enjoy that part of our reports.</p>
<p>When <code>UI::OpenDialog()</code> and <code>UI::CloseDialog()</code> calls didn&#8217;t match when shutting down the UI (user interface YaST component), you&#8217;d get a segmentation fault with a core dump. Well, you <em>did</em> want to shut down YaST, but probably not like that. This is now fixed.</p>
<p>After tracking this down, it was surprisingly simple to reproduce: Just use the YaST version of the trivial &#8220;Hello, World&#8221; program and comment out the <code>UI::CloseDialog()</code> call.</p>
<p>This was a case of providing additional error reporting causing more problems than the original error: leaving dialogs open while terminating the program is an error, of course. But fixing this little problem by cleaning up the remaining dialogs lead to handling widgets after some of the underlying infrastructure (in this case the <code>QApplication</code>) was already destroyed, so all the QWidgets were also destroyed (because the QApplication takes care of that), but YaST&#8217;s generic UI layer was still unaware of that fact and tried to destroy them again.</p>
<p>This is now fixed by properly cleaning up the widget tree in YaST&#8217;s generic UI layer first which will also clean up the associated QWidgets so there is nothing left to clean up for the QApplication.</p>
<p>This might also fix a number of similar segfaults in other situations where the YaST Ruby engine would need to shut down because of other problems, e.g. when there is an unhandled Ruby exception.</p>
<p>Surprisingly enough, this must have been a very old (10+ years?) bug, but it never became quite obvious, or at least nobody was ever annoyed enough to try to track it down.</p>
<p>If you want even more details, check <a href="https://bugzilla.suse.com/show_bug.cgi?id=1074596">the conversation in the bug report</a>.</p>
<h3>More to come</h3>
<p>The end of this sprint caught up with a lot of almost finished stuff. But following the Scrum principle of &#8220;nothing is done until it fits the Definition of Done&#8221;, we don&#8217;t blog about such stuff. Fortunately, that means the next report will likely be quite juicy. So, see you again in a couple of weeks!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/01/25/yast-sprint-49/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 48</title>
		<link>https://lizards.opensuse.org/2018/01/09/highlights-of-yast-development-sprint-48/</link>
		<pubDate>Tue, 09 Jan 2018 09:55:23 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12928</guid>
		<description><![CDATA[The YaST team finished its 47th Sprint right before the Christmas break but, sadly, we had not published the corresponding report&#8230; until now. The last sprint of the year brought some interesting changes, like Chrony support for AutoYaST, better multi-products medium handling, etc. So let&#8217;s recap those changes. Chrony support in AutoYaST As part of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>The YaST team finished its 47th Sprint right before the Christmas break but, sadly, we had not published the corresponding report&#8230; until now. The last sprint of the year brought some interesting changes, like Chrony support for AutoYaST, better multi-products medium handling, etc. So let&#8217;s recap those changes.</p>
<h3>Chrony support in AutoYaST</h3>
<p>As part of our effort to support <a href="https://chrony.tuxfamily.org/">Chrony</a> as the default NTP service for (open)SUSE, we have revamped how AutoYaST handles the configuration of such a service. The first noticeable change is that we have redesigned the schema which, instead of containing low level configuration options, is now composed of a set of high level ones that are applied on top of the default settings.</p>
<p>And here is how the new (and nicer) configuration looks like:</p>
<pre>
&lt;ntp-client&gt;
  &lt;ntp_policy&gt;auto&lt;/ntp_policy&gt;
  &lt;ntp_servers config:type="list"&gt;
    &lt;ntp_server&gt;
      &lt;iburst config:type="boolean"&gt;false&lt;/iburst&gt;
      &lt;address&gt;cz.pool.ntp.org&lt;/address&gt;
      &lt;offline config:type="boolean"&gt;true&lt;/offline&gt;
    &lt;/ntp_server&gt;
  &lt;/ntp_servers&gt;
  &lt;ntp_sync&gt;15&lt;/ntp_sync&gt;
&lt;/ntp-client&gt;
</pre>
<h3>Updating the Remote Administration Capabilities</h3>
<p>During this sprint, the remote administration client has been deeply modified. To begin with, as <code>xinetd</code> is being replaced by <code>systemd sockets</code>, we have dropped that dependency (adjusting the code accordingly).</p>
<p>Additionally the VNC handling have been improved too. Until now, YaST offered the possibility to connect through a web browser using a Java applet. Now YaST allows the user to enable/disable this feature (check the screenshot below to see how it looks now). It is worth to mention that Michal Srb has replaced the old viewer with <a href="https://github.com/novnc/noVNC">novnc</a>, a JavaScript based one. Thanks a lot for that, Michal!</p>
<div class="figure">
<a href="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote-300x215.png" alt="" width="300" height="215" class="aligncenter size-medium wp-image-12929" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote-1024x734.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-remote.png 1080w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<p>And last but not least, we have seized the occasion to do some code cleaning, reimplementing some dialogs using <a href="https://github.com/yast/yast-yast2/tree/master/library/cwm/examples">the Common Widget Manipulation object oriented API</a>.</p>
<h3>Modifying AutoYaST Profile During Installation</h3>
<p>AutoYaST offers a cool feature that allows the profile to be modified during the initial stages of the installation using an user script. So you can run a script which adjusts the profile and AutoYaST will read it again. If you are interested in such a feature, you could find more information in the <a href="https://www.suse.com/documentation/sles-12/singlehtml/book_autoyast/book_autoyast.html#pre-install.scripts">official documentation</a>.</p>
<p>On the other hand, in our <a href="https://lizards.opensuse.org/2017/12/07/highlights-of-yast-development-sprint-47/">previous report</a>, we mentioned that AutoYaST was able again to use multipath devices using the new storage stack. But we didn&#8217;t count that it was possible to modify the profile on runtime so the initialization happened too early.</p>
<p>Now the bug is fixed so you can again adjust any storage setting using the aforementioned feature.</p>
<h3>Properly Handling Selected Modules</h3>
<p>As you may know, some time ago we added a support for the multi-product media (DVDs which contain more than one repository/product in separate subdirectories). This time we fixed some issues regarding this functionality.</p>
<p>Originally after selecting several products only one of them was actually selected to install and only one product was displayed in the installation proposal. Fortunately, those issues have been addressed now.</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-medium.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-medium-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-12935" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-medium-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-medium-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-medium.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></div>
<h4>Unified Look &amp; Feel for Multi-Product Selection Dialog</h4>
<p>For the multi-product DVD media we used this selection dialog:</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-old.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-old-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-12937" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-old-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-old-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-old.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></div>
<p>The functionality is very similar to the on-line product selection dialog displayed after registering the system:</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-registration-add-on-selection.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-registration-add-on-selection-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-12938" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-registration-add-on-selection-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-registration-add-on-selection-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-registration-add-on-selection.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></div>
<p>As you can see the look &amp; feel is quite different, but from the usability point of view the dialogs should look the same regardless whether the products are added from a DVD medium or from an on-line source (a registration server).</p>
<p>This sprint we improved the DVD media dialog to better match the registration dialog:</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-new.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-new-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-12939" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-new-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-new-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/01/yast2-multi-product-selection-new.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a>.</div>
<p>The dialog is still not exactly the same, but now it looks more similar so users should feel more familiar with it. There is also displayed an additional note about not handling the product dependencies automatically. This note was already present in the help text but that is hidden by default. As we got quite a lot of bug reports about this issue we decided to make this fact more prominent.</p>
<p>(Note: The dialogs actually cannot look the very same as the DVD media currently lack some information like the dependencies, beta status, detailed descriptions&#8230;).</p>
<h3>Dropping SYSTEMCTL_OPTIONS Variable Support</h3>
<p>We have been using the environment variable called <code>SYSTEMCTL_OPTIONS</code> (which is SUSE-specific) in our systemd services to prevent locks in dependencies. As this hack will not be necessary for upcoming the (open)SUSE 15 version, it will be dropped from systemd and, therefore, we already removed it from our systemd services.</p>
<h3>Unifying Disklabel Handling in AutoYaST</h3>
<p>When specifying an AutoYaST partitioning schema, you can select which partition type you want to use for each device (MSDOS, GPT, DASD, etc.). In the past, AutoYaST implemented its own logic to select which one to use in case that it was not specified by the user. After this sprint, AutoYaST relies on the new storage stack in order to decide which option fits better when the user does not specify one.</p>
<h3>Bonus: Automatically Checking the Defined Systemd States</h3>
<p>Some time ago we had serious issues with service management in YaST (see <a href="https://bugzilla.suse.com/show_bug.cgi?id=1012047">bug#1012047</a> and <a href="https://bugzilla.suse.com/show_bug.cgi?id=1017166">bug#1017166</a>). The problem was caused by introducing a new systemd service state which was not expected by YaST. We fixed the problem by correctly handling the new state.</p>
<p>But the main problem was that we (as the YaST developers) were not notified about this major system change and we found this change later after we got bug reports in Bugzilla. To avoid this problem again in the future we decided to implement a script which would regularly check the defined systemd states notifying us if a unknown state was detected.</p>
<p>To implement the regular check we use the <a href="https://docs.travis-ci.com/user/cron-jobs/">Travis cron job feature</a> which allows running continuous integration builds not only after a change is pushed into the repository but also in regular intervals, even when there is no change in the code.</p>
<p>Alternatively you can use any CI service, but we chose Travis because it is easy to use and we already use Docker for normal CI jobs which allows us to run the latest systemd from openSUSE Tumbleweed in an easy way.</p>
<p>In this case we could possibly run the script in OBS when building the <code>yast2-services-manager</code> package, but that would need adding systemd to <code>BuildRequires</code> which does not sound as a good idea&#8230;</p>
<p>So if you also need to run some check scripts regularly you can see more details in <a href="https://github.com/yast/yast-services-manager/pull/135">this pull request</a>.</p>
<h3>Conclusion</h3>
<p>2017 was an exciting year with a lot of interesting stuff: a new storage layer, multi-product installation medium, integration of new components (firewalld, chrony, etc.). And it looks like 2018 will not be different and we will have a lot of fun.</p>
<p>Thanks for your support and happy new year!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST development sprint 38</title>
		<link>https://lizards.opensuse.org/2017/07/14/yast-sprint-38/</link>
		<comments>https://lizards.opensuse.org/2017/07/14/yast-sprint-38/#comments</comments>
		<pubDate>Fri, 14 Jul 2017 10:13:17 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Desktop]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12591</guid>
		<description><![CDATA[Here we go again with a new report from the YaST trenches. This time with the storage reimplementation as the clear star of the show. Storage reimplementation: the proposal adapts, you succeed As we have announced in our previous sprints and as you probably already know, the YaST team is working hard to rewrite the [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Here we go again with a new report from the YaST trenches. This time with the storage reimplementation as the clear star of the show.</p>
<h3>Storage reimplementation: the proposal adapts, you succeed</h3>
<p>As we have announced in our previous sprints and as you probably already know, the YaST team is working hard to rewrite the whole storage stack on time for SLE15 and openSUSE Leap 15. As part of this reimplementation we have designed a brand new storage proposal that automagically offers the user the best combination of partitions and LVM volumes based on the current configuration of the system and the user preferences.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/proposal.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/proposal-300x225.png" alt="The storage proposal in action" width="300" height="225" class="aligncenter size-medium wp-image-12592" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/proposal-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/proposal-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/proposal.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>When we are working with very small disks or with special technologies like DASD (which doesn&#8217;t accept more than three partitions by device), the storage proposal might not be able to generate a valid initial proposal honoring the initial requirements of the product (e.g. creating a separate home partition and enabling btrfs snapshots for the root partition in the openSUSE Leap case). Now the proposal is not limited to fail when it is not possible to satisfy the default product requirements. Before giving up, the new system looks for alternatives, like discarding the separate home partition or disabling snapshots. Moreover, now the proposal is able to automatically adjust the size requirements not only for root, but also for swap and home. And, of course, the guided setup continues there for fine tuning the proposal settings.</p>
<h3>Desktop selection improvements</h3>
<p>As our usual readers also know, we recently introduced a more fair desktop selection screen for openSUSE, both Leap 42.3 and Tumbleweed. We used part of the latest sprint to implement some feedback we gathered about the wording and behavior of that dialog.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/desktop-selection.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/desktop-selection-300x225.png" alt="Revamped desktop selection screen" width="300" height="225" class="aligncenter size-medium wp-image-12593" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/desktop-selection-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/desktop-selection-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/desktop-selection.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>That feedback gathering included some discussions on how to make user experience nicer after selecting one of the user interfaces available through the &#8220;custom&#8221; option. As a result, the awesome openSUSE crew created a new mechanism for selecting the default window manager on each graphical login, so YaST can delegate the details to the maintainers of those alternative interfaces.</p>
<p>How everything works now? Glad you asked. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>If the user select KDE or GNOME in the YaST dialog, <code>/etc/sysconfig/windowmanager</code> is configured to point to that desktop by default. If the &#8220;custom&#8221; option is selected, then YaST does not enforce any interface in that file and the new mechanism comes into play. It relies in the <code>default.desktop</code> file, which defines the default window manager and can be managed by the common <code>update-alternatives</code> workflow. Meaning it can be easily tweaked by the package maintainers and by the users, specially since YaST includes a nice module for managing alternatives.</p>
<h3>Storage reimplementation: improvements in the expert partitioner</h3>
<p>Although, as explained above, we keep improving the storage automatic proposal to support more and more situations, we cannot ignore that flexibility and adaptability have always been two of the flagships of (open)SUSE. And one of the most prominent examples is the YaST Expert Partitioner.</p>
<p>As detailed in <a href="https://lizards.opensuse.org/2017/06/16/yast-sprint-36/">our report of the sprint 36</a>, we have been rewriting that powerful Swiss Army knife using the new storage stack but keeping the same user interface and functionality. So far, the new implementation was only able to display information about the existing partitions, LVM systems and MD RAIDs. But now we added many options to create, edit and delete partitions.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/expert-partitioner-inst.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/expert-partitioner-inst-300x225.png" alt="Using the expert partitioner during installation" width="300" height="225" class="aligncenter size-medium wp-image-12597" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/expert-partitioner-inst-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/expert-partitioner-inst-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/expert-partitioner-inst.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It is still a work in progress because the number of possibilities offered by the YaST Partitioner is sometimes overwhelming and implementing them all takes time, but it&#8217;s progressing nicely.</p>
<p>Beside the improvements in the Partitioner itself, we also worked on its integration in the installation workflow. Now the Expert Partitioner can be used to refine the schema automatically proposed by the installer. As a bonus, the behavior of the &#8220;abort&#8221; and &#8220;finish&#8221; buttons has been improved in relation to the Expert Partitioner currently available in (open)SUSE, which historically shows a usability inconsistency there compared to the rest of the installation process.</p>
<div style="width: 1024px;" class="wp-video"><!--[if lt IE 9]><script>document.createElement('video');</script><![endif]-->
<video class="wp-video-shortcode" id="video-12591-1" width="1024" height="768" preload="metadata" controls="controls"><source type="video/webm" src="//lizards.opensuse.org/wp-content/uploads/2017/07/expert_partitioner_next.webm?_=1" /><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/expert_partitioner_next.webm">//lizards.opensuse.org/wp-content/uploads/2017/07/expert_partitioner_next.webm</a></video></div>
<h3>Fixed Automatic Patch Installation</h3>
<p>In both SLE and openSUSE Leap, the online updates can be installed either manually or automatically at some regular intervals. For the automatic installation we provide the <code>yast2-online-update-configuration</code> package which provides a cron job script and an YaST module for configuring it (hint: it is not installed by default, you might give it a try, maybe it is something &#8220;new&#8221; for you).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/yast-online-update.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/yast-online-update-300x242.png" alt="Configuring online updates via YaST" width="300" height="242" class="aligncenter size-medium wp-image-12595" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/yast-online-update-300x242.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/yast-online-update.png 623w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>You can configure how often the patches should be installed or filter the patch categories in the YaST module, but we got a bug report saying that when multiple patch categories are selected only one is actually used.</p>
<p>It turned out to be a trivial mistake in the cron job and we fixed it for SLE12-SP2 and Leap 42.2, as well as for the upcoming SLE12-SP3 and Leap 42.3. So if you use this module and want to use the category filter then it&#8217;s recommended to upgrade the package.</p>
<h3>Storage reimplementation: many steps forward in the AutoYaST integration</h3>
<p>And going back to our new storage stack, we keep working to integrate it better with other parts of YaST, specially AutoYaST. During this sprint we polished some rough edges and we added support for MD RAID. With all that, now is possible to automatically setup a system based on an AutoYaST profile containing any combination of partitions, LVM systems and MD arrays, including encryption at any of the levels.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-raid-lvm.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-raid-lvm-300x216.png" alt="AutoYaST summary of actions on partitions, MD RAID and  LVM" width="300" height="216" class="aligncenter size-medium wp-image-12602" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-raid-lvm-300x216.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-raid-lvm-768x552.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-raid-lvm.png 1012w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But the relation of AutoYaST with the system works in both directions. Apart from being able to install a system based on an AutoYaST profile, it also offers the interface to export the current system configuration, including the storage layout, to a profile in order to reproduce the system later. During this sprint we also ported that logic to rely on the new storage layer.</p>
<p>It was harder than it sounds, due to the need of keeping the backwards-compatibility with several behaviors that have been introduced along the AutoYaST history to adapt to several specific situations. On the bright side, the new code is easier to follow, includes behavior-driven automated tests (RSpec) and contains information about the rationale of each decision&#8230; which in some cases required some archaeology.</p>
<h3>Storage reimplementation: fixed bootloader proposal in S/390 and PowerPC</h3>
<p>Another part of YaST we are constantly working to integrate better with the new storage stack is <code>yast2-bootloader</code>. Although the new storage system was already able to correctly setup a valid disk layout for most situations and architectures (each one with it&#8217;s own requirements for booting), our bootloader module is still not fully compatible with the new system in all those scenarios.</p>
<p>During this sprint, we adapted it to ensure all the combinations suggested by the new storage stack (partitions, LVM, encryption and so on) are correctly covered by YaST2-Bootloader. As a result, we can already say that our testing ISO images are fully installable in any x86_64, PowerPC and S/390 system by just clicking &#8220;next&#8221; a few times. And we have automated integration tests (a separate openQA instance) to ensure the resulting system boots just fine.</p>
<h3>UDEV device id on PowerPC</h3>
<p>We know some of our readers enjoy our more technical posts and like to lurk into the kitchen to see how we deal with all kind of surprises maintaining a complex tool like YaST. Today&#8217;s chapter in that regard started with a bug report about the bootloader being installed in the wrong device name (<code>/dev/vda</code> instead of <code>/dev/vdb</code>) in an emulated PowerPC machine in openQA.</p>
<p>After a lot of investigation and with help from our PowerPC expert, we found the culprit, that turned out to be an emulator quirk. The next couple of paragraphs may be interesting or daunting, depending how much virtualization and PowerPC jargon you know. Be warned.</p>
<p>On POWER, the PReP partition containing the bootloader has no unique identifier other than the serial number of the disk on which it created. QEMU virtualization does not provide any disk serial number when the user does not explicitly specify one. This means that the PReP partition in QEMU installation does not have any unique identification and the partition name may change when a disk is added or removed from the virtual machine or the storage configuration otherwise changes. This may lead to system errors related to bootloader installation and updates.</p>
<p>It is recommended to assign a unique serial number to each disk in a QEMU virtual machine on POWER when it is expected the storage configuration of the virtual machine may change. Otherwise, there is nothing YaST or any other tool running within the virtual machine can do to avoid the problems. So this time we only did the investigation part, with the fix coming from the openQA side, which was improved to explicitly set serial numbers when needed.</p>
<h3>Storage reimplementation: better support for advanced scenarios</h3>
<p>As exposed above, our StorageNG testing image already works in all the supported architectures and in scenarios combining plain partitions, LVM, RAID and encryption in any way. But there are even more situations and technologies currently supported by YaST that we need to incorporate into the new stack.</p>
<p>First of all, we used this sprint to add <a href="https://en.wikipedia.org/wiki/Multipath_I/O">Multipath I/O</a> support to the new libstorage. Now it can also be combined with all the other mentioned technologies (like having an LVM system on top of an encrypted multipath device), although the storage proposal still needs to be adapted to play nicely with preexisting multipath setups.</p>
<p>As usual with the library stuff, the best &#8220;screenshot&#8221; we have to offer is one of its geeky autogenerated graphs.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/multipath.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/multipath-300x140.png" alt="A multipath layout in libstorage-ng" width="300" height="140" class="aligncenter size-medium wp-image-12605" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/multipath-300x140.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/multipath-768x358.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/multipath-1024x477.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2017/07/multipath.png 1323w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Another scenario that goes beyond the most regular use cases is installing the system into a network storage device, instead of a local hard disk. Now, the new storage system can report whether a root filesystem via a network is used. When that happens, YaST sets the network interfaces with the start mode <code>nfsroot</code>, which is used to avoid interface shutdown and, therefore, the unavailability of the system.</p>
<h3>That&#8217;s all, folks!</h3>
<p>Once again, we omitted the boring parts about bugfixing (with <code>yast2-ntp-client</code> being the star in that regard) and similar stuff. We hope you enjoyed the report and we hope to reach you again in two weeks. Meanwhile&#8230;</p>
<p>Have a lot of fun testing the Leap 42.3 pre-releases and reporting bugs!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2017/07/14/yast-sprint-38/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST development sprint 37</title>
		<link>https://lizards.opensuse.org/2017/07/03/yast-sprint-37/</link>
		<pubDate>Mon, 03 Jul 2017 11:31:39 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12575</guid>
		<description><![CDATA[Since we announced in the latest report, we decided to shorten our development sprints from three to only two weeks. As a natural consequence, this is the first report of a series of shorter ones. But shorter doesn&#8217;t have to mean less juicy! Keep reading and enjoy. Displaying very long changelog We got a bug [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Since we announced in the latest report, we decided to shorten our development sprints from three to only two weeks. As a natural consequence, this is the first report of a series of shorter ones. But shorter doesn&#8217;t have to mean less juicy! Keep reading and enjoy.</p>
<h3>Displaying very long changelog</h3>
<p>We got a <a href="https://bugzilla.suse.com/show_bug.cgi?id=1044777">bug report</a> about YaST not responding when a very long package changelog was displaying in the package manager. It turned out that some packages have a huge change log history with several thousands entries (almost 5000 for the <code>kernel-default</code> package). That produces a very long table which takes long time to parse and display in the UI.</p>
<p>The solution is to limit the maximum number of displayed items in the UI. You cannot easily read that very long text anyway, for such a long text you would need some search functionality which the YaST UI does not provide.</p>
<p>Finding the limit, that magic number, was not easy as we want to be backward compatible and display as much as possible but still avoid that pathological cases with a huge list.</p>
<p>In the end we decided to go for a limit of 512 change entries. The vast majority of packages have way fewer entries, so you should not notice this clipping functionality. When the limit is reached a command to display the full log is displayed at the end so you can easily see the missing part when needed. (Hint: the widget supports the usual copy&amp;paste functionality, you can copy (with <code>Ctrl</code>+<code>C</code>) the displayed command and paste it into a terminal window directly.)</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/changelog.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/changelog.png" alt="Clipping the kernel changelog" width="555" height="243" class="aligncenter size-full wp-image-12576" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/changelog.png 555w, https://lizards.opensuse.org/wp-content/uploads/2017/07/changelog-300x131.png 300w" sizes="(max-width: 555px) 100vw, 555px" /></a></p>
<h3>Storage reimplementation: MD RAID support in the rewritten partitioner</h3>
<p>In the previous report we told you we are rewriting the YaST partitioner to use the new storage stack and modern reusable CWM widgets under the hood while retaining exactly the same behavior and look&amp;feel on the surface. We are reimplementing one feature at a time, and this sprint it was the MD RAID&#8217;s turn.</p>
<p>Now the partitioner displays current RAIDs, with details about them and the devices used to construct each RAID. If a picture is worth a thousand words, here you have 3,000 words:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/raid2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/raid2-300x234.png" alt="RAID list in the rewritten partitioner" width="300" height="234" class="aligncenter size-medium wp-image-12580" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/raid2-300x234.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid2-768x598.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid2.png 805w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/raid1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/raid1-300x233.png" alt="Devices in a given RAID in the rewritten partitioner" width="300" height="233" class="aligncenter size-medium wp-image-12581" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/raid1-300x233.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid1-768x597.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid1.png 806w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/raid3.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/raid3-300x233.png" alt="RAID details in the rewritten partitioner" width="300" height="233" class="aligncenter size-medium wp-image-12579" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/raid3-300x233.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid3-768x595.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/raid3.png 805w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>No, you can&#8217;t have a separate partition for /var/lib/docker for CaaSP &#8211; so here you have it</h3>
<p>Our brand new containers-oriented solutions, SUSE CaaSP and its openSUSE counterpart Kubic, need to have <code>/var/lib/docker</code> as a separate partition for several reasons. It was a separate Btrfs subvolume already, but that wasn&#039;t quite separate enough. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>The problem was just that the automated storage proposal in the old YaST storage subsystem is not prepared for anything like this; it can deal with root, swap and optionally a separate home partition (or volume if using LVM). That&#039;s it. Extending the current syntax of the <code>control.xml</code> file to be able to specify arbitrary partitions and adapting the code of the old proposal to understand and handle this new specification was unfortunately almost impossible. Sadly, we have to admit the old code is hardly maintainable these days and not flexible enough to accommodate this kind of changes in a safe way.  </p>
<p>This is one (out of many) reasons why we are currently in the process of rewriting that entire YaST storage subsystem, as you already know from many previous posts in this blog. But, as you also know, the new system will debut in SLES15 and openSUSE Leap 15.0, too late for the current SUSE CaaSP and openSUSE Kubic. </p>
<p>We decided we&#039;d introduce a hack based in the old proposal, well knowing that hacks accumulated in code can develop their own life just like <a href="http://www.userfriendly.org/cartoons/dustpuppy/">Dust Puppy</a>. But we plan to kill that hack immediately once StorageNG arrives.</p>
<p>So the hack was to simply use the logic for the separate home partition and repurpose it, keeping all the respective parameters in <code>control.xml</code> and introducing yet another one called <code>home_path</code> where the actual mount point for that partition can be specified &#8212; in this case <code>/var/lib/docker</code>. The tradeoff is that there can be no separate <code>/home</code> anymore in parallel to that.</p>
<p>That &quot;feature&quot; should not be used outside of that very specific use case in CaaSP and we even considered the possibility of not documenting it too publicly to avoid misuse. But we are living the open source spirit and whatever we do, we do in public. Even if it&#039;s the (quite embarrassing) fact that we consider changes to certain parts of our own code too risky. But again, that&#039;s why we are pushing the storage layer reimplementation (Storage-NG) so hard: we want to regain control over that part.</p>
<h3>Storage reimplementation: custom partitioning with AutoYaST</h3>
<p>And talking about the new storage layer and our previous posts, you already know we are working hard to integrate it with AutoYaST. For the time being, custom partitioning layouts are supported, but only using plain partitions and LVM. Other features, like RAID or Btrfs subvolumes support, are still missing.</p>
<p>A nice thing about the new code is that it relies as much as possible on the new storage layer. On older versions, AutoYaST implemented some logic on its own and that caused some unexpected troubles. Fortunately, that is not the case anymore, and the new code looks way easier to extend and maintain.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/autoyast.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-12585" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/autoyast.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>YaST does not write directly in <code>/etc/vconsole.conf</code> anymore</h3>
<p>When configuring the system keyboard, YaST used to write the keyboard map configuration directly in the <code>/etc/vconsole.conf</code> file. However, this approach is no longer appropriated since it may cause undesired effects to other tools. Now YaST uses the Systemd tool <code>localectl</code> to set the keyboard map in <code>/etc/vconsole.conf</code>, instead of writing in it directly. Another step to make YaST a good citizen of the Systemd world.</p>
<h3>Storage reimplementation: named RAID arrays</h3>
<p>If you use MD RAID arrays you probably know there are two ways of identifying them &#8211; by number or assigning a meaningful name to them. Named arrays use device names like <code>/dev/md/&lt;name&gt;</code> instead of <code>/dev/md&lt;number&gt;</code>.</p>
<p>During this sprint, we taught the new libstorage how to create and manage named RAID array, in addition to the already supported numbered ones. If the user decides so, the MD RAID name is used in fstab instead of the UUID (which was the only option with the old libstorage). We also made sure to improve the behavior in several scenarios, so we consider some bugs of the old storage to be fixed (or obsoleted, if you prefer) with storage-ng.</p>
<p>Linux also supports names of the form <code>/dev/md_&lt;name&gt;</code>. The new library is also able to handle this format, but the feature is intentionally disabled and documented to be unsupported because other parts of the system could not be 100% verified to work in that scenario. And we take quality assurance very seriously before labeling a feature as &#8220;supported&#8221;.</p>
<p>If you are not happy enough with the screenshots showing the RAID support in the partitioner, here you have more pictures. But, as usual with stuff implemented in the library, here &#8220;pictures&#8221; doesn&#8217;t mean screenshots, but fancy automatically generated graphs.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2017/07/named-md.png"><img src="//lizards.opensuse.org/wp-content/uploads/2017/07/named-md-300x289.png" alt="" width="300" height="289" class="aligncenter size-medium wp-image-12587" srcset="https://lizards.opensuse.org/wp-content/uploads/2017/07/named-md-300x289.png 300w, https://lizards.opensuse.org/wp-content/uploads/2017/07/named-md-768x740.png 768w, https://lizards.opensuse.org/wp-content/uploads/2017/07/named-md-1024x987.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2017/07/named-md.png 1033w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Stay tuned</h3>
<p>Of course there are a lot of other things we did during the last two weeks, although some of them were considered not interesting enough for this report or were not finished on time. We are already working in finishing the unfinished stuff and implementing new exciting improvements. And the bright side is that you only have to wait two weeks to know more&#8230; so stay tuned.</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
