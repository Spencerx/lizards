<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Build Service &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/build-service/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>

	<item>
		<title>openSUSE on reproducible builds summit</title>
		<link>https://lizards.opensuse.org/2019/12/13/opensuse-on-reproducible-builds-summit/</link>
		<pubDate>Fri, 13 Dec 2019 11:43:37 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[reproducible-builds]]></category>
		<category><![CDATA[Summit]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14231</guid>
		<description><![CDATA[As in the past 3 years, I joined the r-b summit where many people interested in reproducible builds met. There were several participants from companies, including Microsoft, Huawei and Google. Also some researchers from universities that work on tools like DetTrace, tuf and in-toto. But the majority still came from various open-source projects &#8211; with [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>As in the past 3 years, I joined <a href="https://reproducible-builds.org/events/Marrakesh2019/">the r-b summit</a> where many people interested in reproducible builds met.</p>
<p>There were several participants from companies, including Microsoft, Huawei and Google.<br />
Also some researchers from universities that work on tools like <a href="http://nickrenner.us-east-2.elasticbeanstalk.com/projects/dettrace">DetTrace</a>, tuf and in-toto.<br />
But the majority still came from various open-source projects &#8211; with Fedora/RedHat being notably absent.</p>
<p>We had many good discussion rounds, one of which spawned my writeup on <a href="https://lists.reproducible-builds.org/pipermail/rb-general/2019-December/001732.html">the goal of reproducible builds</a></p>
<p>Another session was about our wish to design a nice interface, where people can easily find the reproducibility status of a package in various distributions. I might code a Proof-of-Concept of that in the next weeks (when I have time).<br />
I also got some help with java patches in openSUSE and made several nice upstream reproducibility fixes &#8211; showing some others how easy that can be.</p>
<p>This whole event also was good team-building, getting to know each other better. This will allow us to better collaborate in the Future.</p>
<p>Later there will be a larger report compiled by others.</p>
]]></content:encoded>
			</item>
		<item>
		<title>openSUSE WSL images in OBS</title>
		<link>https://lizards.opensuse.org/2019/10/09/opensuse-wsl-images-in-obs/</link>
		<pubDate>Wed, 09 Oct 2019 14:17:44 +0000</pubDate>
		<dc:creator><![CDATA[lnussel]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14127</guid>
		<description><![CDATA[A fundamental concept of all openSUSE packages as well as any image offered for download is a fully transparent, reproducible and automatic build and development process based on sources. In openSUSE developers do not perform manual builds on some specially crafted machine in their basement and then upload the result somewhere. Instead all sources are [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>A fundamental concept of all openSUSE packages as well as any image offered for download is a fully transparent, reproducible and automatic build and development process based on sources.</p>
<p>In openSUSE developers do not perform manual builds on some specially crafted machine in their basement and then upload the result somewhere. Instead all sources are stored in a version control system inside the <a href="https://openbuildservice.org/">open build service</a> (OBS) instance at <a href="https://build.opensuse.org/">build.opensuse.org</a>. OBS then automatically builds the sources including all dependencies according to defined build instructions (eg spec files for rpms). OBS also automatically adds cryptographic signatures to files that support it to make sure nobody can tamper with those files.</p>
<p>The WSL appx files are basically zip files that contain a tarball of a Linux system (like a container) and a Windows exe file, the so called launcher. Building a container is something OBS can already do fully automatic by means of <a href="http://osinside.github.io/kiwi/">Kiwi</a>. The launcher as well as the final appx however is typically built on a Windows machine using Visual Studio by the developer.</p>
<p>Since the goal of the openSUSE WSL offering is to have the appx files officially and automatically be produced along with other images such as the DVD installer, Live images or containers, the appx files have to be built from sources in OBS.</p>
<p>Fortunately there&#8217;s already a <a href="http://www.mingw.org/">MinGW</a> cross toolchain <a href="https://build.opensuse.org/project/show/windows:mingw:win64">packaged as rpms OBS</a> and a <a href="https://github.com/facebook/fb-util-for-appx">tool to generate appx files on Linux</a>.</p>
<p>Combining that all together OBS can actually build the WSL appx from sources. The current state of development can be found in the <a href="https://build.opensuse.org/project/show/Virtualization:WSL">Virtualization:WSL</a> project in OBS. The generated appx files are published on <a href="https://download.opensuse.org/repositories/Virtualization:/WSL/">download.opensuse.org</a>.<br />
The current images for <a href="https://download.opensuse.org/repositories/Virtualization:/WSL/openSUSE_Leap_15.2/openSUSE-Leap-15.2-Alpha.appx">Leap 15.2 Alpha</a> and <a href="https://download.opensuse.org/repositories/Virtualization:/WSL/openSUSE_Tumbleweed/openSUSE-Tumbleweed.appx">Tumbleweed</a> there are good enough for some testing already so please go ahead and do so, feedback welcome!<br />
Note that since the appx files are signed by OBS rather than Microsoft, there are a <a href="https://en.opensuse.org/WSL/Manual_Installation">few steps required</a> to install them.</p>
<p>Going forward there is still quite some work needed to polish this up. Kiwi for example can&#8217;t build the appx directly itself but rather the fb-util-for-appx is called by a spec file. That requires some hacks with the OBS project config to work. On Linux side there&#8217;s currently no password set for the root user, so we need a better &#8220;first boot&#8221; solution. More details on that in a later article. Meanwhile, remember to have a lot of fun&#8230;</p>
]]></content:encoded>
			</item>
		<item>
		<title>openSUSE OBS git mirror</title>
		<link>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/</link>
		<comments>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/#comments</comments>
		<pubDate>Fri, 13 Sep 2019 19:42:12 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[IPFS]]></category>
		<category><![CDATA[mirror]]></category>
		<category><![CDATA[obs]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14032</guid>
		<description><![CDATA[There was some discussion about our OBS and how in contrast Gentoo, VoidLinux or Fedora used git to track packages. So I made an experimental openSUSE:Factory git mirror to see how well it goes and how using it feels. The repo currently needs around 1GB but will slowly grow over time. I did not want [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>There was some discussion about our OBS and how in contrast <a href="https://github.com/gentoo/gentoo">Gentoo</a>, <a href="https://github.com/void-linux/void-packages/tree/master/srcpkgs/aubio/">VoidLinux</a> or <a href="https://src.fedoraproject.org/rpms/aubio/tree/master">Fedora</a> used git to track packages.</p>
<p>So I made an experimental <a href="https://github.com/bmwiedemann/openSUSE/">openSUSE:Factory git mirror</a> to see how well it goes and how using it feels.<br />
The repo currently needs around 1GB but will slowly grow over time. I did not want to spend effort to import all history.</p>
<p>Binary files are replaced by cryptographically secure symlinks into IPFS<br />
and I am currently providing files up to 9MB there.</p>
<p>If you can not run ipfs, you can still get these files through any of the public gateways like this:<br />
<code>curl https://ipfs.io$(readlink packages/a/aubio/aubio-0.4.9.tar.bz2) &gt; OUTPUT</code></p>
<p>So some benefits are already obvious.<br />
It is now much easier to find and download our patches.<br />
Downloading and seaching all of openSUSE is now much faster.<br />
And it works even on Thursdays (when our maintenance window often causes OBS downtimes).</p>
<p>It is meant to be a read-only mirror, so there is no point in opening pull-requests on github.</p>
<p>I hope, you enjoy it and have a lot of fun&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>The issues with contributing to projects only once</title>
		<link>https://lizards.opensuse.org/2017/06/04/the-issues-with-contributing-to-projects-only-once/</link>
		<comments>https://lizards.opensuse.org/2017/06/04/the-issues-with-contributing-to-projects-only-once/#comments</comments>
		<pubDate>Sun, 04 Jun 2017 04:06:31 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[contributing]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12523</guid>
		<description><![CDATA[I work to improve the openSUSE Tumbleweed (GNU/)Linux distribution. Specifically I make sure that all packages can be built twice on different hosts and still produce identical results, which has multiple benefits. This generates a lot of patches in a single week. OBS Sometimes it is enough to adjust the .spec file &#8211; that is [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>I work to improve the openSUSE Tumbleweed (GNU/)Linux distribution. Specifically I make sure that all packages can be built twice on different hosts and still produce identical results, which has <a href="https://reproducible-builds.org/docs/buy-in/">multiple benefits</a>. This generates <a href="https://reproducible.alioth.debian.org/blog/posts/109/">a lot of patches</a> in a single week.</p>
<p><strong>OBS</strong><br />
Sometimes it is enough to adjust the .spec file &#8211; that is a small text file usually specific to us. Then <a href="https://news.opensuse.org/2011/09/27/get-your-package-in-factory-for-12-1/">it is straight-forward</a></p>
<ol>
<li>osc bco</li>
<li>cd $PROJECT/$PACKAGE</li>
<li>optional: spec_add_patch $MY.patch $SOME.spec</li>
<li>edit *.spec</li>
<li>osc build</li>
<li>osc vc</li>
<li>osc ci</li>
<li>osc sr</li>
</ol>
<p>And OBS will even auto-clean the branch when the submit-request is accepted. And it has a &#8216;tasks&#8217; page to see and track SRs in various stages. For the spec_add_patch to work, you need to do once<br />
ln -s /usr/lib/build/spec_add_patch /usr/local/bin/</p>
<p>When you want to contribute patches upstream, so that other distributions benefit from your improvements as well, then you first need to find out, where they collaborate. A good starting point is the URL field in the .spec file, but a google search for &#8216;contribute $PROJECT&#8217; often is better.</p>
<p><strong>github</strong><br />
Then there are those many projects hosted on github, where it is also pretty low effort, because I already have the account and it even remains signed in. But some repos on github are only read-only mirrors.</p>
<ol>
<li>check pull requests, if some have been merged recently</li>
<li>fork the project</li>
<li>git clone git@github.com:&#8230;</li>
<li>cd $REPO</li>
<li>edit $FILES</li>
<li>git commit -a</li>
<li>git push</li>
<li>open pull request</li>
<li>maybe have to sign a CLA for the project</li>
<li>When change is accepted, delete fork to not clutter up repository list too much (on github under settings)</li>
</ol>
<p><strong>sourceforge</strong><br />
The older brother of github. They integrate various ways of contributing. The easiest one is to open a Ticket (Patch or Bug) and attach the .patch you want them to merge with a good description. While many developers do not have the time and energy to debug every bug you file, applying patches is much easier, so gets your issue fixed with a higher chance.</p>
<p><strong>devel Mailinglist</strong><br />
Some projects collaborate mainly through their development MLs, then I need to</p>
<ol>
<li>subscribe</li>
<li>confirm the subscription</li>
<li>git format-patch origin/master</li>
<li>git send-email &#8211;to $FOO-devel@&#8230; &#8211;from $MYSUBSCRIBEDEMAIL 000*.patch</li>
<li>wait for replies</li>
<li>if it is a high-volume ML, also add an IMAP folder and an entry to .procmailrc</li>
<li>unsubscribe</li>
<li>confirm</li>
</ol>
<p><strong>project bugtracker</strong><br />
Like https://bugzilla.gnome.org/ https://bugs.python.org/ https://bugs.ruby-lang.org/ https://bz.apache.org/bugzilla/</p>
<ol>
<li>create unique email addr</li>
<li>sign up for account</li>
<li>add info to my account list</li>
<li>optional: search for existing bug (90% of the time there is none)</li>
<li>file bug</li>
<li>attach patch</li>
</ol>
<p>So as you can see there is a wide range of ways. And most of them have some initial effort that you would only have once&#8230; But then I only contribute once per project, so I always pay that.</p>
<p>Thus, please make it easy for people to contribute one simple fix.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2017/06/04/the-issues-with-contributing-to-projects-only-once/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Reducing YaST rebuild time by 30%</title>
		<link>https://lizards.opensuse.org/2016/10/11/reducing-yast-rebuild-time-by-30/</link>
		<comments>https://lizards.opensuse.org/2016/10/11/reducing-yast-rebuild-time-by-30/#comments</comments>
		<pubDate>Tue, 11 Oct 2016 13:51:10 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12030</guid>
		<description><![CDATA[Here comes the YaST team again trying to flood your aggregator with blog post! Now it&#8217;s time for the story of how we reduced the critical path of the rebuild time of YaST RPM packages from 42min 2s to 29min 40s. Chapter 1: where to optimize Of course, the first step to start fixing something [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Here comes the YaST team again trying to flood your aggregator with blog post! Now it&#8217;s time for the story of how we reduced the critical path of the rebuild time of YaST RPM packages from 42min 2s to 29min 40s.</p>
<h2>Chapter 1: where to optimize</h2>
<p>Of course, the first step to start fixing something is finding out what exactly needs to be fixed. In our case, this breaks down into</p>
<ol>
<li>knowing the dependencies, and</li>
<li>knowing the individual build times.</li>
</ol>
<h3>Dependencies</h3>
<p>It is tempting to figure out the dependencies by yourself, by parsing the spec files. But it is hard to do right, and, more importantly, a reinvention of the wheel. The Build Service must know all this to be able to schedule the builds, and provides a convenient way to access it, with <code>osc dependson</code>:</p>
<pre>
$ osc dependson YaST:Head openSUSE_Factory x86_64
[...]
yast2-x11 :
   yast2-devtools
yast2-xml :
   yast2-core
   yast2-devtools
yast2-ycp-ui-bindings :
   libyui
   yast2-core
   yast2-devtools
</pre>
<h3>Individual build times</h3>
<p>For each source package, the Build Service produces not only binary RPMs but also a <code>_statistics</code> file, available in the <a href="https://build.opensuse.org/package/statistics/YaST:Head/yast2-core?arch=x86_64&amp;repository=openSUSE_Factory">web UI</a> or via <code>osc getbinaries</code>. We were interested in the total build time, although the data was of limited use because packages can be built on machines with vastly different power and this information is not included.</p>
<h2>Chapter 2: how to optimize</h2>
<p>Once we knew which screws needed to be tightened, it was time to do it. Fortunately we had more than one tool for the job.</p>
<h3>Stop using Autotools</h3>
<p>Autotools (automake, autoconf and configure) took up a majority of the time needed for building YaST packages. Now that most of those packages are written in pure Ruby, we don&#8217;t need autotools there checking for portability problems that we don&#8217;t have. Autotools are a leftover from the times 15 years back when they were the only sensible option. We <a href="https://twitter.com/timmartin2/status/23365017839599616">have wiped them out</a> where possible and have been <a href="https://github.com/yast/yast-bootloader/commit/5fb46ea8046ea9863e5411ffe1394797e71dde1e">switching</a> to our own <a href="https://github.com/openSUSE/packaging_rake_tasks">set of Rake tasks</a>.</p>
<h3>Stub the APIs used in tests</h3>
<p>We run a mixture of unit and integration tests at RPM build time. The downside of this is that we pull in many of the run time dependencies. Fortunately Ruby is a dynamic language and makes it easy to replace interfaces by stubs. That enables us to cut those dependencies.</p>
<p>
In fact, we also have some Perl code, notably in yast2-users. Although the stubbing techniques across languages are messier than with pure ruby, they are still effective for our purposes.</p>
<h3>Do not build specialized documentation</h3>
<p>This one is simple: if the development documentation is only useful for people that will check out the git repo anyway, then leave it out from the RPM.</p>
<h2>Appendix: the details</h2>
<p>
Enough of high-level explanations, we we promised you graphs, code and all kind of gory details, and a promise made is a debt unpaid. So there we go.</p>
<h3>Dependency graphs</h3>
<p>A picture is worth a thousand words. That&#8217;s why we came up with <a href="https://github.com/mvidner/rpm-build-dependencies">this small tool</a> to generate a graphical representation of the dependencies of the YaST packages. In the resulting graphs displayed below, a node is a source package in the build service, and an arrow means &#8220;needs for its build&#8221;. Redundant arrows are omitted (that is, we&#8217;ve erased an A→C if both A→B and B→C existed).</p>
<p>
We can see that the most prominent conclusion is that there is a large number of packages that depend on yast2, a collection of basic libraries.</p>
<p>
But on top of that, in the original graph there are 6 more layers, and the graph is not very dense there. After our fixes, there are only 4 layers that are more dense.</p>
<p>Is worth mentioning that the &#8220;layer&#8221; concept only works if the packages take roughly the same time to build; it would not be helpful if there were huge variations. To get a more accurate picture, we should have generated a histogram of build times. But the graph was good enough in our scenario&#8230; and we had to stop the analysis at some point. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>
The build dependency graph before our fixes:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before.png"><img src="//lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before-248x300.png" alt="YaST dependencies graph (before)" width="248" height="300" class="aligncenter size-medium wp-image-12033" srcset="https://lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before-248x300.png 248w, https://lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before-768x928.png 768w, https://lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before-848x1024.png 848w, https://lizards.opensuse.org/wp-content/uploads/2016/10/yast_deps_before.png 1600w" sizes="(max-width: 248px) 100vw, 248px" /></a></p>
<p>The build dependency graph after our fixes:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after.png"><img src="//lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after-184x300.png" alt="YaST dependencies graph (after)" width="184" height="300" class="aligncenter size-medium wp-image-11989" srcset="https://lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after-184x300.png 184w, https://lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after-768x1255.png 768w, https://lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after-627x1024.png 627w, https://lizards.opensuse.org/wp-content/uploads/2016/09/yast_deps_after.png 1600w" sizes="(max-width: 184px) 100vw, 184px" /></a></p>
<h3>Build statistics</h3>
<p>If those graph are not geeky enough for you, here you are the detailed build statistics from the build service</p>
<pre>
&lt;buildstatistics&gt;
  &lt;disk&gt;
    &lt;usage&gt;
      &lt;size unit="M"&gt;1118&lt;/size&gt;
      &lt;io_requests&gt;15578&lt;/io_requests&gt;
      &lt;io_sectors&gt;2156642&lt;/io_sectors&gt;
    &lt;/usage&gt;
  &lt;/disk&gt;
  &lt;memory&gt;
    &lt;usage&gt;      &lt;size unit="M"&gt;580&lt;/size&gt; &lt;/usage&gt;
  &lt;/memory&gt;
  &lt;times&gt;
    &lt;total&gt;      &lt;time unit="s"&gt;756&lt;/time&gt; &lt;/total&gt;         &lt;!-- THIS --&gt;
    &lt;preinstall&gt; &lt;time unit="s"&gt;8&lt;/time&gt;   &lt;/preinstall&gt;
    &lt;install&gt;    &lt;time unit="s"&gt;72&lt;/time&gt;  &lt;/install&gt;
    &lt;main&gt;       &lt;time unit="s"&gt;555&lt;/time&gt; &lt;/main&gt;
    &lt;download&gt;   &lt;time unit="s"&gt;4&lt;/time&gt;   &lt;/download&gt;
  &lt;/times&gt;
  &lt;download&gt;
    &lt;size unit="k"&gt;33564&lt;/size&gt;
    &lt;binaries&gt;53&lt;/binaries&gt;
    &lt;cachehits&gt;24&lt;/cachehits&gt;
    &lt;preinstallimage&gt;preinstallimage.preinstallimage.tar.gz&lt;/preinstallimage&gt;
  &lt;/download&gt;
&lt;/buildstatistics&gt;
</pre>
<h2>Epilogue</h2>
<p>This was definitely an interesting journey. We learned quite some  things. Specially we learned that there is still room for improvement, but most likely the time reduction will not pay off for the time invested implementing those improvements.</p>
<p>We have to be realistic and keep working in other interesting stuff to fuel the next sprint report, coming next week!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2016/10/11/reducing-yast-rebuild-time-by-30/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>targitter project &#8211; about OBS, tars and git</title>
		<link>https://lizards.opensuse.org/2015/10/05/targitter-project-about-obs-tars-and-git/</link>
		<pubDate>Mon, 05 Oct 2015 19:24:57 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[obs]]></category>
		<category><![CDATA[tar]]></category>
		<category><![CDATA[targitter]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=11543</guid>
		<description><![CDATA[In OBS we use source tarballs everywhere to build rpms (and debs) from. This has at least two major downsides: Storing all old tar files takes up a lot of disk space OBS workflows with .tar files and patches are rather different and somewhat disconnected from the git workflows we usually use everywhere else these [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>In OBS we use source tarballs everywhere to build rpms (and debs) from.</p>
<p>This has at least two major downsides:</p>
<ol>
<li>
Storing all old tar files takes up a lot of disk space
</li>
<li>
OBS workflows with .tar files and patches are rather different and somewhat disconnected from the git workflows we usually use everywhere else these days. E.g. for the SUSE OpenStack Cloud team we have a &#8220;trackupstream&#8221; jenkins job, that pulls the latest git version into a tarball once every day.
</li>
</ol>
<p>Fedora already keeps <a href="http://pkgs.fedoraproject.org/cgit/perl-OpenGL.git/plain/">their metadata</a> in git, but only a hash of the tarball.</p>
<p>So as one first step, I used two rather different projects to see how different the space usage would be. On the slow side I used 20 gtk2 tarballs from the last 5 years and on the fast side, I used 31 openstack-nova tarballs from Cloud:OpenStack:Master project from the last 5 months.<br />
I used <a href="https://www.zq1.de/~bernhard/targitter/eval/">scripts</a> that uncompressed each tarball, added it to a git repo and used git gc to trigger git&#8217;s compression. </p>
<p>Here are the resulting cumulative size graphs:</p>
<p><img src="https://www.zq1.de/~bernhard/targitter/eval/size-gtk2.svg" alt="gtk2 size graph" /><br />
<img src="https://www.zq1.de/~bernhard/targitter/eval/size-nova.svg" alt="nova size graph" /></p>
<p>The raw numbers after 20 tarballs: for nova the ratio is 89772:7344 = 12.2 and for gtk2 the ratio is 296836:53076 = 5.6</p>
<p>What do you think: would it be worth the effort to use more git in our OBS workflows?</p>
<p>Do we care about being able to reproduce the original tarballs? While this is possible, it has some challenges in differing file-ordering, timestamps, file-ownerships and <a href="https://github.com/jmacd/xdelta/pull/207">compression levels</a>.<br />
Or would it be enough if OBS converted a tarball into a signed commit (so it cannot be forged without people being able to notice)?</p>
<p>Do you know of a tool that can uncompress tarballs in a way that allows to track the content as single files, and allows to later re-create the original verbatim tarball, such that upstream signatures would still match?</p>
]]></content:encoded>
			</item>
		<item>
		<title>oSC15 &#8211; 200, Why not packaging workshop like mini hack sprint</title>
		<link>https://lizards.opensuse.org/2015/01/17/osc15-200-why-not-packaging-workshop-like-mini-hack-sprint/</link>
		<pubDate>Sat, 17 Jan 2015 16:01:50 +0000</pubDate>
		<dc:creator><![CDATA[Bruno Friedmann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Events]]></category>
		<category><![CDATA[Hackweek]]></category>
		<category><![CDATA[2015]]></category>
		<category><![CDATA[osc]]></category>
		<category><![CDATA[workshop]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=11193</guid>
		<description><![CDATA[Hello Geekos. I&#8217;m contacting you personally, as an openSUSE Board member. You certainly already know that we want to have a kicking openSUSE conference next 1st-4th May 2015 at the Haag (NL). Thus I&#8217;ve found that creating special workshop organized by development project could foster our beloved distribution. oSC is the unique case in the [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="//lizards.opensuse.org/wp-content/uploads/2015/01/li2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2015/01/li2-163x300.png" alt="welcome" width="163" height="300" class="alignright size-medium wp-image-11198" srcset="https://lizards.opensuse.org/wp-content/uploads/2015/01/li2-163x300.png 163w, https://lizards.opensuse.org/wp-content/uploads/2015/01/li2.png 214w" sizes="(max-width: 163px) 100vw, 163px" /></a>Hello Geekos. </p>
<p>I&#8217;m contacting you personally, as an openSUSE Board member.</p>
<p>You certainly already know that we want to have a kicking openSUSE conference next 1st-4th May 2015 at the Haag (NL).</p>
<p>Thus I&#8217;ve found that creating special workshop organized by development project could foster our beloved distribution.</p>
<p>oSC is the unique case in the year, where Geekos from all around the world meet together.<br />
Let&#8217;s imagine you, meeting perhaps for the first time your fellows, having nice discussions, and hacking around the software you maintain.<br />
There&#8217;s high level of chance to meet also your end users, and have constructive exchanges.</p>
<p>That&#8217;s why I invite you to propose a workshop directly to our event tools:<br />
<a href="https://events.opensuse.org/conference/osc15/proposal" target="_blank">https://events.opensuse.org/conference/osc15/proposal</a></p>
<p>Having a workshop run like a mini-hack sprint, would help any of us in the distribution and the project.<br />
Be it like learn people how to submit nice package, how to do maintenance, or how to do bug triage.<br />
<a href="//lizards.opensuse.org/wp-content/uploads/2015/01/li1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2015/01/li1.png" alt="li1" width="248" height="287" class="aligncenter size-full wp-image-11197" /></a><br />
I feel confident that you will have the creative approach to resolve your own problematic.<br />
The event place has small rooms for unattended sessions and they could be used to extend your workshop to get some more work done.</p>
<p>Some practical aspects:<br />
oSC website : <a href="https://events.opensuse.org/conference/oSC15" target="_blank">https://events.opensuse.org/conference/oSC15</a></p>
<p>And soon the travel support program for oSC 15 will be opened to handle your request about getting financial support for going to oSC.<br />
<a href="https://connect.opensuse.org/travel-support/" target="_blank">https://connect.opensuse.org/travel-support/</a></p>
<p>If you have any questions, thoughts or ideas, don&#8217;t hesitate to ask on -project mailing list<br />
or ping me by reply.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2015/01/li3.png"><img src="//lizards.opensuse.org/wp-content/uploads/2015/01/li3.png" alt="" width="191" height="280" class="alignleft size-full wp-image-11199" /></a>A final note about the why you should do it? Well beside being one of our &#8220;heroes&#8221; even if nobody need them <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /><br />
You and your co-maintainers will be able to explain your &#8220;job&#8221; on the project.<br />
Don&#8217;t you want to inspire new comers, lead them directly to the right direction, and share the load.<br />
Meeting you there, will also help our &#8220;marketing&#8221; force to light up a bit the work done in the shadow.</p>
<p>I really will appreciate your presence, afterwards, it&#8217;s you that create our distribution.<br />
The time has come for you to be warmly thank.</p>
<p>I&#8217;m looking forward to see you there.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Standing for Re-Election to the openSUSE Board</title>
		<link>https://lizards.opensuse.org/2015/01/12/standing-for-re-election-to-the-opensuse-board/</link>
		<pubDate>Mon, 12 Jan 2015 21:20:19 +0000</pubDate>
		<dc:creator><![CDATA[mrdocs]]></dc:creator>
				<category><![CDATA[Board]]></category>
		<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Elections]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Marketing]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=11179</guid>
		<description><![CDATA[Hi Fellow Geekos, This post is a summary of my wish to continue to serve on your behalf on the openSUSE board. My term has been a short one, as I was appointed to serve out the remainder of Vincent Untz&#8217; term. While I now work for SUSE (and it has been a fabulous experience), [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Hi Fellow Geekos,</p>
<p>This post is a summary of my wish to continue to serve on your behalf on the openSUSE board.</p>
<p>My term has been a short one, as I was appointed to serve out the remainder of Vincent Untz&#8217; term.</p>
<p>While I now work for SUSE (and it has been a fabulous experience), that does not change my view or efforts to contribute to openSUSE.  Prior to joining SUSE, as a part of the Sales Engineering team, I was elected to the board for a two year term. To avoid having too many SUSE employees, I had to step down.  A rule I completely support.</p>
<p>Having been an openSUSE member long before joining SUSE, I think I have a keen awareness of what the community is about and where we can improve together.</p>
<p>My take is we have an awesome group of contributors who want to see the community grow and prosper.  With things like Tumbleweed and OBS, among others, we have shown real innovation and technical leadership in the Linux world. We have arguably one the top distros available.  It is solid, polished and usable for a wide variety of use cases. We need to keep the openness and solid collaboration which enables everyone to participate and succeed.</p>
<p>My efforts within openSUSE have been mostly focused on the Open Build Server, maintaining several projects, as well as, being part of the Factory review team.</p>
<p>Going forward, I want to concentrate on reaching out beyond our community to build more awareness of what an awesome distro we have, along with a pretty friendly community. I see other, less compelling, distros getting more visibility than perhaps is deserved.</p>
<p>Along the same lines, my take is we as a community can take a more active role in bringing in new members, who might not be technical folks, but can help in the marketing and outreach. I&#8217;ve started a local SUSE group through meetup.com which is a different way to find new users and contributors.</p>
<p>One other reason I wish to remain on the board, is we have a solid working relationship and there is a lot of mutual respect and good collaboration.</p>
<p>No matter who is elected to the board, I am very pleased with the caliber of the folks running and know the community will be in good hands moving forward.</p>
<p>Thank you in advance for your vote!</p>
<p>Peter Linnell</p>
]]></content:encoded>
			</item>
		<item>
		<title>osc: speedup update of a project working copy</title>
		<link>https://lizards.opensuse.org/2014/06/26/osc-speedup-update-of-a-project-working-copy/</link>
		<pubDate>Thu, 26 Jun 2014 13:03:57 +0000</pubDate>
		<dc:creator><![CDATA[Marcus Hüwe]]></dc:creator>
				<category><![CDATA[Build Service]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10879</guid>
		<description><![CDATA[Hi, recently, I pushed a commit that speeds up the update of an osc project working copy, if most of the packages in the working copy are already up to date (that is no update has to be performed). The following table shows the improvements of the new code (in terms of wall-clock time). Both [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Hi,</p>
<p>recently, I pushed a commit that speeds up the update of an osc project<br />
working copy, if most of the packages in the working copy are already up to<br />
date (that is no update has to be performed).<br />
The following table shows the improvements of the new code (in terms of<br />
wall-clock time). Both project working copies were already up to date<br />
and the packages in the home:Marcus_H project were unexpanded.</p>
<pre>
project       # number of packages  #    old code # new code
home:Marcus_H                   66        51.135s    10.653s
d:l:r:e                       1245     7:07.07min    17.804s
</pre>
<p>(the numbers for the devel:languages:ruby:extensions (d:l:r:e) project<br />
were kindly provided by darix &#8211; thanks!).</p>
<p>Technically, we just reduced the number of http requests for packages<br />
that are already up to date by using the backend&#8217;s getprojectsourceinfo<br />
call (/source/project?view=info&amp;package=pkg_1&#8230;&amp;package=pkg_n).<br />
Note: currently, such a reduction is not possible for packages that have<br />
a _service file, because a small change in the backend is needed (see <a href="http://lists.opensuse.org/opensuse-buildservice/2014-06/msg00067.html">[1]</a>).<br />
Consequently, there are no time improvements for such packages.</p>
<p>If you want to test the new code, use the osc package from the<br />
devel:tools:scm repo (<a href="http://download.opensuse.org/repositories/devel:/tools:/scm/">http://download.opensuse.org/repositories/devel:/tools:/scm/</a>).<br />
Feedback is always welcome! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Next, my plan is to improve the speed of an update of a single package<br />
working copy (again by reducing the number of http requests).</p>
<p>[1] <a href="http://lists.opensuse.org/opensuse-buildservice/2014-06/msg00067.html">http://lists.opensuse.org/opensuse-buildservice/2014-06/msg00067.html</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>First fruits &#8211; update on openQA and Staging work</title>
		<link>https://lizards.opensuse.org/2014/02/19/first-fruits-update-on-openqa-and-staging-work/</link>
		<pubDate>Wed, 19 Feb 2014 08:40:39 +0000</pubDate>
		<dc:creator><![CDATA[calumma]]></dc:creator>
				<category><![CDATA[Boosters]]></category>
		<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Infrastructure]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10570</guid>
		<description><![CDATA[In our previous summary, we talked about some basic research and some ground work to build on. This time we have some first exciting results! openQA Last week we rearranged the repository a little bit, creating a new branch called &#34;devel&#34; where all the exciting (and not so exciting) changes are taking place. Our little [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>In our <a href="//lizards.opensuse.org/2014/02/07/some-news-from-the-trenches/">previous summary</a>, we talked about some basic research and some ground work to build on. This time we have some first exciting results!</p>
<h3>openQA</h3>
<p>Last week we rearranged the repository a little bit, creating a <a href="https://github.com/openSUSE-Team/openQA/tree/devel">new branch called &quot;devel&quot;</a> where all the exciting (and not so exciting) changes are taking place. Our little Factory <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>The main difference between this branch as master is that, as you could read in the previous blog, the devel branch is openQA build on <a href="http://mojolicio.us">Mojolicious</a>, a nice web development framework. And having a proper web framework is starting to show its benefits: we have openID login available! Unfortunately the current openSUSE openID provider is a little bit weird, so it doesn&#8217;t play well with our tool yet, but some others are working and openSUSE accounts will be the next step. Having working user accounts is necessary to be able to start defining permissions and to make openQA truly multiuser. And to be able to deploy the new version on a public server!</p>
<p>The other main focus of this week has been internal polishing. We have revamped the database layout and changed the way in which the different openQA components communicate with each other. The openQA functionality is spread out over several parts: the workers are responsible of actually executing the tests in virtual machines reporting the result after every execution; some client utilities are used to load new ISO images and similar tasks and, finally, we have the one openQA Server to rule them all. Until now, the communication between the server and the other components was done using <a href="http://json-rpc.org/">JSON-RPC</a> (a lightweight alternative to XML-RPC). We have dropped JSON-RPC in favor of a <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST-like</a> API with just JSON over plain HTTP. This change allowed us to implement exactly the same functionality in a way that is simpler, perfectly supported by any web framework, natively spoken by browsers and easier to authenticate (using, for example, plain HTTP authentication or openID). This is also the first step to future integration with other services (think OBS, as the ultimate goal is to use openQA to test staging projects).</p>
<p>But, who tests the tester? openQA is growing and changing quite fast so we have continued with the task of creating a good testing infrastructure to tests openQA itself to make sure that all our changes do not result in breakage. We only have a few tests right now, but we now have a solid foundation to write more and more tests.</p>
<h3>Staging and package manipulation</h3>
<p>In the last blog post we told you we were investigating a code test suite to test the abilities of a osc plugin we are writing. osc is the commandline tool for handling the Open Build Service, and this plugin is meant to help with the administration of staging projects. We&#8217;ve been thinking about how to move forward with the testing part as we want to make sure the functionality works as advertised. More important, we write tests to make sure that our additions and changes do not break existing functionality. We have started merging functionality from various scripts handling staging thingies and rings we had into this plugin. This is partially done so we can do basic staging project tasks! We can take a request (be it submit or delete) and put it to test in a staging project. We can also move packages between staging projects and we have a simple YAML in project descriptions to indicate what packages and what requests are there.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2014/02/openqa-staging.png"><img src="//lizards.opensuse.org/wp-content/uploads/2014/02/openqa-staging-300x102.png" alt="We're all green!" width="250" height="85" class="alignright size-medium wp-image-10576" srcset="https://lizards.opensuse.org/wp-content/uploads/2014/02/openqa-staging-300x102.png 300w, https://lizards.opensuse.org/wp-content/uploads/2014/02/openqa-staging-1024x350.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2014/02/openqa-staging.png 1131w" sizes="(max-width: 250px) 100vw, 250px" /></a><br />
Coolo already started using the plugin for some tasks, so you can <a href="https://build.opensuse.org/project/subprojects/openSUSE:Factory:Staging">see pretty titles</a> and <a href="https://build.opensuse.org/project/show/openSUSE:Factory:Staging:C">metadata</a> in staging projects descriptions. Not impressive enough? Let me provide you a good headline:</p>
<p><b>Thanks to staging projects, no single regression have been introduced this year in the core of Factory</b></p>
<p>You can enjoy a more detailed description in <a href="http://lists.opensuse.org/opensuse-factory/2014-02/msg00252.html">this announcement</a> written by coolo to the Factory mailing list and have some visual joy in the included screenshot (genuine pr0n for QA engineers).</p>
<p>Last but not least, we also did some cleanup of the sources in the repo and of course we added more tests (as functionality grows). And there has been work on other parts of the plugin, like taking rings into account.</p>
<h3>Result</h3>
<p>We already have some useful functionality which we are going to expand and build on. Not that much to show yet, but we are progressing towards our goal. You can follow our progress either in the way of tasks (<a href="https://progress.opensuse.org/projects/openqav3">openQA</a> and <a href="https://progress.opensuse.org/projects/stagings">staging projects</a>) or just follow our commit history on github (again for both <a href="https://github.com/openSUSE-Team/openQA/tree/devel">openQA</a> and <a href="https://github.com/openSUSE/osc-plugin-factory">staging plugin</a>).</p>
<p>We are very much looking forward to feedback and thoughts &#8211; these changes aim to make Factory development easier and thus we need to hear from all you!</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
