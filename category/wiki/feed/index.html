<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Wiki &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/wiki/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>

	<item>
		<title>Russian openSUSE community</title>
		<link>https://lizards.opensuse.org/2010/03/30/russian-opensuse-community/</link>
		<comments>https://lizards.opensuse.org/2010/03/30/russian-opensuse-community/#comments</comments>
		<pubDate>Tue, 30 Mar 2010 11:27:11 +0000</pubDate>
		<dc:creator><![CDATA[Alexander Naumov]]></dc:creator>
				<category><![CDATA[Contrib]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Forums]]></category>
		<category><![CDATA[Localization]]></category>
		<category><![CDATA[Wiki]]></category>
		<category><![CDATA[Community]]></category>
		<category><![CDATA[fun]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=3625</guid>
		<description><![CDATA[Hello everybody, I want to share some ideas about the success of the Russian openSUSE community, and try to answer the question about its popularity. As you can see it is one of the top places: The reason for the high popularity of this distribution in Germany is of course the fact that the German [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Hello everybody,</p>
<p>I want to share some ideas about the success of the Russian openSUSE community, and try to answer the question about its <a href="http://en.opensuse.org/Statistics">popularity</a>. As you can see it is one of the top places:</p>
<p><a href="http://lizards.opensuse.org/wp-content/uploads/2010/03/russian_comminity.jpeg"><img class="aligncenter size-full wp-image-5369" src="http://lizards.opensuse.org/wp-content/uploads/2010/03/russian_comminity.jpeg" alt="" width="657" height="369" srcset="https://lizards.opensuse.org/wp-content/uploads/2010/03/russian_comminity.jpeg 657w, https://lizards.opensuse.org/wp-content/uploads/2010/03/russian_comminity-300x168.jpg 300w" sizes="(max-width: 657px) 100vw, 657px" /></a></p>
<p>The reason for the high popularity of this distribution in Germany is of course the fact that the German SuSE distribution and the main branch of development is located in Nuremberg. Popularity in the U.S. is due Novell &#8211; an American company, and of course the language is English. But why are so many people in Russia choosing openSUSE?</p>
<p>Good question. One of the main things that influence the choice of distribution &#8211; the quality and localization. The global community plays a top role for quality of distribution and local make it appropriate for Russian language users (of course a local community can be as part of a global community).</p>
<p><img class="aligncenter" src="http://thefreecountry.files.wordpress.com/2010/03/opensuse_rtt.png" alt="" width="400" height="110" /></p>
<p>Perhaps most important is the documentation. And of course, not everyone wants (or can) read the documentation in English. Everyone wants to read the documentation in their native language. The distribution may be in a good shape and stable, nice and convenient, but without documentation it will use very few. Translated documentation is very important to the community. The translation must have a high quality, understandable, and as it must be kept up to date.</p>
<p>For the community its also profitable that 2 guys from the community working for Novell (in Nuremberg and in Prague). This provides better communication between &#8220;developers &#8211; community&#8221;. It helps to be closer to the project. This allows you to always be aware of all the major news of the project. And of course the translation is much better if they are engaged not just as a translator, but the employee who works on the distribution.</p>
<p>Of course this also applys for software. Although it is not as important as documentation, it still makes an impression on the quality of distribution. Everyone wants to work with the software in their native language %)</p>
<p>A successful community is a group of people who love openSUSE, who understands why the software should be free, who wants to make openSUSE better and better&#8230; every day.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2010/03/30/russian-opensuse-community/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		</item>
		<item>
		<title>openSUSE Wiki Changes</title>
		<link>https://lizards.opensuse.org/2009/12/19/opensuse-wiki-changes/</link>
		<pubDate>Sat, 19 Dec 2009 20:31:03 +0000</pubDate>
		<dc:creator><![CDATA[Klaas Freitag]]></dc:creator>
				<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Quality Assurance]]></category>
		<category><![CDATA[Wiki]]></category>
		<category><![CDATA[contribution]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=2871</guid>
		<description><![CDATA[There was a lot of dicussion in the openSUSE project about the project wiki which was suffering from something all successful projects in some point of time experience: There is a huge amount of documentation in the Wiki, however it seems a bit unstructured, sometimes outdated or not really maintained. The brave openSUSE wiki team [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>There was a lot of dicussion in the openSUSE project about the <a href="http://en.opensuse.org">project wiki</a> which was suffering from something all successful projects in some point of time experience: There is a huge amount of documentation in the Wiki, however it seems a bit unstructured, sometimes outdated or not really maintained.</p>
<p>The <a href="http://en.opensuse.org/Wiki_team">brave openSUSE wiki team</a> stepped up to change that. The decision is to set up a new wiki with a well selected set of extensions and now the content of the old wiki is going to be transfered to the new wiki. Of course there will be a rigorous quality check of the articles, as well as a new thought through structure. The goal of this huge amount of work is to provide a outstanding good and well consumable source of information for all people in and interested in the openSUSE project. That is a high goal and I admire the energy and dedication of the wiki team.</p>
<p>The new wiki is now in place. So if you also want to help, either with the motivation of a developer telling how things work, or from the upstream perspective using the openSUSE vehicle to push the project or simply because you want to help openSUSE to become even better, first read the <a href="http://en.opensuse.org/Transition_Guidelines">Transition Guidelines</a> and subscribe on the wiki mailinglist, since most of the coordination happens there.<br />
There is also a <a href="http://forums.opensuse.org/tech-news/428612-wiki-transition-call-contributors.html">Forum Thread</a> going on around that.</p>
<p>Please <b>help</b> to make this a success &#8211; thanks <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
			</item>
		<item>
		<title>update from the openSUSE Boosters</title>
		<link>https://lizards.opensuse.org/2009/10/21/update-from-the-opensuse-boosters/</link>
		<pubDate>Wed, 21 Oct 2009 16:48:36 +0000</pubDate>
		<dc:creator><![CDATA[Will Stephenson]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=2368</guid>
		<description><![CDATA[While openSUSE 11.2 gets closer and closer, all of the Boosters are mostly busy making sure RC1 and the final release are good.  But we&#8217;re finding some time to work on our Boosting projects.  On the umbrella site for all opensuse.org sites front, a design and user profiles are being developed .  The factory.opensuse.org status [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>While openSUSE 11.2 gets closer and closer, all of the Boosters are mostly busy making sure RC1 and the final release are good.  But we&#8217;re finding some time to work on our Boosting projects.  On the <a href="http://en.opensuse.org/Boosters_Team/Projects/Integrate_all_Infrastructure_under_one_Umbrella" target="_self">umbrella site for all opensuse.org sites</a> front, a design and user profiles are being developed .  The <a href="http://en.opensuse.org/Boosters_Team/Projects/FactoryStatus" target="_self">factory.opensuse.org status site concept</a> is being developed in collaboration with the Maintenance team, so that it will be used for seeing the state of maintenance work (ie online updates) for released openSUSE versions.  We&#8217;re analysing the Build Service web client code for how to hook in there, and several team members are brushing up their Ruby skills.  The <a href="http://en.opensuse.org/Boosters_Team/Projects/Discoverable_centralised_documentation" target="_self">reorganize contributor documentation</a> squad are discussing a new structure on the opensuse-wiki mailing list.</p>
<p>If you have any feedback on these ideas you can find us on the opensuse-project mailing list or on -wiki as above.  If you want to help out, we&#8217;ll be using<a href="mailto:opensuse-boosters@opensuse.org"> opensuse-boosters@opensuse.org </a>in future.</p>
<p>Busily,</p>
<p>The Propaganda Minister</p>
]]></content:encoded>
			</item>
		<item>
		<title>Quality Checking the openSUSE Wiki</title>
		<link>https://lizards.opensuse.org/2009/06/16/quality-checking-the-opensuse-wiki/</link>
		<pubDate>Tue, 16 Jun 2009 10:01:06 +0000</pubDate>
		<dc:creator><![CDATA[Andreas Jaeger]]></dc:creator>
				<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=1307</guid>
		<description><![CDATA[I talked today with Frank and he mentioned that during openSUSE Community Week some people discussed improving the openSUSE Wiki. He has written a first email on what he wants to do titled &#8216;RFC: Marking articles that have been &#8220;QA&#8221;&#8216;ed&#8216; and now started going through the pages.  His progress report is available on the opensuse-wiki [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>I talked today with Frank and he mentioned that during<a title="openSUSE Community Week" href="http://en.opensuse.org/CommunityWeek" target="_blank"> openSUSE Community Week</a> some people discussed improving the openSUSE Wiki.</p>
<p>He has written a first email on what he wants to do titled &#8216;<a href="http://lists.opensuse.org/opensuse-wiki/2009-06/msg00004.html" target="_blank">RFC: Marking articles that have been &#8220;QA&#8221;&#8216;ed</a>&#8216; and now started going through the pages.  His progress report is available on the opensuse-wiki mailing list and titled &#8216;<a href="http://lists.opensuse.org/opensuse-wiki/2009-06/msg00017.html">1st report on methodically checking pages on en.o.o</a>.&#8217;</p>
<p>Frank would appreciate help with the task would be very much. If you like to help, please  join the IRC channel #opensuse-wiki on Freenode &#8211; it&#8217;s probably easier to coordinate via IRC than via email.</p>
<p>To see the current status, check  <!-- p, li { white-space: pre-wrap; } --><a href="http://en.opensuse.org/Wiki_Team/Checked_Pages"><span style="color: #0057ae; text-decoration: underline;">http://en.opensuse.org/Wiki_Team/Checked_Pages</span></a><span style="color: #0000ff; text-decoration: underline;"> </span></p>
<p style="margin: 0px; text-indent: 0px;"><!--EndFragment--></p>
]]></content:encoded>
			</item>
		<item>
		<title>Transcoding/Ripping Cluster using KIWI-LTSP</title>
		<link>https://lizards.opensuse.org/2009/06/11/transcodingripping-cluster-using-kiwi-ltsp/</link>
		<pubDate>Thu, 11 Jun 2009 17:43:56 +0000</pubDate>
		<dc:creator><![CDATA[Jigish Gohil]]></dc:creator>
				<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Education]]></category>
		<category><![CDATA[Server]]></category>
		<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=1275</guid>
		<description><![CDATA[We had a bit of High Performance Cluster (HPC) setup already to do distributed build using Icecream on KIWI-LTSP, now Mathis has written a &#8220;howto&#8221; use KIWI-LTSP for clustered ripping and transcoding, another kind of HPC use of LTSP network. Ready to run LTSP server is integrated in openSUSE-Edu Li-f-e DVD making it very easy [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>We had a bit of High Performance Cluster (HPC) setup already to do distributed build using <a href="http://en.opensuse.org/LTSP/Icecream">Icecream on KIWI-LTSP</a>, now Mathis has written a &#8220;howto&#8221; use <a href="http://en.opensuse.org/LTSP/Transcoding">KIWI-LTSP for clustered ripping and transcoding</a>, another kind of HPC use of LTSP network. Ready to run LTSP server is integrated in <a href="http://en.opensuse.org/Education">openSUSE-Edu</a> <a href="http://en.opensuse.org/Education/Live">Li-f-e DVD</a> making it very easy to do such setups.</p>
<p>&#8220;Since the transcoding process can take a long time, the work can be split into several fragments which then can be processed by other machines on a network. The best way to accomplish this is to set up a server which controls the transcoding process, from which the (diskless) clients can boot.&#8221;</p>
<p>So why openSUSE <a href="http://en.opensuse.org/LTSP">KIWI-LTSP</a> for this job? This is what Mathis had to say: &#8220;well, I just needed some OS to boot from the network, luckily it was LTSP,  so I saved some time gathering parts for an OS since openSUSE also provides the dvd::rip and transcode packages and KIWI-LTSP automatically resolves the dependencies, this is an extra point for it&#8230;&#8221;</p>
<p>It could  serve digital  studios as well or convert your DVD collection to use on home media center PC very quickly <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
			</item>
		<item>
		<title>Nothing really special here&#8230;</title>
		<link>https://lizards.opensuse.org/2009/03/12/nothing-really-special-here/</link>
		<pubDate>Thu, 12 Mar 2009 19:50:54 +0000</pubDate>
		<dc:creator><![CDATA[Dmitry Serpokryl]]></dc:creator>
				<category><![CDATA[Desktop]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=575</guid>
		<description><![CDATA[Dear Ladies and Gents, version &#8220;3.0.6&#8221; of openSUSE-Enlightenment (SOAD project) is out: Download page GWDG mirror will be updated to the version &#8220;3.0.6&#8221; on Monday (next week). Changelog from 3.0.5 to 3.0.6 version * new updated kernel (version 2.6.27.19_3.2) * updated EFL/E to svn_r39423 (2009-03-09) * updated OOo (version 3.0.1.3) * fixed &#8220;Del&#8221; key operation [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Dear Ladies and Gents,<br />
version &#8220;3.0.6&#8221; of openSUSE-Enlightenment (SOAD project) is out:</p>
<p><a href="http://sda.scwlab.com/soad_linux.html">Download page</a></p>
<p><a href="http://ftp5.gwdg.de/pub/linux/soad/">GWDG mirror</a> will be updated to the version &#8220;3.0.6&#8221; on Monday (next week).</p>
<p>Changelog from 3.0.5 to 3.0.6 version<br />
* new updated kernel (version 2.6.27.19_3.2)<br />
* updated EFL/E to svn_r39423 (2009-03-09)<br />
* updated OOo (version 3.0.1.3)<br />
* fixed &#8220;Del&#8221; key operation in &#8220;xterm&#8221;<br />
* fixed the segfault during the first login to Enlightenment-DR17<br />
* improved &#8220;Wicd&#8221; init script<br />
* added GTK+ &#8220;Unity&#8221; theme<br />
* removed &#8220;atl1e&#8221; driver for &#8220;Attansic&#8221; LAN cards (found on the eeepc1000* mostly)<br />
* following drivers are added: &#8220;rtl8187&#8221;, &#8220;rt73&#8221;, &#8220;rt61&#8221;, &#8220;r8101&#8221;, &#8220;r8168&#8221;<br />
* improved list of a default installed repositories<br />
* overall code/software/packages update to the current openSUSE-11.1 state<br />
* some useful Wi-Fi utilities added along with the advanced documentation (Tutorials&#8230;) <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /><br />
* other misc. enhancements</p>
<p>In general &#8211; this version just works. The only disadvantage is that &#8220;LiveCD&#8221; version require 800M media (or a blank DVD-R/RW disk) and cannot be recorded to the standard 700M CD-R/RW. The absence of a &#8220;delta&#8221; images are due to the huge update of a packages &#8211; &#8220;delta&#8221; has no sense this time.</p>
<p>We&#8217;re also recommend you to visit our two new modest wiki pages and read a bit about:<br />
<a href="http://en.opensuse.org/Ecomorph">Ecomorph</a><br />
<a href="http://en.opensuse.org/Wicd">Wicd</a></p>
<p>Btw, it looks like &#8220;Wicd&#8221; have a chance to be a default network configuration tool for KDE-4.3 (Dev. Team are constantly improving the package, that&#8217;s great!).</p>
<p><a href="http://sda.scwlab.com/livecd_packages">LiveCD: list of installed packages</a><br />
<a href="http://sda.scwlab.com/usb_stick_packages">USB-stick: list of installed packages</a></p>
<p>Huge thanks to Mikhail Kazakov for a help in preparation of this release version!</p>
<p>Enjoy!</p>
<p>Regards,<br />
sda</p>
<p>P.S. The curious persons are welcome to glimpse at the small <a href="http://sda.scwlab.com/livecd_packages_size_uncompressed.pdf">&#8220;Detailed uncompressed LiveCD packages size&#8221;</a> pdf file.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Trying to bring Russian community together</title>
		<link>https://lizards.opensuse.org/2009/03/06/trying-to-bring-russian-community-together/</link>
		<pubDate>Fri, 06 Mar 2009 11:58:23 +0000</pubDate>
		<dc:creator><![CDATA[k0da]]></dc:creator>
				<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Localization]]></category>
		<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=518</guid>
		<description><![CDATA[Tomorrow(07.03.09) we have scheduled meeting of Russian community. Meeting will take place at 19:00 (GMT+3 (MSK)) on #opensuse.ru channel (Freenode) We are going to: *Discuss some terms. And choose which translation of which term are more appropriate for translation. *Fill up the glossary. *Cleanup ru.opensuse.org wiki . *Choose candidates for &#8220;Spokesperson program&#8221; from Russia. *Discuss [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Tomorrow(07.03.09) we have scheduled meeting of Russian community.</p>
<p>Meeting will take place at 19:00 (GMT+3 (MSK)) on<br />
#<a href="http://opensuse.ru/" target="_blank">opensuse.ru</a> channel (Freenode)</p>
<p>We are going to:</p>
<p>*Discuss some terms. And choose which translation of which term are more appropriate for translation.</p>
<p>*Fill up the glossary.</p>
<p>*Cleanup ru.opensuse.org wiki .</p>
<p>*Choose candidates for &#8220;Spokesperson program&#8221; from Russia.</p>
<p>*Discuss what&#8217;s wrong with wiki. Why peoples creating another suse portals. (like open-suse.ru, suseclub.ru,suseclub2.ru)</p>
<p>*Discuss what we can do to involve more users in community life.</p>
<p>I&#8217;m glad to see all interested Russian users on #opensuse.ru channel tomorrow.</p>
]]></content:encoded>
			</item>
		<item>
		<title>RPMLINT Wiki Side overworked</title>
		<link>https://lizards.opensuse.org/2009/01/08/rpmlint-wiki-side-overworked/</link>
		<pubDate>Thu, 08 Jan 2009 13:33:31 +0000</pubDate>
		<dc:creator><![CDATA[Sascha Manns]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[lizards.openSUSE.org]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Wiki]]></category>
		<category><![CDATA[call]]></category>
		<category><![CDATA[contribution]]></category>
		<category><![CDATA[rpmlint]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=353</guid>
		<description><![CDATA[I&#8217;m an new Packager in OpenSUSE BuildService, and i like this work. But if i would like to package for Factory, RPMLINT gives me any Errors or warnings. But these things to fix, are very difficult. Our Wiki Side for RPMLINT doesn&#8217;t contain many Error or Warningcodes. But yesterday i&#8217;ve found an Side, with other [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>I&#8217;m an new Packager in OpenSUSE BuildService, and i like this work. But if i would like to package for Factory, RPMLINT gives me any Errors or warnings. But these things to fix, are very difficult. Our Wiki Side for RPMLINT doesn&#8217;t contain many Error or Warningcodes.</p>
<p>But yesterday i&#8217;ve found an Side, with other Errorcodes from RPMLINT. Today i imported these Codes to our Wikiside <a href="http://en.opensuse.org/Packaging/RpmLint">http://en.opensuse.org/Packaging/RpmLint</a>. I think it is not possible to list all codes on the Side. But i wish, that the side includes more Codes in the future.</p>
<p>No i would like to make an Call for contribution. If every Packager insert the codes, that he knows, we have an good library soon.</p>
<p>And on this Moment i would like to make an request about helping- Thank you all for the hard Work.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Fate Internal, Up- and Downstream</title>
		<link>https://lizards.opensuse.org/2008/12/16/fate-internal-up-and-downstream/</link>
		<pubDate>Tue, 16 Dec 2008 11:36:27 +0000</pubDate>
		<dc:creator><![CDATA[Klaas Freitag]]></dc:creator>
				<category><![CDATA[Contrib]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[KDE]]></category>
		<category><![CDATA[Marketing]]></category>
		<category><![CDATA[Wiki]]></category>
		<category><![CDATA[Community]]></category>
		<category><![CDATA[Downstream]]></category>
		<category><![CDATA[Fate]]></category>
		<category><![CDATA[Featuretracking]]></category>
		<category><![CDATA[RFC]]></category>
		<category><![CDATA[Upstream]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=315</guid>
		<description><![CDATA[motivated by Aaron&#8217;s blog post More downstream fun I was thinking about how Fate could be a more important part of infrastructure in the Linux landscape. Fate is now an important part of the Novell/SUSE infrastructure and we are currently in the process to open it up for the openSUSE community. But could Fate also [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>motivated by <a title="Aaron's blog" href="http://aseigo.blogspot.com/" target="_blank">Aaron&#8217;s</a> blog post <a title="More downstream fun" href="http://aseigo.blogspot.com/2008/12/more-downstream-fun.html" target="_blank">More downstream fun</a> I was thinking about how Fate could be a more important part of infrastructure in the Linux landscape. Fate is now an important part of the Novell/SUSE infrastructure and we are currently in the process to open it up for the openSUSE community. But could Fate also be useful for upstream integration? To let you participate in the discussion I think I should start with some explanations what Fate is and in which environment we are with it.</p>
<p><strong>Fate</strong> is a system developed at SUSE over the last few years to track features and requirements for Novell Linux products.  The term &#8220;feature&#8221; is already is a topic for scientific papers, but how we understand a feature is a functionality  that is not yet in the product but required or wanted. It references future products, in most cases more than one such as SLE and openSUSE.</p>
<p><a href='http://lizards.opensuse.org/wp-content/uploads/2008/12/fate_community.png'><img src="http://lizards.opensuse.org/wp-content/uploads/2008/12/fate_community-300x185.png" alt="Fate Feature Tracking Environment" align="left" width="300" height="185" class="alignnone size-medium wp-image-316" srcset="https://lizards.opensuse.org/wp-content/uploads/2008/12/fate_community-300x185.png 300w, https://lizards.opensuse.org/wp-content/uploads/2008/12/fate_community.png 734w" sizes="(max-width: 300px) 100vw, 300px" /></a>The little sketch illustrates the dilemma in which we are when it comes to product planning. Basically it is all about one  thing: decision taking. Decisions have to be taken about the new functionality  that goes into a product and the tasks internal people work on. This is based on the decision how the product should look alike from a high level point of view. To make a solid decision about the high level product it needs to be clear what we are actually able to put into the product at a given time. That is only a part of what is <em>really</em> going on but let&#8217;s leave it with that for simplicity.</p>
<p>You see that lots of the base information which is needed to make<br />
good decisions comes from different people: Product managers have a strong idea of how products should be, the technical project manager knows about dates and technical possibilities and can plan with the engineering managers how that can be achieved with the given amount of people in a given time frame. Technical feasibility is worked out with the developers as they&#8217;re the experts. The colored arrows try to visualize the communication ways, different colors mark different topics.</p>
<p>Since we work with the communities we have more input of information: The user community tells what is needed and the upstream communities announce what they plan to do by when.</p>
<p>The part with the internal decision taking is very much based on Fate in the Linux part of Novell and that is working fine. Features come in by a requester and all involved parts can give their thoughts in  a discussion forum. The key functionalities add their priority for the feature and finally PM and TPM come to a decision. Features with a high priority have to make it into the product. Engineering managers can assign developers and they can mark features as finished. All the processes are covered by a set of configurable rules. The Fate system is integrated into other infrastructure parts. There are several clients for different needs, the most mature is the KDE fat client.</p>
<p>What is not yet optimal are two things: There is no good way yet for the user community to community their wishes for upcoming products. We are facing that with opening up a new web based openSUSE Fate client soon. That will involve the user community not only in testing and using the product but already in its planing in a defined way.</p>
<p>A more tricky part is how to involve the upstream communities. It would be great for a Product Manager of a Linux distribution to see the feature plans for upcoming releases of big upstream projects, maybe somehow integrated into the Fate for his product. Would the Fate model as described here in a nutshell suitable for upstream projects?</p>
<p>For example, could KDE or GNOME make use of parts of the process for them internally and provide a structured interface to the downstream parties? If so, that could add a lot of transparency. Transparency is the precondition for flexibility and trust and as a result for better collaboration which would benefit all.</p>
<p>I hope that helps for a basic understanding and would love to hear your opinion. I promise to come up with more information about the Fate system and improve my drawing skills <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
			</item>
		<item>
		<title>Longstanding Wiki Problem Fixed.</title>
		<link>https://lizards.opensuse.org/2008/12/15/longstanding-wiki-problem-fixed/</link>
		<comments>https://lizards.opensuse.org/2008/12/15/longstanding-wiki-problem-fixed/#comments</comments>
		<pubDate>Mon, 15 Dec 2008 00:54:57 +0000</pubDate>
		<dc:creator><![CDATA[Peter Pöml]]></dc:creator>
				<category><![CDATA[Apache]]></category>
		<category><![CDATA[Base System]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Network]]></category>
		<category><![CDATA[Server]]></category>
		<category><![CDATA[Wiki]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=312</guid>
		<description><![CDATA[Today, I fixed a long-standing, serious problem in the openSUSE wiki: 15-20 seconds long hangs that one would see when loading pages. It occured only when one was logged in, and it happened (for me) on every second access. So one page load hang, the next would work, the next would hang again, and so [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Today, I fixed a <strong>long-standing, serious problem</strong> in the openSUSE wiki:</p>
<p><strong>15-20 seconds long hangs that one would see when loading pages.</strong> It occured only when one was logged in, and it happened (for me) on every second access. So one page load hang, the next would work, the next would hang again, and so on. Eventually each page would load and show correctly, but after an initial waiting time of nearly 20 seconds.</p>
<p>I experienced this on Friday, and was not happy about it, because we are preparing for an openSUSE release. I fixed it today.</p>
<p>What follows is the complete story of how I debugged it. It was quite complicated, took hours, and can hopefully serve as an educational example of the diagnostic thinking and different debugging methods. I always planned to write up things like this <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>So at first, I made sure that the hang is not in my browser, or my network. I could reproduce it from a different machine in a different browser. Next, I tried to reproduce it from an Internet server on the commandline. After grabbing the exact Cookie headers from Firefox (with the Firebug extension), it was possible. (<strong>Note: all sensitive data in the following logs, like cookies, is garbled.</strong>)</p>
<p><code>date; curl -sv -H 'Cookie: opensuse_enUserName=Poeml; bblastvisit=1227878957; bblastactivity=0; s_sq=%5D%5D; s_cc=true; sessionhash=392aee91a9d014da0d7; opensuse_en=6eb4a0c94855; opensuse_de=3jtsao6a6jr8mrfm1; ZNP00-opensuse=09a41c; opensuse_deUserName=Poeml; opensuse_enLoggedOut=20081212192257; opensuse_deLoggedOut=20081212213443; IPC8ef153=e3c5b0f; opensuse_deUserID=87; cmTPSet=Y; cm=u2=1104985&amp;pi=User%3APoeml; opensuse_enUserID=32' http://en.opensuse.org/User:Poeml; date</code><br />
Next was to find out where the hang occurs. The normal way that the request should take is from my client to the <strong>iChain</strong> servers that are in front of the openSUSE wiki servers, and they should pass it on to one of the servers. (The iChain proxy acts as a reverse proxy, and sends the request to the backend server(s) as if it was the client itself.)</p>
<p>Fortunately, the setup allowed to narrow down the affected webserver to a single one, due to the way that the proxy distributes the requests to the backends.</p>
<p>After configuring iChain to add X-Forwarded-For with the clients real IP address, and configuring Apache to log this header, my hanging request could clearly be seen in the Apache access log. Apache is configured to <strong>log an additional client header</strong> like this by adding <strong>%{x-forwarded-for}i</strong> to the log lin template, that&#8217;s defined with a LogFormat directive (in /etc/apache2/mod_log_config.conf at our Apache). I just appended it to the end of the line:</p>
<pre>
LogFormat "%h %l %u %t \"%r\" %&gt;s %b \
\"%{Referer}i\" \"%{User-Agent}i\" %{x-forwarded-for}i"         combined
</pre>
<p>Now, the next step was to reproduce the hanging request on the local machine. This in order to rule out that the request might be &#8220;stuck&#8221; in the proxy, before it actually reaches Apache. However, when I did the request from locally (on the web server), it didn&#8217;t cause the hang! But a request that is passed through the iChain proxy looks different; it gets additional session state cookies. So it seems like a good idea to capture the actual request headers that Apache sees.</p>
<p>This can be done with Apache&#8217;s <strong>mod_log_forensic</strong> module. This module was written to be able to debug crashes in Apache that are caused by specific requests.  Apache generally logs <em>after</em> it completed processing a request. So a fatal request would normally never be logged (if it crashes the Apache process, the parent would log the segmentation fault, but the request cannot be logged anymore). mod_log_forensic logs each request before Apache starts working on it, and adds a unique id to the logfile; and when the request is done, the module logs another line, just with the unique id. So after a crash, one could check with the logfile and find requests that weren&#8217;t fully handled. A single directive is needed: <strong>ForensicLog /var/log/apache2/forensic_log</strong>. (A script that analyzes such a log file is provided as /usr/bin/check_forensic2.)</p>
<p>Incidentally, the module logs <em>all</em> request headers, so it is simple to capture the headers this way that I was interested in:</p>
<p><code>+6a73:4942cb0e:0|GET / HTTP/1.1|User-Agent:curl/7.15.1 (x86_64-suse-linux) libcurl/7.15.1 OpenSSL/0.9.8a zlib/1.2.3 libidn/0.6.0|Host:de.opensuse.org|Accept:*/*|Connection:close, TE|X-Forwarded-For:121.11.11.121|Cookie:opensuse_enUserName=Poeml; bblastvisit=1227878957; bblastactivity=0; rr_t=%25255B55D%25255D; s_cc=true; sessionhash=52aee91a9d014da0d7; opensuse_en=576eb4a0c94855; opensuse_de=ao6a6jr8mrfm1; opensuse_deUserID=87; opensuse_deUserName=Poeml; opensuse_enLoggedOut=20081212192257|TE:chunked, identity, deflate|Via:1.1 ICS_SERVER (iChain 2.3.416)|X-username:poeml|X-email:poeml@novell.com<br />
-6a73:4942cb0e:0</code></p>
<p>With those headers, the problem was indeed reproducible locally on the machine. Now, it could be taken off the network (so it doesn&#8217;t get any live requests more from users), and I could start to look closer at Apache. Apache uses mod_php, which is executing PHP scripts that implement the wiki functionality, which talk to a backend database, and also talk to a memcache daemon which is used to cache user data and page results, to serve them faster. As one could easily tell with netstat, Apache was talking to both of them. </p>
<p>To look at the timeline of these things happening, <strong>strace</strong> is useful to trace the system calls that are done. The question, though, is which Apache process to trace?</p>
<p>Normally, &#8220;ps axO ppid,wchan | grep httpd&#8221; can be used to determine the process which is going to get the next request:</p>
<p><code><br />
# ps axO ppid,wchan | grep httpd<br />
 3614     1 select S ?        00:01:44 httpd2-worker<br />
10921  3614 pipe_w S ?        00:00:12 httpd2-worker<br />
22615  3614 pipe_w S ?        00:00:01 httpd2-worker<br />
23860  3614 skb_re S ?        00:00:27 httpd2-worker<br />
23861  3614 select S ?        00:00:00 httpd2-worker<br />
</code></p>
<p>The child (not parent) which is in select() is the one. However, the above example is from another machine; it turned out that on x86_64, the calls are not showing correctly by &#8220;ps&#8221;. Thus, I needed to start Apache in single process mode, which avoids the ambiguity. So, we use strace with timestamps (-tt) to start Apache in single process mode:</p>
<p><code><br />
strace -f -s 1024 -o httpd2.strace -tt /usr/sbin/httpd2-prefork -f /etc/apache2/httpd.conf -DONE_PROCESS -DNO_DETACH &amp;<br />
</code></p>
<p>The trace showed a lot of normal things happening, and at one point during the request processing it starts showing successive leaps of 1 second. The first one is this one:</p>
<pre>
4059  06:47:54.279227 setsockopt(19, SOL_SOCKET, SO_RCVTIMEO, "\2003\341\1", 16) = 0
4059  06:47:54.280772 sendto(18, "set opensuse_en:pcache:idhash:7452-0!1!0!ISO 8601!0!en!0 1 86400 1183\r\nO:12:\"ParserOutput\":7:{s:5:\"mText\";s:961:\"gt;gt;gt;\ngt;gt;gt;\nYou see me working here\ngt;gt;gt;\nHello!\ngt;gt;I started to work for SuSE in 2000. For some years, I maintained Apache, OpenSSL, DHCP and other packages.\ngt;gt;Today, I maintain the openSUSE gt;download infrastructuregt; and gt;mirror ing frameworkgt;. (Contact address for thay is ftpadmin at suse.de.) Currently I work on metalink support.\ngt;gt;I also work on the gt;Build Servicegt;. I star ted to write gt;oscgt; in the earlier days.\ngt;gt;You\'ll find me on freenode as \"mirrorbrain\" (previously: DuDE)\ngt;\n&lt;!-- Saved in parser cache wi th key opensuse_en:pcache:idhash:7452-0!1!0"..., 1256, MSG_DONTWAIT, NULL, 0) = 1256
4059  06:47:54.281212 poll([{fd=18, events=POLLIN|POLLERR|POLLHUP}], 1, 1000) = 0
4059  06:47:55.285308 poll([{fd=19, events=POLLIN|POLLPRI}], 1, 0) = 0
</pre>
<p>Some explanations about this. File descriptor 18 is the socket to the memcache daemon, 19 is to mysql. We see a write to memcached, and two poll() calls. The first one is polling on the memcached fd and it&#8217;s called with a timeout of 1000 ms. The = 0 means that the call returns 0, and 0 from poll() means that it did run into the timeout. Thus, here&#8217;s our one-second-leap. strace logs the timestamps at the <em>start</em> of each call, and thus the following poll happens 1000ms after the other. I was not entirely sure, but I verified it with a tiny test program: </p>
<p><code>int main() { sleep(1); return 0; }</code></p>
<p>Thus, PHP is waiting to read from the memcache daemon, and doesn&#8217;t get anything to read.</p>
<p>This <em>could</em> happen if the length that PHP intends to write into the memcache is calculated wrongly; http://code.sixapart.com/svn/memcached/trunk/server/doc/protocol.txt explains the protocol, and such a (still hypothetical) issue is easily reproducible when speaking to the memcache daemon:</p>
<p><code><br />
 # telnet localhost 11211<br />
Trying 127.0.0.1...<br />
Connected to localhost.<br />
Escape character is '^]'.<br />
set foo 1 60 2                          &lt;-- I'm saying '2' bytes will be sent<br />
x                                       &lt;-- I sent only one<br />
</code></p>
<p>Here, both ends will hang and wait forever.</p>
<p>However, this was just a theory, as I was not yet sure if I read the strace 100% correctly, and don&#8217;t think on false assumption. </p>
<p>Now, apart from the fact that it was Sunday afternoon, and I had some time to continue debugging it, something unexpected happened: </p>
<p>When I coincidentally logged into the wiki, I got the hang there again &#8211; from the live server (other box). Thus, the other server(s) were clearly also affected. But worse, my test case was gone &#8212; I could no longer reproduce the issue locally. Oh well!  This was unfortunate, because I was <em>just</em> about to capture a better strace, which captures full length, to show the complete and exact memcached communication. I used 8192 bytes of string capture length and got a trace from that. However, 8192 bytes were not enough in the interesting place, and I intended to increase it more, but that was the moment when the problem wasn&#8217;t reproducible anymore.</p>
<p>Now, it seemed <em>highly important</em> to fix this, because it seemed to affect all servers; and if it happens during high load in multiple cases then any of the machines might explode pretty soon, because the time that an Apache process handles a requests this way is extremely long, and they accumulate&#8230;</p>
<p>So I switched to continue debugging on the live server, this time in a non-intrusive fashion. Still trying to find out whether the communication with mysql or memcached was at fault.</p>
<p>The gathered data seemed consistent so far, but to rule out false assumption, I<br />
wanted to double check it with tcpdump. I took a tcpdump, and dumped the<br />
protocol to align it with the timestamps:</p>
<p><code><br />
tcpdump -s 8192 -i lo -w poeml-memcached-tcpdump-broken port 11211 &amp;<br />
# another test request<br />
curl ...<br />
# stop the tcpdump<br />
kill %tcp<br />
# look at the trace<br />
tcpdump -X -r poeml-memcached-tcpdump-broken |vi -<br />
</code></p>
<p>Below is an dump that doesn&#8217;t show the full packets (-X), but I annotated it with the protocol chatter:</p>
<p>(You need a very wide browser window to view it completely.)</p>
<pre>
07:43:38.774044 IP localhost.4911 &gt; localhost.11211: S 4021632256:4021632256(0) win 32767 
07:43:38.774087 IP localhost.11211 &gt; localhost.4911: S 4017670477:4017670477(0) ack 4021632257 win 32767 
07:43:38.774115 IP localhost.4911 &gt; localhost.11211: . ack 1 win 8192 
07:43:38.774227 IP localhost.4911 &gt; localhost.11211: P 1:29(28) ack 1 win 8192                get get.opensuse_en:user:id:32
07:43:38.774251 IP localhost.11211 &gt; localhost.4911: . ack 29 win 8192 
07:43:38.774320 IP localhost.11211 &gt; localhost.4911: P 1:941(940) ack 29 win 8192             VALUE ... END
07:43:38.774362 IP localhost.4911 &gt; localhost.11211: . ack 941 win 8662 
07:43:38.775164 IP localhost.4911 &gt; localhost.11211: P 29:44(15) ack 941 win 8662             get lag_times
07:43:38.775211 IP localhost.11211 &gt; localhost.4911: P 941:946(5) ack 44 win 8192             END
07:43:38.777246 IP localhost.4911 &gt; localhost.11211: P 44:111(67) ack 946 win 8662            set lag_times
07:43:38.777311 IP localhost.11211 &gt; localhost.4911: P 946:954(8) ack 111 win 8192            STORED
07:43:38.814846 IP localhost.4911 &gt; localhost.11211: . ack 954 win 8662 
07:43:38.829412 IP localhost.4911 &gt; localhost.11211: P 111:1046(935) ack 954 win 8662         set set.opensuse_en:user:id:32
07:43:38.829468 IP localhost.11211 &gt; localhost.4911: P 954:962(8) ack 1046 win 8660           STORED
07:43:38.829487 IP localhost.4911 &gt; localhost.11211: . ack 962 win 8662 
07:43:38.845369 IP localhost.4911 &gt; localhost.11211: P 1046:1104(58) ack 962 win 8662         get get.opensuse_en:pcache:idhash:7452-0!1!0!ISO.8601!0!en!0
07:43:38.845421 IP localhost.11211 &gt; localhost.4911: P 962:967(5) ack 1104 win 8660           END
07:43:38.845520 IP localhost.4911 &gt; localhost.11211: P 1104:1149(45) ack 967 win 8662         incr opensuse_en:stats:pcache_miss_absent 1
07:43:38.845572 IP localhost.11211 &gt; localhost.4911: P 967:972(5) ack 1149 win 8660           622
07:43:38.846039 IP localhost.4911 &gt; localhost.11211: P 1149:1175(26) ack 972 win 8662         get get.opensuse_en:messages
07:43:38.846087 IP localhost.11211 &gt; localhost.4911: P 972:2372(1400) ack 1175 win 8660       VALUE
07:43:38.846138 IP localhost.11211 &gt; localhost.4911: . 2372:18756(16384) ack 1175 win 8660 
07:43:38.846150 IP localhost.4911 &gt; localhost.11211: . ack 18756 win 12332 
07:43:38.846183 IP localhost.11211 &gt; localhost.4911: P 18756:34486(15730) ack 1175 win 8660   VALUE (cntd.)             *** no END yet! ***
07:43:38.861524 IP localhost.4911 &gt; localhost.11211: P 1175:2431(1256) ack 34486 win 12332    set opensuse_en:pcache:idhash:7452-0!1!0!ISO.8601!0!en!0 1 86400 1183
07:43:38.898856 IP localhost.11211 &gt; localhost.4911: . ack 2431 win 8660 
07:43:39.863552 IP localhost.4911 &gt; localhost.11211: P 2431:2479(48) ack 34486 win 12332      get opensuse_en:watchlist:user:32:page:2:Poeml
07:43:39.863576 IP localhost.11211 &gt; localhost.4911: . ack 2479 win 8660 
07:43:40.867489 IP localhost.4911 &gt; localhost.11211: P 2479:2536(57) ack 34486 win 12332      set opensuse_en:watchlist:user:32:page:2:Poeml
07:43:40.867508 IP localhost.11211 &gt; localhost.4911: . ack 2536 win 8660 
07:43:41.908938 IP localhost.4911 &gt; localhost.11211: P 2536:2579(43) ack 34486 win 12332      get opensuse_en:messages:Project_Overview
07:43:41.908966 IP localhost.11211 &gt; localhost.4911: . ack 2579 win 8660 
07:43:42.908826 IP localhost.4911 &gt; localhost.11211: P 2579:2622(43) ack 34486 win 12332      get opensuse_en:messages:Project.Overview
07:43:42.908854 IP localhost.11211 &gt; localhost.4911: . ack 2622 win 8660 
07:43:43.915679 IP localhost.4911 &gt; localhost.11211: P 2622:2667(45) ack 34486 win 12332      get opensuse_en:messages:How_to_Participate
07:43:43.915706 IP localhost.11211 &gt; localhost.4911: . ack 2667 win 8660 
07:43:44.927676 IP localhost.4911 &gt; localhost.11211: P 2667:2712(45) ack 34486 win 12332      get opensuse_en:messages:How.to.Participate
07:43:44.927703 IP localhost.11211 &gt; localhost.4911: . ack 2712 win 8660 
07:43:45.934733 IP localhost.4911 &gt; localhost.11211: P 2712:2752(40) ack 34486 win 12332      get opensuse_en:messages:Documentation
07:43:45.934759 IP localhost.11211 &gt; localhost.4911: . ack 2752 win 8660 
07:43:46.942543 IP localhost.4911 &gt; localhost.11211: P 2752:2792(40) ack 34486 win 12332      get opensuse_en:messages:Documentation
07:43:46.942568 IP localhost.11211 &gt; localhost.4911: . ack 2792 win 8660 
07:43:47.945386 IP localhost.4911 &gt; localhost.11211: P 2792:2830(38) ack 34486 win 12332      get opensuse_en:messages:Communicate
</pre>
<p>Observing at the timestamps, we see a <strong>protocol desynchronization</strong> happening which makes the rest of the communication stuck (only failed gets follow).</p>
<p>Where does it happen? I checked the (memcache value) length that PHP gives, and it is correct, and reflects the actual data length that it sends. When it claimed (somewhere else) to send 1183 bytes, it actually sent 1183 bytes. So, the</p>
<pre>
&gt; get get.opensuse_en:messages
&gt; VALUE
&gt; VALUE (cntd.)             *** no END yet! ***
</pre>
<p>part may actually be a false alarm, which could happen if the snap<br />
length of the tcp dump was too small. (It was 8192.)</p>
<p>Indeed, when I did another dump with maximal snaplength (64k), it showed the &#8220;get&#8221; reading the complete VALUE, including the trailing &#8220;END&#8221; line that memache daemon appends.</p>
<p>Thus, the <em>subsequent</em> command could be at fault. And indeed it is the culprit. Look at the trace:</p>
<pre>
09:21:04.921611 IP localhost.4720 &gt; localhost.11211: P 1176:2432(1256) ack 34487 win 12332 
        0x0000:  4500 051c 77e6 4000 4006 bff3 7f00 0001  E...w.@.@.......
        0x0010:  7f00 0001 1270 2bcb 5f1c dd2e 5fd5 8ada  .....p+._..._...
        0x0020:  8018 302c 061c 0000 0101 080a 172e af66  ..0,...........f
        0x0030:  172e af61 7365 7420 6f70 656e 7375 7365  ...aset.opensuse
        0x0040:  5f65 6e3a 7063 6163 6865 3a69 6468 6173  _en:pcache:idhas
        0x0050:  683a 3734 3532 2d30 2131 2130 2149 534f  h:7452-0!1!0!ISO
        0x0060:  2038 3630 3121 3021 656e 2130 2031 2038  .8601!0!en!0.1.8
        0x0070:  3634 3030 2031 3138 330d 0a4f 3a31 323a  6400.1183..O:12:
        0x0080:  2250 6172 7365 724f 7574 7075 7422 3a37  "ParserOutput":7
        0x0090:  3a7b 733a 353a 226d 5465 7874 223b 733a  :{s:5:"mText";s:
        0x00a0:  3936 313a 223c 703e 3c62 7220 2f3e 0a3c  961:ou.see.me.wo
        0x0110:  726b 696e 6720 6865 7265 0a3c 2f70 3e3c  rking.here..Hell
        0x0130:  3c2f 703e 3c70 3e49 2073 7461 7274 6564  ./p..p.I.started
        0x0140:  2074 6f20 776f 726b 2066 6f72 2053 7553  .to.work.for.SuS
        0x0150:  4520 696e 2032 3030 302e 2046 6f72 2073  E.in.2000..For.s
        0x0160:  6f6d 6520 7965 6172 732c 2049 206d 6169  ome.years,.I.mai
        0x0170:  6e74 6169 6e65 6420 4170 6163 6865 2c20  ntained.Apache,.
        0x0180:  4f70 656e 5353 4c2c 2044 4843 5020 616e  OpenSSL,.DHCP.an
        0x0190:  6420 6f74 6865 7220 7061 636b 6167 6573  d.other.packages
        0x01a0:  2e0a 3c2f 703e 3c70 3e54 6f64 6179 2c20  .../p..p.Today,.
        0x01b0:  4920 6d61 696e 7461 696e 2074 6865 206f  I.maintain.the.o
        0x01c0:  7065 6e53 5553 4520 3c61 2068 7265 663d  penSUSE..a.dow
        0x0210:  6e6c 6f61 6420 696e 6672 6173 7472 7563  nload.infrastruc
        0x0220:  7475 7265 3c2f 613e 2061 6e64 203c 6120  ture./a..and..a.
        0x0270:  6f72 696e 6720 6672 616d 6577 6f72 6b3c  oring.framework.
        0x0290:  6472 6573 7320 666f 7220 7468 6179 2069  dress.for.thay.i
        0x02a0:  7320 6674 7061 646d 696e 2061 7420 7375  s.ftpadmin.at.su
        0x02b0:  7365 2e64 652e 2920 4375 7272 656e 746c  se.de.).Currentl
        0x02c0:  7920 4920 776f 726b 206f 6e20 6d65 7461  y.I.work.on.meta
        0x02d0:  6c69 6e6b 2073 7570 706f 7274 2e0a 3c2f  link.support...p
        0x02f0:  206f 6e20 7468 6520 3c61 2068 7265 663d  .on.the..a.Build
        0x0330:  7669 6365 3c2f 613e 2e20 4920 7374 6172  vice./a...I.star
        0x0340:  7465 6420 746f 2077 7269 7465 203c 6120  ted.to.write..a.
        0x0390:  6865 2065 6172 6c69 6572 2064 6179 732e  he.earlier.days.
        0x03a0:  0a3c 2f70 3e3c 703e 596f 7527 6c6c 2066  ../p..p.You'll.f
        0x03b0:  696e 6420 6d65 206f 6e20 6672 6565 6e6f  ind.me.on.freeno
        0x03c0:  6465 2061 7320 226d 6972 726f 7262 7261  de.as."mirrorbra
        0x03d0:  696e 2220 2870 7265 7669 6f75 736c 793a  in".(previously:
        0x03e0:  2044 7544 4529 0a3c 2f70 3e0a 3c21 2d2d  .DuDE)../p...";s
        0x0470:  616e 6775 6167 654c 696e 6b73 223b 613a  anguageLinks";a:
        0x0480:  303a 7b7d 733a 3134 3a22 6d43 6174 6567  0:{}s:14:"mCateg
        0x0490:  6f72 794c 696e 6b73 223b 613a 303a 7b7d  oryLinks";a:0:{}
        0x04a0:  733a 3137 3a22 6d43 6f6e 7461 696e 734f  s:17:"mContainsO
        0x04b0:  6c64 4d61 6769 6322 3b62 3a30 3b73 3a31  ldMagic";b:0;s:1
        0x04c0:  303a 226d 4361 6368 6554 696d 6522 3b73  0:"mCacheTime";s
        0x04d0:  3a31 343a 2232 3030 3831 3231 3431 3632  :14:"20081214162
        0x04e0:  3130 3422 3b73 3a38 3a22 6d56 6572 7369  104";s:8:"mVersi
        0x04f0:  6f6e 223b 733a 353a 2231 2e35 2e30 223b  on";s:5:"1.5.0";
        0x0500:  733a 3130 3a22 6d54 6974 6c65 5465 7874  s:10:"mTitleText
        0x0510:  223b 733a 303a 2222 3b7d 0d0a            ";s:0:"";}..
09:21:04.962876 IP localhost.11211 &gt; localhost.4720: . ack 2432 win 8660 
        0x0000:  4500 0034 ab75 4000 4006 914c 7f00 0001  E..4.u@.@..L....
        0x0010:  7f00 0001 2bcb 1270 5fd5 8ada 5f1c e216  ....+..p_..._...
        0x0020:  8010 21d4 5f95 0000 0101 080a 172e af70  ..!._..........p
        0x0030:  172e af66                                ...f
09:21:05.930092 IP localhost.4720 &gt; localhost.11211: P 2432:2480(48) ack 34487 win 12332 
        0x0000:  4500 0064 77e7 4000 4006 c4aa 7f00 0001  E..dw.@.@.......
        0x0010:  7f00 0001 1270 2bcb 5f1c e216 5fd5 8ada  .....p+._..._...
        0x0020:  8018 302c 3bd2 0000 0101 080a 172e b062  ..0,;..........b
        0x0030:  172e af70 6765 7420 6f70 656e 7375 7365  ...pget.opensuse
        0x0040:  5f65 6e3a 7761 7463 686c 6973 743a 7573  _en:watchlist:us
        0x0050:  6572 3a33 323a 7061 6765 3a32 3a50 6f65  er:32:page:2:Poe
        0x0060:  6d6c 0d0a                                ml..
</pre>
<p>Looks normal, except that the memcached reply is an empty TCP ACK, without the &#8220;STORED&#8221; confirmation. And we see the next command already being issued, which is the first in the series of those that are never replied to.</p>
<p>So what&#8217;s wrong?</p>
<p>The command that PHP sends is broken. By the protocol specs, the key names <em>must not contain spaces</em>. The syntax is:</p>
<pre>
set key flags ttl length
</pre>
<p>But as the above trace shows, the command _does_ contain a space:</p>
<pre>
set opensuse_en:pcache:idhash:7452-0!1!0!ISO 8601!0!en!0 1 86400 1183\r\n
                                            ^
</pre>
<p>This turns the command, that intends to write 1183 bytes of data, into one that indicates to memcached it&#8217;ll write 86400 bytes of data.</p>
<p>Of course, these will never be sent, and memcached will hang forever, eating all further commands up as perceived data, and never reply in this connection.</p>
<p>Thus, the wiki uses keys that are not suitable, while the PHP memcache implementation expects them to be valid.</p>
<pre>
09:21:04.921611 IP localhost.4720 &gt; localhost.11211: P 1176:2432(1256) ack 34487 win 12332 
        0x0000:  4500 051c 77e6 4000 4006 bff3 7f00 0001  E...w.@.@.......
        0x0010:  7f00 0001 1270 2bcb 5f1c dd2e 5fd5 8ada  .....p+._..._...
        0x0020:  8018 302c 061c 0000 0101 080a 172e af66  ..0,...........f
        0x0030:  172e af61 7365 7420 6f70 656e 7375 7365  ...aset.opensuse         # set opensuse_en:pcache:idhash:7452-0!1!0!ISO 8601!0!en!0 1 86400 1183
        0x0040:  5f65 6e3a 7063 6163 6865 3a69 6468 6173  _en:pcache:idhas                                                               ^
        0x0050:  683a 3734 3532 2d30 2131 2130 2149 534f  h:7452-0!1!0!ISO
        0x0060:  2038 3630 3121 3021 656e 2130 2031 2038  .8601!0!en!0.1.8
        0x0070:  3634 3030 2031 3138 330d 0a4f 3a31 323a  6400.1183..O:12:         # claims it'll write 1183 bytes. And it does so
        0x0080:  2250 6172 7365 724f 7574 7075 7422 3a37  "ParserOutput":7
        0x0090:  3a7b 733a 353a 226d 5465 7874 223b 733a  :{s:5:"mText";s:
        0x00a0:  3936 313a 223c 703e 3c62 7220 2f3e 0a3c  961:"t;img.src="
</pre>
<p>So, I fixed the PHP memcache client to <strong>sanitize</strong> all memcache keys before usage, replacing spaces with underscores.<br />
The fix looks like this:</p>
<pre>
function sanitize_key($key) {
    /* make sure there are no spaces in the key
       otherwise, it'll lead to a protocol desynchronization, with beautiful hangs
       poeml, Sun Dec 14 10:24:12 MST 2008 */
    $key = str_replace(" ", "_", $key);
    return $key;
}

/* and then in all places where keys are used: */
    $key = $this-&gt;sanitize_key($key);
</pre>
<p>Indeed, with the sanitized memcache keys, the problem is immediately fixed!</p>
<p>To verify the effectiveness of the patch, I run tcpdump in the background, with &#8216;grep -A3 opensuse&#8217; attached, to basically limit the output to show the key values:</p>
<pre>
Before :
        0x0030:  1748 336d 6765 7420 6f70 656e 7375 7365  .H3mget.opensuse
        0x0040:  5f65 6e3a 7063 6163 6865 3a69 6468 6173  _en:pcache:idhas
        0x0050:  683a 3734 3532 2d30 2131 2130 2149 534f  h:7452-0!1!0!ISO
        0x0060:  2038 3630 3121 3021 656e 2130 0d0a       .8601!0!en!0..
--
After:
        0x0030:  1748 62d3 6765 7420 6f70 656e 7375 7365  .Hb.get.opensuse
        0x0040:  5f65 6e3a 7063 6163 6865 3a69 6468 6173  _en:pcache:idhas
        0x0050:  683a 3734 3532 2d30 2131 2130 2149 534f  h:7452-0!1!0!ISO
        0x0060:  5f38 3630 3121 3021 656e 2130 0d0a       _8601!0!en!0..
</pre>
<p>A simple bug, in the end. Luckily, with a trivial fix. But quite a long way to go to find it.<br />
And I hope this writeup is useful.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2008/12/15/longstanding-wiki-problem-fixed/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
	</channel>
</rss>
