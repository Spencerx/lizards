<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>openSUSE Lizards &#187; Packaging</title>
	<atom:link href="http://lizards.opensuse.org/category/packaging/feed/" rel="self" type="application/rss+xml" />
	<link>http://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Mon, 24 Mar 2014 12:46:00 +0000</lastBuildDate>
	<language>en-US</language>
		<sy:updatePeriod>hourly</sy:updatePeriod>
		<sy:updateFrequency>1</sy:updateFrequency>
	<generator>http://wordpress.org/?v=3.8.1</generator>
	<item>
		<title>Cloudy with a touch of Green</title>
		<link>http://lizards.opensuse.org/2014/03/19/cloudy-with-a-touch-of-green/</link>
		<comments>http://lizards.opensuse.org/2014/03/19/cloudy-with-a-touch-of-green/#comments</comments>
		<pubDate>Wed, 19 Mar 2014 19:08:27 +0000</pubDate>
		<dc:creator><![CDATA[rjschwei]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Infrastructure]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[azure]]></category>
		<category><![CDATA[cloud]]></category>
		<category><![CDATA[EC2]]></category>
		<category><![CDATA[gce]]></category>
		<category><![CDATA[openSUSE 13.1]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10678</guid>
		<description><![CDATA[Finally there is some news regarding our public cloud presence and openSUSE 13.1. We now have openSUSE 13.1 images published in Amazon EC2, Google Compute Engine, and Windows Azure. Well, that&#8217;s the announcement, but would make for a rather short blog. Thus, let me talk a bit about how this all works and speculate a [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Finally there is some news regarding our public cloud presence and openSUSE 13.1. We now have openSUSE 13.1 images published in Amazon EC2, Google Compute Engine, and Windows Azure.</p>
<p>Well, that&#8217;s the announcement, but would make for a rather short blog. Thus, let me talk a bit about how this all works and speculate a bit why we&#8217;ve not been all that good with getting stuff out into the public cloud.</p>
<p>Let me start with the speculation part, i.e. hindrances in getting openSUSE images published. In general to get anything into a public cloud one has to have an account. This implies that you hand over your credit card number to the cloud provider and they charge you for the resources you use. Resources in the public cloud are anything and everything that has something to do with data. Compute resources, i.e. the size of an instance w.r.t. memory and number of CPUs are priced differently. Sending data across the network to and from your instances incurs network charges and of course storing stuff in the cloud is not free either. Thus, while anyone can put an image into the cloud and publish it, this service costs the person money, granted not necessarily a lot, but it is a monthly recurring out of pocket expense.</p>
<p>Then there always appears to be the &#8220;official&#8221; apprehension, meaning if person X publishes an openSUSE image from her/his account what makes it &#8220;official&#8221;. Well first we have the problem that the &#8220;official&#8221; stamp is really just an imaginary hurdle. An image that gets published by me is no more or less &#8220;official&#8221; than any other images. I am after all not the release manager or have any of my fingers in the openSUSE release in any way. I do have access to the SUSE accounts and can publish from there and I guess that makes the images &#8220;official&#8221;. But please do not get any ideas about &#8220;official&#8221; images, they do not exist.</p>
<p>Last but not least there is a technical hurdle. Building images in OBS is not necessarily for the faint of heart. Additionally there is a bunch of other stuff that goes along with cloud images. Once you have one it still has to get into the cloud of choice, which requires tools etc.</p>
<p>That&#8217;s enough speculation as to why or why not it may have taken us a bit longer than others, and just for the record we did have openSUSE 12.1 and openSUSE 12.2 images in Amazon. With that lets talk about what is going on.</p>
<p>We have a project in OBS now, actually it has been there for a while, <a href="https://build.opensuse.org/project/show/Cloud:Images" title="Cloud:Images">Cloud:Images</a> that is intended to be used to build openSUSE cloud images. The GCE image that is public and the Amazon image that is public both came from this project. The Azure image that is currently public is one built with SUSE Studio but will at some point also stem from the Cloud:Images OBS project.</p>
<p>Each cloud framework has it&#8217;s own set of tools. The tools are separated into two categories, initialization tools and command line tools. The initialization tools are tools that reside inside the image and these are generally services that interact with the cloud framework. For example <a href="http://cloudinit.readthedocs.org/en/latest/" title="cloud-init">cloud-init</a> is such an initialization tool and it is used in OpenStack images, Amazon images, and Windows Azure images. The command line tools let you interact with the cloud framework to start and stop instances for example. All these tools get built in the <a href="https://build.opensuse.org/project/show/Cloud:Tools" title="Cloud:Tools">Cloud:Tools</a> project in OBS. From there you can install the command line tools into your system and interact with the cloud framework they support. I am also trying to get all these tools into <a href="https://build.opensuse.org/project/show/openSUSE:Factory" title="openSUSE:Factory">openSUSE:Factory</a> to make things a bit easier for image building and cloud interaction come 13.2.</p>
<p>With this lets take a brief closer look at each framework, in alphabetical order no favoritism here.</p>
<p><strong>Amazon EC2</strong></p>
<p>An openSUSE 13.1 image is available in all regions, the AMI (Amazon Machine Image) IDs are as follows:</p>
<p>sa-east-1       =&gt;  ami-2101a23c<br />
ap-northeast-1  =&gt;  ami-bde999bc<br />
ap-southeast-2  =&gt;  ami-b165fc8b<br />
ap-southeast-1  =&gt;  ami-e2e7b6b0<br />
eu-west-1       =&gt;  ami-7110ec06<br />
us-west-1       =&gt;  ami-44ae9101<br />
us-west-2       =&gt;  ami-f0402ec0<br />
us-east-1       =&gt;  ami-ff0e0696</p>
<p>These images use cloud-init as opposed to the &#8220;suse-ami-tools&#8221; that has been used previously and is no longer available in OBS. The cloud-init package is developed in launchpad and was started by the Canonical folks. Unfortunately to contribute you have to sign the Canonical Contributor Agreement (CCA). If you do not want to sign it or cannot sign it for company reasons you can still send stuff to the package and I&#8217;ll try and get the stuff integrated upstream. For the interaction with Amazon we have the <a href="http://aws.amazon.com/cli/" title="aws-cli">aws-cli</a> package. The &#8220;aws&#8221; command line client supersedes all the ec2-*-tools and is an integrated package that can interact with all Amazon services, not just EC2. It is well documented fully open source and hosted on <a href="https://github.com/aws/aws-cli" title="github">github</a>. The aws-cli package replaces the previously maintained ec2-api-tools package which I have removed from OBS.</p>
<p><strong>Google Compute Engine</strong></p>
<p>In GCE things work by name and the openSUSE 13.1 image is named opensuse131-20140227 and is available in all regions. Google images use a number of tools for initialization, google-daemon and google-startup-scripts. All the Google specific tools are in the Cloud:Tools project. Interaction with GCE is handled with two commands, gcutil and gsutil, both provided by the google-cloud-sdk package. As the name suggests google-cloud-sdk has the goal to unify the various Google tools, same basic idea as aws-cli, and Google is working on the unification. Unfortunately they have decided to do this on their own and there is no public project for google-cloud-sdk which makes contributing a bit difficult to say the least. The <a href="https://github.com/GoogleCloudPlatform/gsutil" title="gsutil">gsutil</a> code is hosted on github, thus at least contributing to gsutil is straight forward. Both utilities, gsutil for storage and gcutil for interacting with GCE are well documented.</p>
<p>In GCE we also were able to stand up openSUSE mirrors. These have been integrated into our <a href="https://en.opensuse.org/MirrorBrain" title="mirrorbrain">mirrorbrain</a> infrastructure and are already being used quite heavily. The infrastructure team is taking care of the monitoring and maintenance and that deserves a big THANK YOU from my side. The nice thing about hosting the mirrors in GCE is that when you run an openSUSE instance in GCE you will not have to pay for network charges to pull your updated packages and things are really fast as the update server is located in the same data center as your instance.</p>
<p><strong>Windows Azure</strong></p>
<p>As mentioned previously the current image we have in Azure is based on a build from SUSE Studio. It does not yet contain cloud-init and only has <a href="https://github.com/WindowsAzure/WALinuxAgent" title="WALinuxAgent">WALinuxAgent</a> integrated. This implies that processing of user data is not possible in the image. User data processing requires cloud-init and I just put the finishing touches on cloud-init this week. Anyway, the image in Azure works just fine, and I have no time line when we might replace it with an image that contains cloud-init in addition to WALinuxAgent.</p>
<p>Interacting with Azure is a bit more cumbersome than with the other cloud frameworks. Well, let me qualify this with, if you want packages. The Azure command line tools are implemented using nodejs and are integrated into the <a href="https://www.npmjs.org/" title="npm">npm</a> nodejs package system. Thus, you can use npm to install everything you need. The nodejs implementation provides a bit of a problem in that we hardly have a nodejs infrastructure in the project. I have started packaging the dependencies, but there is a large number and thus this will take a while. Who would ever implement&#8230;.. but that&#8217;s a different topic.</p>
<p>That&#8217;s where we are today. There is plenty of work left to do. For example we should unify the &#8220;generic&#8221; OpenStack image in Cloud:Images with the HP specific one, the HP cloud is based on OpenStack, and also get an openSUSE image published in the HP cloud. There&#8217;s tons of packaging left to do for nodejs modules to support the azure-cli tool. It would be great if we could have openSUSE mirrors in EC2 and Azure to avoid network charges for those using openSUSE images in those clouds. This requires discussions with Amazon and Microsoft, basically we need to be able to run those services for free, which implies that both would become sponsors of our project just like Google has become a sponsor of our project by letting us run the openSUSE mirrors in GCE.</p>
<p>So if you are interested in cloud and public cloud stuff get involved, there is plenty of work and lots of opportunities. If you just want to use the images in the public cloud go ahead, that&#8217;s why they are there. If you want to build on the images we have in OBS and customize them in your own project feel free and use them as you see fit.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/03/19/cloudy-with-a-touch-of-green/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>osc build with kvm on an encrypted volume group</title>
		<link>http://lizards.opensuse.org/2014/03/15/osc-build-with-kvm-on-an-encrypted-volume-group/</link>
		<comments>http://lizards.opensuse.org/2014/03/15/osc-build-with-kvm-on-an-encrypted-volume-group/#comments</comments>
		<pubDate>Sat, 15 Mar 2014 17:34:14 +0000</pubDate>
		<dc:creator><![CDATA[Bruno Friedmann]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Kernel]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[Build]]></category>
		<category><![CDATA[kvm]]></category>
		<category><![CDATA[osc]]></category>
		<category><![CDATA[virtio]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10665</guid>
		<description><![CDATA[How-to build a initrd-virtio on a fully encrypted volume group If like me you care about your data stored on your laptop, you certainly use a fully encrypted (excepted /boot) configuration based on lvm. In my case I also like to create, build, fix packages locally with our tool osc. I&#8217;ve plenty of power, beefy [&#8230;]]]></description>
				<content:encoded><![CDATA[<h1>How-to build a initrd-virtio on a fully encrypted volume group</h1>
<p>If like me you care about your data stored on your laptop, you certainly use a fully encrypted (excepted /boot) configuration based on lvm.</p>
<p>In my case I also like to create, build, fix packages locally with our tool osc. I&#8217;ve plenty of power, beefy ssd, so I dedicate a logical lvm for building cleanly package with qemu-kvm configuration, like <a href="http://build.opensuse.org">obs</a> does</p>
<h2>Prepare the kvm building system</h2>
<p>As root you create 2 lvm volume with lvcreate, one will be the build root, the other one will be the additional swap</p>
<p>In ~/.oscrc I enable the following parameters</p>
<pre>
build-type = kvm
build-device = /dev/mapper/vg0-lvobsbuild
build-swap = /dev/mapper/vg1-lvobsswap
build-memory = 4096
build-vmdisk-rootsize = 16000
build-vmdisk-swapsize = 4000
build-vmdisk-filesystem = ext4
</pre>
<p>You just have to adjust the Memory quantity and the device to what you create for your own environment.</p>
<p><span id="more-10665"></span></p>
<h2>Building with qemu-kvm</h2>
<p>Once the preparation is done you could try to build a package</p>
<pre>
Skipping verification of package signatures due to secure VM build
Writing build configuration
Running build
No initrd that provides virtio support found. virtio accelleration disabled.
Run the following command as root to enable virtio:
 "env" "rootfstype=ext4" "mkinitrd" "-d" "/dev/null" "-m" "ext3 ext4 btrfs reiserfs binfmt_misc virtio_pci virtio_blk" "-k" "/boot/vmlinuz" "-i" "/boot/initrd-3.13.6-1.g4727218-desktop-virtio"
VM_IMAGE: /dev/mapper/vg0-lvobsbuild, VM_SWAP: /dev/mapper/vg1-lvobsswap
Creating ext4 filesystem on /dev/mapper/vg0-lvobsbuild
tune2fs 1.42.8 (20-Jun-2013)
Setting maximal mount count to -1
mkswap /dev/mapper/vg1-lvobsswap
Setting up swapspace version 1, size = 4194300 KiB
no label, UUID=935f0e2d-52d7-4013-8a7f-7d48c813a482
logging output to /tmp/obsbuild/.build.log...
</pre>
<p>As you can see, it warn you that you could create a -virtio initrd to use virtio acceleration (who contribute a patch for the typo <img src="http://lizards.opensuse.org/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /><br />
<br />But the command line is not completely correct in our case. It need the -d to be filled with the lvm buildroot to work as expected. If you successfully create the initrd-virtio you still will face a number of trouble, due to the way mkinitrd work.
</p>
<h2>Defeating the errors</h2>
<p>You remember that we have a fully encrypted volume group, and as a clever tool mkinitrd will feed the initrd with all the tools needed to boot your system.<br />
<br />But that mean it will forget the lv buildroot we ask, and will put unnecessary tools and options.
</p>
<p>Typical errors with a non optimized -virtio initrd</p>
<pre>
[    3s] /usr/bin/qemu-kvm -no-reboot -nographic -vga none -net none -cpu host -kernel /boot/vmlinuz -initrd /boot/initrd-3.13.6-1.g4727218-desktop -append root=/dev/sda panic=1 quiet no-kvmclock nmi_watchdog=0 rw elevator=noop console=ttyS0 init=/.build/build -m 4096 -hda /dev/mapper/vg0-lvobsbuild -drive file=/dev/mapper/vg1-lvobsswap,if=ide,index=1,cache=none -smp 8
[    9s] FATAL: Error inserting nvidia (/lib/modules/3.13.6-1.g4727218-desktop/updates/nvidia.ko): No such device
[    9s]   WARNING: Failed to connect to lvmetad: No such file or directory. Falling back to internal scanning.
[    9s]   Volume group "vg0" not found
[    9s]   WARNING: Failed to connect to lvmetad: No such file or directory. Falling back to internal scanning.
[    9s]   Volume group "vg0" not found
[    9s] *** Note: only US keyboard layout is supported.
[    9s] *** Please ensure that the password is typed correctly.
[   41s] Waiting for device /dev/disk/by-id/ata-Corsair_Force_GT_blah-part2 to appear: ..............................Unlocking cr_sda2 (/dev/disk/by-id/ata-Corsair_Force_GT_blah-part2)
[   41s] Device /dev/disk/by-id/ata-Corsair_Force_GT_blah-part2 doesn't exist or access denied.
[   41s] Trying manual resume from /dev/vg0/lvswap
[   41s] resume device /dev/vg0/lvswap not found (ignoring)
[   41s] Trying manual resume from /dev/vg0/lvswap
[   41s] resume device /dev/vg0/lvswap not found (ignoring)
[   73s] Waiting for device /dev/sda to appear: ..............................Could not find /dev/sda.
[   73s] Want me to fall back to /dev/vg0/lvsuse? (Y/n)
</pre>
<p><b>Rescue</b> you have as root to kill all build process.</p>
<pre>for P in $(ps auxw| grep build | grep -v grep | awk {'print $2'} );do kill $P;done</pre>
<p>
<h2>Find a solution</h2>
<p>We want an optimized -virtio initrd, which filter all the lvm and crypting tools we don&#8217;t need. Also there&#8217;s no need to encumber it with graphic blob.<br />
Then I create a small script I&#8217;ve called patch-initrd-virtio (source below) which exactly do that work anytime I&#8217;ve a kernel change.<br />
As it need to be run by root only, I normally place it in /root/bin/
</p>
<h2>patch-initrd-virtio sources</h2>
<pre>
#!/usr/bin/env bash

# WTF License 1.0 
# Author Bruno Friedmann tigerfoot (at) opensuse.org

# Usage : this script will create an optimized virtio initrd without
# lvm, crypt, gfx tool
# by using the actual /boot/initrd symlink you have.
# Edit the 2 devices you target to use 
# 
DEVBUILD='/dev/vg0/lvobsbuild'
DEVSWAP='/dev/vg1/lvobsswap'

nokms(){
sed -i '/^NO_KMS_IN_INITRD/s/no/yes/' /etc/sysconfig/kernel
}

kms(){
sed -i '/^NO_KMS_IN_INITRD/s/yes/no/' /etc/sysconfig/kernel
}

echo "cleanup /tmp"
rm -fr /tmp/initrd*

# Patch the virtio initrd
if [ -z "$1" ];then
export VER=`uname -r`
else
export VER="$1"
fi
export INITRD="/boot/initrd-$VER-virtio"
echo "Setting nokms"
nokms

echo "Building -virtio initrd ..."
"env" "rootfstype=ext4,resume=$DEVSWAP,rootdev=$DEVBUILD,udevtimeout=2,udev_timeout=2,nosplash,noluks" "mkinitrd" "-B" "-d" "$DEVBUILD" "-m" "ext4 btrfs binfmt_misc virtio_pci virtio_blk" "-k" "/boot/vmlinuz-$VER" "-i" "$INITRD"

ls -l $INITRD

echo "Setting kms"
kms

# copy the *.virtio initrd to /tmp
cp -vfa $INITRD /tmp/initrd-virtio.gz

# ungzip it gzip -d initrd
cd /tmp
mkdir initrd.build
gzip -d initrd-virtio.gz

cd initrd.build

# uncpio cpio -id &lt; ../initrd
cpio -id  ../initrd
rm -fv ../initrd-virtio
echo "rebuilding initrd ..."
find . | cpio --create --format='newc' &gt; ../initrd-virtio
cd ../
echo "Compressing initrd ..."
# Install pigz if you want to save half an hour of your life.
if [ -x /usr/bin/pigz ];then
 pigz -9v initrd-virtio
else
 gzip -9v initrd-virtio
fi
# copy to /boot
cp -v initrd-virtio.gz $INITRD
echo "Done ..."

</pre>
<h2>Usage of patch-initrd-virtio</h2>
<p>Here&#8217;s the result of a run</p>
<pre>
cleanup /tmp
Setting nokms
Building -virtio initrd ...

Kernel image:   /boot/vmlinuz-3.13.6-1.g4727218-desktop
Initrd image:   /boot/initrd-3.13.6-1.g4727218-desktop-virtio
Root device:    /dev/vg0/lvobsbuild (mounted on / as ext4)
Resume device:  /dev/vg0/lvswap
enabling LUKS support for /dev/disk/by-id/ata-Corsair_Force_GT_blah-part2 (cr_sda2)
Microcode: Adding Intel microcode 06-2a-07
Kernel Modules: thermal_sys thermal processor fan libcrc32c xor raid6_pq btrfs binfmt_misc virtio virtio_ring virtio_pci virtio_blk dm-mod dm-crypt dm-log dm-region-hash dm-mirror dm-snapshot scsi_dh scsi_dh_hp_sw scsi_dh_alua scsi_dh_rdac scsi_dh_emc xhci-hcd hid-logitech-dj hid-holtek-kbd hid-lenovo-tpkbd hid-ortek hid-roccat hid-roccat-common hid-roccat-arvo hid-roccat-isku hid-samsung ohci-pci linear arc4 sha256_generic cryptd crct10dif-pclmul crc32-pclmul crc32c-intel ghash-clmulni-intel aes-x86_64 glue_helper gf128mul lrw ablk_helper aesni-intel
Features:       acpi dm intel_microcode block usb lvm2 luks btrfs resume.userspace resume.kernel
Did not refresh the bootloader. You might need to refresh it manually.
-rw------- 1 root root 29338540 Mar 15 18:18 /boot/initrd-3.13.6-1.g4727218-desktop-virtio
Setting kms
‘/boot/initrd-3.13.6-1.g4727218-desktop-virtio’ -&gt; ‘/tmp/initrd-virtio.gz’
160249 blocks
removed ‘./boot/71-luks.sh’
removed ‘./config/luks.sh’
removed ‘../initrd-virtio’
rebuilding initrd ...
160239 blocks
Compressing initrd ...
initrd-virtio to initrd-virtio.gz
‘initrd-virtio.gz’ -&gt; ‘/boot/initrd-3.13.6-1.g4727218-desktop-virtio’
Done ...
</pre>
<h2>Finally start a build with -virtio activated</h2>
<p>So with our new optimized initrd-virtio we can restart a fully qemu-kvm build with osc build &#8211;clean</p>
<pre>
Skipping verification of package signatures due to secure VM build
Writing build configuration
Running build
VM_IMAGE: /dev/mapper/vg0-lvobsbuild, VM_SWAP: /dev/mapper/vg1-lvobsswap
Creating ext4 filesystem on /dev/mapper/vg0-lvobsbuild
tune2fs 1.42.8 (20-Jun-2013)
Setting maximal mount count to -1
mkswap /dev/mapper/vg1-lvobsswap
mkswap: /dev/mapper/vg1-lvobsswap: warning: wiping old swap signature.
Setting up swapspace version 1, size = 4194300 KiB
no label, UUID=c19c873b-2b6c-4200-9575-a60adc581204
logging output to /tmp/obsbuild/.build.log...
[    0s] Using BUILD_ROOT=/tmp/obsbuild/.mount
[    0s] Using BUILD_ARCH=x86_64:i686:i586:i486:i386
[    0s] Doing kvm build in /dev/mapper/vg0-lvobsbuild
[    0s] 
[    0s] 
[    0s] c-3po.labaroche.ioda.net started "build postgresql-plr.spec" at Sat Mar 15 17:27:18 UTC 2014.
[    0s] 
[    0s] 
[    0s] processing specfile /home/bruno/openSUSE/obs/home:bruno_friedmann:branches:openSUSE:12.3:Update/postgresql-plr.openSUSE_12.3_Update/postgresql-plr.spec ...
[    0s] running changelog2spec --target rpm --file /home/bruno/openSUSE/obs/home:bruno_friedmann:branches:openSUSE:12.3:Update/postgresql-plr.openSUSE_12.3_Update/postgresql-plr.spec
[    0s] init_buildsystem --configdir /usr/lib/build/configs --cachedir /var/cache/build --prepare --clean --rpmlist /tmp/rpmlist.Vy31Li /home/bruno/openSUSE/obs/home:bruno_friedmann:branches:openSUSE:12.3:Update/postgresql-plr.openSUSE_12.3_Update/postgresql-plr.spec ...
[    1s] cycle: pam -&gt; permissions -&gt; coreutils
[    1s]   breaking dependency permissions -&gt; coreutils
[    1s] [1/29] preinstalling filesystem...

</pre>
<p>Hope this give you the taste of building!</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/03/15/osc-build-with-kvm-on-an-encrypted-volume-group/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Goodbye EC2 Tools Long Live AWS Tools</title>
		<link>http://lizards.opensuse.org/2014/02/26/goodbye-ec2-tools-long-live-aws-tools/</link>
		<comments>http://lizards.opensuse.org/2014/02/26/goodbye-ec2-tools-long-live-aws-tools/#comments</comments>
		<pubDate>Wed, 26 Feb 2014 20:06:08 +0000</pubDate>
		<dc:creator><![CDATA[rjschwei]]></dc:creator>
				<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[AWS]]></category>
		<category><![CDATA[cloud]]></category>
		<category><![CDATA[EC2]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10613</guid>
		<description><![CDATA[For quite some time we had a package named ec2-api-tools in the Cloud:EC2 project and I suspect many that work with EC2 had found the package and were using the ec2-* commands to manage stuff in EC2. Along with the ec2-api-tools Amazon maintained a separate ec2-* tool set for various services. Keeping up with the [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>For quite some time we had a package named ec2-api-tools in the Cloud:EC2 project and I suspect many that work with EC2 had found the package and were using the ec2-* commands to manage stuff in EC2. Along with the ec2-api-tools Amazon maintained a separate ec2-* tool set for various services. Keeping up with the armada of Amazon developers is not easy and thus the other ec2-* tool sets never got packaged.</p>
<p>Now a new integrated set of tools is available called with the &#8220;aws&#8221; command and provided by the aws-cli package. The package is available from the Cloud:Tools project and a submit request to Factory is pending. The new package does not obsolete the ec2-api-tools package as there is no issue with having both packages installed. However, I did take the liberty to remove the ec2-api-tool package from the Cloud:EC2 project as it would no longer receive updates considering that we have a nice new tool that unifies all Amazon services. The documentation for the new command can be found <a href="http://aws.amazon.com/documentation/cli/" title="here"></a>.</p>
<p>The aws code is hosted on github and thus contribution of fixes is easy and that is another big plus over the ec2-* tool sets.</p>
<p>Yes, and of course we need to get openSUSE 13.1 into EC2, and I am working on that, stay tuned&#8230;.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/02/26/goodbye-ec2-tools-long-live-aws-tools/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>spec-cleaner: hide all your precious cruft!</title>
		<link>http://lizards.opensuse.org/2014/01/31/spec-cleaner-hide-all-your-precious-cruft/</link>
		<comments>http://lizards.opensuse.org/2014/01/31/spec-cleaner-hide-all-your-precious-cruft/#comments</comments>
		<pubDate>Fri, 31 Jan 2014 08:33:31 +0000</pubDate>
		<dc:creator><![CDATA[calumma]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Quality Assurance]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10484</guid>
		<description><![CDATA[As we stated in our communication over the time, our team&#8217;s main focus for foreseeable future is Factory and how to manage all those contributions. Goal is not to increase the number of SRs that is coming to Factory, but to make sure we can process more and to make sure we see even well [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>As we stated in our communication over the time, our team&#8217;s main focus for foreseeable future is Factory and how to manage all those contributions. Goal is <strong>not</strong> to increase the number of SRs that is coming to Factory, but to make sure we can process more and to make sure we see even well hidden consequences to make sure that Factory is &#8220;stable&#8221; and &#8220;usable&#8221;.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2014/01/sprayg-263x300.jpg" alt="sprayg" width="263" height="300" class="alignright size-medium wp-image-10485" />
<p>Not really part of our current sprints, but something that will hopefully help us is <i>spec-cleaner</i> that Tomáš Chvátal and Tomáš Čech were working on lately during their free time/hackweek. What is it trying to address? Currently, there are some packaging guidelines, but when you write a spec file for your software, you still have plenty of choices. How do you order all the information in the header? Do you use curly brackets around macros? Do you use macros? Which ones do you use and which not? Do you use binaries in dependencies? Package config? Perl symbols? Package names? There is <i>format_spec_file</i> obs service that tries to unify a little bit the coding style but leaves quite some of the stuff up to you. Not necessarily a bad thing, but if you have to compare changes and review packages that are using completely different coding styles the process becomes harder and slower.</p>
<p><i>spec-cleaner</i> is <i>format_spec_file</i> taken to another level. It tries to unify coding style as much as it can. It uses consistent conventions, makes most of the decisions mentioned previously for you and if you already decided for one way in the past, it will try to convert your spec file to follow the conventions that it specifies. It&#8217;s not enforcing anything, it&#8217;s standalone script and therefore you don&#8217;t have to be worried that you spec file will be out of your control. You can run it, verify the result (actually, you should verify the results as there might still be some bugs) and commit it to OBS. If we all do it, our packages will all look more alike and it will be easier to read and review them.</p>
<p>How to try it? How to help? Well, code is on <a href="https://github.com/openSUSE/spec-cleaner">GitHub</a> and packages are in <a href="https://build.opensuse.org/package/show/openSUSE:Tools/spec-cleaner">OBS</a>. You may have a version of it in your distribution, but that one is heavily outdated (even the 13.1 version), so add openSUSE:Tools repo and try the version from there.</p>
<pre>zypper ar -f obs://openSUSE:Tools/openSUSE_13.1 openSUSE-Tools
zypper in spec-cleaner</pre>
<p>You can then go to some local checkout and try what changes does it propose for your spec file. Easiest way is to just let it do stuff by calling it and taking a look at changes afterwards.</p>
<pre>spec-cleaner -p -i *.spec
osc diff</pre>
<p>If it works, great, we will have more unified spec files. If it doesn&#8217;t, file a  <a href="https://github.com/openSUSE/spec-cleaner/issues">bug</a> <img src="http://lizards.opensuse.org/wp-includes/images/smilies/icon_wink.gif" alt=";-)" class="wp-smiley" /> </p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/01/31/spec-cleaner-hide-all-your-precious-cruft/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Unterstanding the nvidia driver process</title>
		<link>http://lizards.opensuse.org/2014/01/15/unterstanding-the-nvidia-driver-process/</link>
		<comments>http://lizards.opensuse.org/2014/01/15/unterstanding-the-nvidia-driver-process/#comments</comments>
		<pubDate>Wed, 15 Jan 2014 15:59:59 +0000</pubDate>
		<dc:creator><![CDATA[calumma]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Boosters]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Toolchain]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10402</guid>
		<description><![CDATA[The NVIDIA drivers for openSUSE 13.1 took a while to appear. Many users have asked why this was and we&#8217;d like to explain what happened and what we plan to do to prevent this in the future. This post was written with input from the openSUSE developers who maintain these drivers at SUSE and work [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.muktware.com/2013/12/nvidia-drivers-now-available-opensuse-13-1/17381"><img src="//lizards.opensuse.org/wp-content/uploads/2014/01/Nvidia-300x168.jpg" alt="Nvidia pic from Muktware" width="300" height="168" class="alignright size-medium wp-image-10405" /></a><br />
The NVIDIA drivers for openSUSE 13.1 took a while to appear. Many users have asked why this was and we&#8217;d like to explain what happened and what we plan to do to prevent this in the future. This post was written with input from the openSUSE developers who maintain these drivers at SUSE and work with NVIDIA to make them available for our users.</p>
<h2>How it should work</h2>
<p>Legally, the Linux kernel GPLv2 license leaves proprietary binary drivers in a bit of a tangle. While some claim it should be OK, others say not &#8211; and that is what most distributions currently assume: one can not ship a Linux distribution with proprietary, binary drivers. NVIDIA has agreed that our users can grab their drivers from the official NVIDIA servers. They are packaged by SUSE engineers however. They take care of both SLE and openSUSE proprietary driver packaging for NVIDIA hardware, and have contacts at NVIDIA who get the drivers up on their ftp mirrors.<br />
<a href="http://opensuse-community.org/nvidia.ymp"><img src="//lizards.opensuse.org/wp-content/uploads/2014/01/Nvidia-1click.png" alt="Nvidia-1click" width="160" height="40" class="alignright size-full wp-image-10406" /></a><br />
The packages are build on a dedicated system, but the package spec (skeleton for building) is in OBS &#8211; for example, <a href="https://build.opensuse.org/package/show/X11:Drivers:Video/nvidia-gfxG03">G03 is here</a>. Anybody could use these to build the nvidia driver locally (the nvidia binary driver is grabbed from the nvidia driver during building). The command sequence for local building can be found in <a href="https://build.opensuse.org/package/view_file/X11:Drivers:Video/nvidia-gfxG03/README?expand=1">the README</a>.</p>
<p>Once the packages are build, they are send to NVIDIA, which signs the packages with their key and generates and signs repositories, making them available to the public.</p>
<p>To note is the fact that this is all manual and takes a while on NVIDIA&#8217;s side (and ours). This of course is part of the reason why we don&#8217;t offer NVIDIA packages for Factory, our fast-rolling development repository.</p>
<h2>What happened</h2>
<p>What occurred for 13.1 is a typical case of &#8220;everything went wrong&#8221;.</p>
<p>Up until a few weeks before the release, the driver did not build against the Linux Kernel version 3.11. NVIDIA warned against the use of a patch for this problem created by third parties so the driver team did not have a running build. Due to a holiday, it took a while to get the packages build and pushed to NVIDIA. Unfortunately, by the time this was done, the holiday period at NVIDIA blocked progress for another week. Once the package was signed, it took the webteam at NVIDIA another week to get the repository published. It all added up to almost a month and brought quite some inconvenience for users eager to use their latest NVIDIA cards with the latest openSUSE.</p>
<p>About a week later, the openSUSE 13.1 NVIDIA drivers disappeared again from the nvidia servers for a day or so. We don&#8217;t know exactly what happened there, it might have simply been a server issue.</p>
<h2>What we will do</h2>
<p>The first and  most obvious thing to change would be to improve coordination. The developers taking care of the NVIDIA packages should be made aware as early as possible about the release planning and a replacement in case for holidays should be available. We noted this in our 13.1 release report and will make sure that there will be a <a href="http://progress.opensuse.org">task in our task tracker</a> for this for the next release. We also need to talk to NVIDIA about this to make sure that there, too, somebody can fill in for SUSE&#8217;s contacts.</p>
<p>But there are also thoughts on how to improve further. Some of the current ideas:</p>
<ul>
<li>To get drivers for Factory the process needs more automation as the driver may break on kernel or X changes</li>
<li>We could try to open the process and work with community members to secure the process in case the SUSE folks are unavailalbe</li>
<li>It would be nice if we could make NVidia to see benefit of working more on the driver in openSUSE, e.g. by doing some testing</li>
<li>We could write some scripts that check regularly whether repo and packages are still available and in a valid state (meta data matches available RPMs)</li>
</ul>
<p>We&#8217;ll have to see which of these we can implement, when and how. But rest assured that we will do what we can to prevent this in the future!</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2013/06/statistics-inside-212x300.png" alt="statistics with Geeko inside" width="212" height="300" class="alignright size-medium wp-image-9572" /><br />
<h2>And the stats!</h2>
<p>After a bit of a hiatus, we&#8217;re back with the numbers. Development has slowed down around new year and isn&#8217;t back to speed yet so the 10th spot is shared by quite a big group of people&#8230;</p>
<p><!--<br />
BODY,DIV,TABLE,THEAD,TBODY,TFOOT,TR,TH,TD,P { font-family:"Liberation Sans"; font-size:x-small }<br />
--></p>
<table border="0" cellspacing="0">
<tbody>
<tr>
<td align="LEFT" height="16">Spot</td>
<td align="LEFT">Name</td>
</tr>
<tr>
<td align="RIGHT" height="17">1</td>
<td align="LEFT">Stephan Kulow</td>
</tr>
<tr>
<td align="RIGHT" height="17">2</td>
<td align="LEFT">Denisart Benjamin</td>
</tr>
<tr>
<td align="RIGHT" height="17">3</td>
<td align="LEFT">Tomáš Chvátal, Dirk Mueller, Michal Vyskocil</td>
</tr>
<tr>
<td align="RIGHT" height="17">4</td>
<td align="LEFT">Hrvoje Senjan</td>
</tr>
<tr>
<td align="RIGHT" height="17">5</td>
<td align="LEFT">Ciaran Farrell</td>
</tr>
<tr>
<td align="RIGHT" height="17">6</td>
<td align="LEFT">Petr Gajdos</td>
</tr>
<tr>
<td align="RIGHT" height="17">7</td>
<td align="LEFT">Lars Vogdt, Pascal Bleser</td>
</tr>
<tr>
<td align="RIGHT" height="17">8</td>
<td align="LEFT">Jan Engelhardt, Charles Arnold</td>
</tr>
<tr>
<td align="RIGHT" height="17">9</td>
<td align="LEFT">Andreas Stieger, Michal Marek, Niels Abspoel, Kyrill Detinov</td>
</tr>
<tr>
<td align="RIGHT" height="17">10</td>
<td align="LEFT">Dinar Valeev, Bjørn Lie, Ulrich Weigand, Tobias Klausmann, Marcus Meissner, Alexander Graf, Robert Schweikert, Martin Vidner</td>
</tr>
</tbody>
</table>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/01/15/unterstanding-the-nvidia-driver-process/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>openSUSE and GCC part 10: Distributing to other distributions than openSUSE with OBS</title>
		<link>http://lizards.opensuse.org/2014/01/07/opensuse-and-gcc-part-10/</link>
		<comments>http://lizards.opensuse.org/2014/01/07/opensuse-and-gcc-part-10/#comments</comments>
		<pubDate>Tue, 07 Jan 2014 08:15:54 +0000</pubDate>
		<dc:creator><![CDATA[Tuukka Pasanen]]></dc:creator>
				<category><![CDATA[lizards.openSUSE.org]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[C-Language]]></category>
		<category><![CDATA[obs]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10387</guid>
		<description><![CDATA[Last time I talked about OBS and how to compile your application that you have developed with GCC. OBS is much more than just a tool for compiling openSUSE additional packages. You can also compile Debian, Ubuntu, Arch and Fedora (and couple more) but why on earth you want to do that? Short answer: because [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="//lizards.opensuse.org/2013/12/11/opensuse-and-gcc-part-9/" title="openSUSE and GCC part 9: Open Build Service why should I use it?">Last time I talked about OBS</a> and how to compile your application that you have developed with GCC. <a href="http://openbuildservice.org/" title="Open Build Service">OBS</a> is much more than just a tool for compiling openSUSE additional packages. You can also compile <a href="http://debian.org" title="Debian ">Debian</a>, <a href="http://www.ubuntu.com/" title="Ubuntu linux">Ubuntu</a>, <a href="https://www.archlinux.org/" title="Arch Linux">Arch</a> and <a href="http://fedoraproject.org/" title="Fedora project">Fedora</a> (and couple more) but why on earth you want to do that? Short answer: because you can! Little bit longer answer: because you can and freedom is two way road. You can&#8217;t guess what Linux distribution or OS your user wants to use but you can make sure that you application is first class citizen in that Linux distribution.<span id="more-10387"></span> Of course You can use Fedora build service or Ubuntu launchpad but they are just for that distribution only. If it&#8217;s fine with you. Be happy and use these marvelous services. If you have woken up in night all sweat. Thinking all these openSUSE lizards that are unhappy because they can&#8217;t use your fabulous application.. it&#8217;s time to start sleeping well.</p>
<h2>Fedora distribution or RHEL</h2>
<p>RPM based Linux distributions are very easy with OBS. You just have to make SPEC file generic. If you like to do it right you should read <a href="http://en.opensuse.org/openSUSE:Build_Service_cross_distribution_howto" title="openSUSE:Build Service cross distribution howto">openSUSE:Build Service cross distribution howto</a> and learn how to do it.</p>
<h2>OBS and DEB based distributions</h2>
<p>This is little bit trickier but not much. You needed decent DSC-file (Most dsc files goes without changes. If you like to use Bzip2 file then you need to add &#8216;DEBTRANSFORM-TAR&#8217; in dsc-file) file and then you need &#8216;debian.tar.gz&#8217; in your project or &#8216;debian/&#8217;-dir in your project. What are files that you need in you debian package/dir? That is a very good question and it stays unanswered here because it&#8217;s not point of this blog. If you are curious enough you can always download &#8216;debian.tar.gz&#8217; from <a href="https://build.opensuse.org/package/show/home:illuusio:example/sdl_displaybitmap" title="OBS Example application">example application</a> and study files or look <a href="https://wiki.debian.org/HowToPackageForDebian" title="HowToPackageForDebian">Debian documentation</a> about it.</p>
<h2>Arch</h2>
<p>Arch is most unknown distribution for me but it has vibrant community and active development so providing packages to them is good thing. They seems to like live bleeding edge. So Just add Arch distribution in your project in OBS and then fill PKGBUILD-file with necessary lines and like magic you have Arch supported (<a href="https://build.opensuse.org/package/show/home:illuusio:example/sdl_displaybitmap" title="PKGBUILD">Look at example PKGBUILD-file if you don&#8217;t understand a thing</a>).</p>
<p>This was it! No more articles about GCC or around it. Next I&#8217;ve going to dive low level Linux Multimedia especially in audio and FFmpeg (and how you do them in openSUSE). <a href="//lizards.opensuse.org/author/illuusio/" title="Blog">if you haven&#8217;t read rest of articles and you feel you missed something</a>. Go on a read them and if you missed good <a href="http://smithfarm-thebrain.blogspot.fi/2013/08/opensuse-packaging-workflow.html" title="OBS client OSC">OSC-blog you can read it too</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2014/01/07/opensuse-and-gcc-part-10/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Enter UnReal World RPG</title>
		<link>http://lizards.opensuse.org/2013/12/19/enter-unreal-world-rpg/</link>
		<comments>http://lizards.opensuse.org/2013/12/19/enter-unreal-world-rpg/#comments</comments>
		<pubDate>Thu, 19 Dec 2013 18:57:47 +0000</pubDate>
		<dc:creator><![CDATA[Tuukka Pasanen]]></dc:creator>
				<category><![CDATA[Desktop]]></category>
		<category><![CDATA[lizards.openSUSE.org]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[games]]></category>
		<category><![CDATA[UnReal World]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=10329</guid>
		<description><![CDATA[When I was kid Commodore 64 was big thing and I played &#8216;Gateway to Apshai&#8216; hour after hour. It really hit me. Others liked Ultimas but &#8216;Gateway to Apshai&#8217; was THE thing to me. Years after C64 was gone with the wind I found world of Rogue, Omega and Nethack. Sweetest of them was Omega. [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>When I was kid Commodore 64 was big thing and I played &#8216;<a href="http://www.youtube.com/watch?v=JCsQsKaMAek" title="Gateway to Apshai youtube">Gateway to Apshai</a>&#8216; hour after hour. It really hit me. Others liked Ultimas but &#8216;Gateway to Apshai&#8217; was THE thing to me. Years after C64 was gone with the wind I found world of <a href="http://en.wikipedia.org/wiki/Rogue_%28video_game%29" title="Rogue">Rogue</a>, <a href="http://roguebasin.roguelikedevelopment.org/index.php?title=Omega" title="Omega">Omega</a> and <a href="http://www.nethack.org/" title="Nethack">Nethack</a>. Sweetest of them was Omega. Omega&#8217;s World map was big and you could do what ever you like and wander around and you didn&#8217;t have to fight all the time. As this was a long, long time ago none of those games are no more in active development but Sami Maaranen is still developing unique northern hemisphere survival game called <a href="http://www.unrealworld.fi/" title="UnReal World RPG">UnReal World RPG</a>.<br />
<img src="http://media.indiedb.com/cache/images/games/1/17/16794/thumb_300x150/mainscreen318b3.PNG" alt="UnReal World RPG 3.18beta3 start screen" /><img src="http://media.indiedb.com/cache/images/games/1/17/16794/thumb_300x150/urw318-restock.png" alt="UnReal World RPG 3.18beta3" /><br />
See bigger pictures at <a href="http://www.indiedb.com/games/the-unreal-world" title="IndieDB UnReal World RPG">IndieDB</a><br />
<span id="more-10329"></span></p>
<h2>UnReal World RPG</h2>
<p>What makes UnReal World RPG so unique? Game is huge, difficult level is infernal and it&#8217;s all about survival in north (Iron-Age Finland actually). As said UnReal World RPG tries to be as quite realistic. You won&#8217;t find goblins nor elves around but UnReal World RPG gives you elks, mooses, bears, wolves, lynxes and really long dark cold winter. If you want to survive the arctic winter you have to try little bit harder (and you probably die). If you like to get into fight you probably die or you get serious wounds and you probably die soon because you can&#8217;t make fire.<br />
Many times this game feels a bit sadistic in modeling how hard it have been in Iron-Age Finland but developer Sami Maaranen (and co-designer Erkka Lehmus) have spent lots of time studying about old ways crafting things, building traps and living off the land in general. As said before learning curve in this game is bit steep but there are plenty of &#8216;<a href="http://www.youtube.com/watch?v=OK7CXT67arU&amp;list=PLOCBEcNdfIeXVSaKDs97TMKlrdAGr72Pc" title="Let's Play UnReal World RPG">Let&#8217;s play</a>&#8216;-videos floating in Internet to help you out and you can&#8217;t find many games that gives you so much fun. So if you like survival games this is for you.</p>
<h2>This sounds good</h2>
<p>And it is. UnReal World RPG is not Open Source nor it&#8217;s Free Software but it&#8217;s free to play and download (no strings attached). Developer is only asking donations and if you like the game you should really consider to donate small amount to support the development.</p>
<h2>Little bit deeper look</h2>
<p>UnReal World, or shortly UrW, was first released in 1992 as more traditional fantasy roguelike game. Then it evolved and evolved steadily. URW started as MS DOS ascii based game after that was VGA/SVGA DOS upper memory semi graphics version. Third generation took URW to Windows world with SDL-library. At that point notorious rewrite of graphics, sounds and user interface was proceeded, but it was heavily tied to MS Windows world.</p>
<h2>porting UnReal World RPG</h2>
<p>In some point people started to tell in URW <a href="http://z3.invisionfree.com/UrW_forum/index.php?s=165de95ba5c0c30cbe32ddc45915032f&amp;act=idx" title="URW forum">forums</a> that they are playing URW in Wine (both Mac OS X and Linux). They were happy because it worked. Playing in Wine ain&#8217;t pleasant all the time as it&#8217;s with native game.<br />
Porting SDL 1.2 game to another platform is really nice. It only does what it states. You don&#8217;t have to worry about internals and differences between platforms you just figure out differences and make sure everything is working smooth. Although MSVC is very different compiler C than GCC&#8217;s one. There is even huge difference between Mac OS X libc and Linux libc. Even little bit bumpy ride everything went well at the end and version 3.13 was first Linux and Mac OS X native version released.<br />
Developing multiplatfrom has its&#8217; pains but now Linux and Mac OS X are released in same time as Windows version. I used openSUSE system as base Linux system for the port to Linux. Currently there is openSUSE RPM-version (Which is for Fedora also), Ubuntu/Debian DEB-version/Tar-ball and Mac OS X. Statistics show there is steadily growing phase of people coming from those platform to play URW. Only Ubuntu have currently 64-bit version because there is no demand on openSUSE or Fedora (people with Ubuntu just plays more games!).</p>
<h2>Game ON!</h2>
<p>If you don’t have anything else to do on your Christmas vacation: Go and grab <a href="http://www.unrealworld.fi/urw_linuxmirror.html" title="UnReal World RPG Linux download">UnReal World RPG new 3.18beta3</a> version when it&#8217;s hot hot hot. Find yourself building a cottage and swimming in lake or try to survive the arctic winter.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2013/12/19/enter-unreal-world-rpg/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Magic: It is now possible to use MS Silverlight based websites via pipelight</title>
		<link>http://lizards.opensuse.org/2013/09/13/magic-it-is-now-possible-to-use-ms-silverlight-based-website-via-pipelight/</link>
		<comments>http://lizards.opensuse.org/2013/09/13/magic-it-is-now-possible-to-use-ms-silverlight-based-website-via-pipelight/#comments</comments>
		<pubDate>Fri, 13 Sep 2013 20:42:55 +0000</pubDate>
		<dc:creator><![CDATA[Richard Bos]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Mono]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[microsoft]]></category>
		<category><![CDATA[pipelight]]></category>
		<category><![CDATA[silverlight]]></category>
		<category><![CDATA[wine]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=9913</guid>
		<description><![CDATA[It has long been a challenge to use MS Silverlight based websites on linux systems. Especially in The Netherlands this is a big hurdle as many (&#62;80%) of the secondary school websites that pupils must use to communicate with their school (for homework, marks, etc) are equipped with Silverlight. Yes, really&#8230; Fortunately at the end [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>It has long been a challenge to use MS Silverlight based websites on linux systems.  Especially in The Netherlands this is a big hurdle as many (&gt;80%) of the secondary school websites that pupils must use to communicate with their school (for homework, marks, etc) are equipped with Silverlight.  Yes, really&#8230; <img src="http://lizards.opensuse.org/wp-includes/images/smilies/icon_sad.gif" alt=":(" class="wp-smiley" /> </p>
<p>Fortunately at the end of August 2013 I discovered <a href="http://fds-team.de/cms/articles/2013-08/pipelight-using-silverlight-in-linux-browsers.html#section_1_4" title="An incredible solution ">pipelight</a>, a very smart idea to use MS Silverlight based website natively on Linux.  The problem was however to find a working pipelight package for openSUSE.  As there was none, I decided to build one myself using the incredible <a href="https://build.opensuse.org/">openSUSE Build Service</a>.  It was quite a quest to obtain a working package, but due to very good cooperation with the pipelight developers, I&#8217;m now able to present a working pipelight package to the openSUSE community.  Oh, and while working on the package I reported a bug via the bug report system, that was solved and published via an rpm package within 1 hour after reporting it (that was during out of office hours).  Indeed within 1 hour after reporting the problem it was; accepted, investigated, analysed, fixed, tested, handed over to me, packaged, tested and published!  The amazing world of Open Source Software!</p>
<p>Pipelight works okay for the following sites (<a href="http://fds-team.de/cms/articles/2013-08/pipelight-using-silverlight-in-linux-browsers.html#section_5">among many others</a>): arte, LOVEFiLM, Netflix, Magister based NL schoolwebsites, WATCHEVER, etc.  View the complete list on the <a href="http://fds-team.de/cms/articles/2013-08/pipelight-using-silverlight-in-linux-browsers.html">pipelight website</a>.</p>
<p>The <a href="http://fds-team.de/cms/articles/2013-08/pipelight-using-silverlight-in-linux-browsers.html#section_1_4">installation instructions</a> are on the pipelight website.  Be aware though, that pipelight requires the wine package that is provided via the home:rbos:pipelight repository.  With any other wine package, pipelight will (very likely) not work.  If you rely on your currently installed wine package and installed MS applications and are unsure that the wine package provided via the home:rbos:pipelight repository will leave your currently in use MS applications untouched: don&#8217;t install pipelight (or only after making very good backups).  You can always start by installing pipelight in a virtual machine.</p>
<p>Have fun with pipelight.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2013/09/13/magic-it-is-now-possible-to-use-ms-silverlight-based-website-via-pipelight/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>Keeping Factory in shape</title>
		<link>http://lizards.opensuse.org/2013/06/13/keeping-factory-in-shape/</link>
		<comments>http://lizards.opensuse.org/2013/06/13/keeping-factory-in-shape/#comments</comments>
		<pubDate>Thu, 13 Jun 2013 12:00:41 +0000</pubDate>
		<dc:creator><![CDATA[calumma]]></dc:creator>
				<category><![CDATA[Boosters]]></category>
		<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Quality Assurance]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=9497</guid>
		<description><![CDATA[Michal Hrušecký has been helping out on maintaining Factory in shape and shares his experiences. Factory is development version of openSUSE and it is where the next openSUSE is taking form. Hundreds of packagers send packages into Factory to be integrated as a part of the new release and many more use Factory for testing [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><em>Michal Hrušecký</em> has been helping out on maintaining Factory in shape and shares his experiences.</p>
<p>Factory is development version of openSUSE and it is where the next openSUSE is taking form. Hundreds of packagers send packages into Factory to be integrated as a part of the new release and many more use Factory for testing or for their daily work. Thus it is really important to keep Factory rolling and usable. Everybody knows that <a href="http://news.opensuse.org/2007/08/09/people-of-opensuse-stephan-kulow/">Coolo</a> is the Factory master and he does everything to make next openSUSE be the best ever. But keeping factory in shape is really complicated and stressing task. There are dozens of request everyday and each one of them can potentially break something. So Factory can always use a pair of extra hands and for some time I have been one of them. I&#8217;d like to give you some insight in what we do, working on keeping Factory building and working.<span id="more-9497"></span></p>
<p><a href="http://openbuildservice.org"><img class="alignright size-full wp-image-9543" alt="obs-logo" src="//lizards.opensuse.org/wp-content/uploads/2013/06/obs-logo.png" width="243" height="101" /></a></p>
<h2>Keep it building</h2>
<p>With a constant influx of newer and cooler versions of libraries and tools it is easy to break existing applications with shiny new software. So we always have some build failures in Factory. Part of our job is to resolve them because if it doesn&#8217;t build, you can&#8217;t test nor ship it. As developer, you may have seen submit request in various projects in OBS fixing builds for Factory. Everyday I take a look at a number of build failures, investigate why they are not building in Factory and try to do something about it.</p>
<p>For example new version of the GNU C Compiler (GCC) is quite often more strict on includes, requiring developers to be more verbose about the exact internal and external libraries there applications require to be build. What used to build now doesn&#8217;t, because you are missing include files. The older GCC let you slip by, but now you have to fix it, build failure by build failure. Another example is GTK which keeps deprecating old API functions and you have to keep up and replace them with correct counterparts from the new API. Sometimes even the kernel changes API and third party modules stops building. All these errors will get eventually resolved upstream (if upstream is alive), but as we follow upstream quite closely before feature freeze, it may happen that we are first facing these issues because sometime we are the first ones who tried to compile this software using new GTK or the new GCC. Of course, we attempt to get these fixes back upstream and share them with other distributions where appropriate!</p>
<div id="attachment_9541" style="width: 310px" class="wp-caption alignright"><a href="//lizards.opensuse.org/wp-content/uploads/2013/06/600px-Factory_workflow.png"><img class="size-medium wp-image-9541" alt="Factory_workflow" src="//lizards.opensuse.org/wp-content/uploads/2013/06/600px-Factory_workflow-300x176.png" width="300" height="176" /></a><p class="wp-caption-text">Image depicting the Factory Workflow</p></div>
<h2>Test it</h2>
<p>Another important part of working on a better Factory is testing. If everything builds, we&#8217;re happy. You might have heard the saying:</p>
<blockquote><p><em> if it builds, ship it!</em></p></blockquote>
<p>(un)fortunately, this isn&#8217;t Coolo&#8217;s idea of how the world works. In Factory, things not only have to build, but also work. Oh, AND conform to some stringent requirements. Here comes into play what most of our team was working on in the past months and what was <a href="For example new version of gcc is quite often more strict on includes.  What used to build now doesn't, because you are missing include files. Older gcc let you slip by, but now you have to fix it. Or GTK keeps deprecating old API functions and you have to keep up and replace them with correct counterparts from new API. Sometimes even kernel changes API and third party modules stops building. All these errors will get eventually resolved upstream (if upstream is alive), but as we follow upstream quite closely before feature freeze, it may happen that we are first facing these issues because sometime we are the first ones who tried to compile this software using new GTK and gcc.">described last week &#8211; openQA</a>. openQA tests the latest builds of openSUSE Factory, tries to install them and run tests on some applications as well. But still, not all failures from automatic testing are real failures. Sometimes application just changed too much to be covered by test. So from time to time we go through failing openQA tests, try to reproduce them, figure out what went wrong and either fix it or report it via bugzilla to the corresponding maintainer.</p>
<h2>Concluding</h2>
<p>Each of these tasks is relatively small (check why this test failed, fix this package to build with new gcc) but what makes it hard is the number of packages we&#8217;ve got and the constant inflow of changes. Also, because the issue can be all over the place, each and every one requires you to dive into an entirely new package, with new and interesting quirks, build systems, languages and more. It is a great way of getting to know a wide variety of packages and applications, finding a gem every now and then. But also implies a lot of work.</p>
<p>Things will get slower and more stable after feature freeze when we will spend more time in the testing part, while today we mostly work on the build part. Still, Factory has to keep building, without that it becomes impossible to keep developing openSUSE. What we do, fixing these build errors, it might not be super visible, but it matters a lot.</p>
<h2>Statistics</h2>
<p>On a related note, we&#8217;d like to (re) introduce weekly Factory statistics! It has been a while since we had those, once upon a time courtesy of AJ and Guido. Now, Alberto provides them. Here you go, the top-fifteen contributors to openSUSE Factory last week (from Sunday June 2nd to to Sunday June 9th):<br />
<a href="//lizards.opensuse.org/wp-content/uploads/2013/06/statistics-inside.png"><img src="//lizards.opensuse.org/wp-content/uploads/2013/06/statistics-inside-212x300.png" alt="statistics with Geeko inside" width="212" height="300" class="alignright size-medium wp-image-9572" /></a></p>
<ol>
<li>Dominique Leuenberger</li>
<li>Tobias Klausmann</li>
<li>Stefan Dirsch</li>
<li>Peter Varkoly</li>
<li>Stephan Kulow</li>
<li>Marcus Meissner</li>
<li>Michal Hrusecky</li>
<li>Cristian Rodríguez</li>
<li>Dirk Mueller</li>
<li>Sascha Peilicke</li>
<li>Kyrill Detinov</li>
<li>Dr. Werner Fink</li>
<li>Bjørn Lie</li>
<li>Tomáš Chvátal</li>
<li>Niels Abspoel</li>
</ol>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2013/06/13/keeping-factory-in-shape/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>openQA in openSUSE</title>
		<link>http://lizards.opensuse.org/2013/06/06/openqa-in-opensuse/</link>
		<comments>http://lizards.opensuse.org/2013/06/06/openqa-in-opensuse/#comments</comments>
		<pubDate>Thu, 06 Jun 2013 12:00:26 +0000</pubDate>
		<dc:creator><![CDATA[calumma]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Infrastructure]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Quality Assurance]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=9440</guid>
		<description><![CDATA[Today, we&#8217;ve got for you an introduction of the teams&#8217; work on openQA by Alberto Planas Domínguez. The last 12.3 release was important for the openSUSE team for a number of reasons. One reason is that we wanted to integrate QA (Quality Assurance) into the release process in an early stage. You might remember that [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="//lizards.opensuse.org/wp-content/uploads/2013/05/factory-tested.png"><img class="size-full wp-image-9447 alignright" alt="factory-tested" src="//lizards.opensuse.org/wp-content/uploads/2013/05/factory-tested.png" width="217" height="232" /></a>Today, we&#8217;ve got for you an introduction of the teams&#8217; work on openQA by <em>Alberto Planas Domínguez</em>.</p>
<p>The last 12.3 release was important for the openSUSE team for a number of reasons. One reason is that we wanted to integrate QA (Quality Assurance) into the release process in an early stage. You might remember that this release had UEFI and Secure Boot support coming and everybody had read the scary reports about badly broken machines that can only be fixed replacing the firmware. Obviously openSUSE can&#8217;t allow such things to happen to our user base, so we wanted to do more testing.<span id="more-9440"></span></p>
<h2>Testing is hard</h2>
<p>Testing a distribution seems easy at first sight:</p>
<ol>
<li>Take the ISO of the last build and put it on the USB stick</li>
<li>Boot from the USB</li>
<li>Install and test</li>
<li>&#8230;</li>
<li>Profit!</li>
</ol>
<div id="attachment_9476" style="width: 310px" class="wp-caption alignright"><a href="//lizards.opensuse.org/wp-content/uploads/2013/06/factory.png"><img class="size-medium wp-image-9476 " title="testing in progress!" alt="testing in progress!" src="//lizards.opensuse.org/wp-content/uploads/2013/06/factory_crop-300x169.png" width="300" height="169" /></a><p class="wp-caption-text">testing in progress!</p></div>
<p>But look a bit further and you will see that, actually, only the installation process itself is already a <a title="free dictionary on combinatorial" href="http://www.thefreedictionary.com/combinatorial" target="_blank">combinatorial</a> problem. In openSUSE we have different mediums (DVD, KDE and Gnome Live images, NET installation image and the new Rescue image), three official architectures (32 and 64 bits and ARMv7), a bunch of different file systems (Ext3 / Ext4, Btrfs, LVM with or without encryption, etc.), different boot loaders (GRUB 2, LILO, SHIM). <em>Yeah</em>&#8230; Even without doing the math you see that for only this small subset of variables we have hundreds of possible combinations. And this is just the installation process, we are not talking about the various desktops and applications or hardware like network interfaces or graphics cards here.</p>
<h3>And we want continuous testing</h3>
<p>And that is only the final testing round! If we want to be serious about QA and testing, we need to run the full test battery for every build that OBS generate for us, with extra attention to the Milestones, Betas and RC which are scheduled in the release road-map.</p>
<p>We can of course attempt to optimize our testing approach. For example, if I am the maintainer of a package and I sure that my last version is working perfectly in Factory (because I tested it in my system, of course), do I really need to test this application again and again when a new ISO build is released? Unfortunately, we can <em>not</em> take a shortcut here. As Distribution, our job is integration and so we need to test the entire product again for every build. A single change in an external library or in any other package which I depend on can break my package. The interdependencies for a integration project of the size of openSUSE are so intricate that is faster to run the full test again. With this approach we are avoiding regressions in our distribution, important during development. But also a lot of work &#8211; who has time for all this testing?</p>
<h2>OpenQA as a solution</h2>
<p>For us, there&#8217;s no doubt about it: <a href="http://openqa.opensuse.org/">openQA</a> is the correct tool for this. openQA is already used to test certain parts of openSUSE, and has shown itself as a competent tool to test other distributions like Fedora or Debian.</p>
<p>To experiment with openQA, the openSUSE team decided to launch a local implementation of the tool and start feeding it with 12.3 builds. But we soon ran into some limitation in the way we can express desired test outcomes in openQA and we got ideas on how to improve the detection of failed and succeeded tests. We also discovered that some tests in openQA had the bad habit of starting to work in <em>“monkey mode”</em> by simply sending commands and events to the virtual machine without checking if those interaction have expected behavior or not, losing track of the test progress.</p>
<p>openQA has the great benefit of being open source so we can improve its usefulness for testing Factory. Moreover, the original author of openQA, Bernhard M. Wiedemann, is a very talented developer and works for SUSE so upstream is very close to us. So we decided to start hacking!<br />
<a href="//lizards.opensuse.org/wp-content/uploads/2013/05/stopwatch.png"><img class="size-medium wp-image-9448 alignright" alt="stopwatch" src="//lizards.opensuse.org/wp-content/uploads/2013/05/stopwatch-227x300.png" width="113" height="150" /></a></p>
<h2>openQA work</h2>
<p>After the 12.3 release we decided to spend some quality time improving openQA as a team project. This was managed using the public Chili (a Redmine fork) project management web application. We published all the milestones, tasks, goals and documentation in the <a href="http://board.opensuse.org/projects/openqa-improvement/">&#8220;openQA improvement project&#8221;</a>. The management side of this project perhaps needs a different post, but for now we can say that we tried to develop it as open as possible. Of course you can get the full code from <a href="https://github.com/openSUSE-Team/">the openSUSE github account</a>.</p>
<h2>Major changes</h2>
<p>The main architectural changes implemented during our 10 weeks of coding on openQA can be summarized as follows:</p>
<ul>
<li>Integration with openCV</li>
<li>Replacement of PPM graphic file format with PNG</li>
<li>Introduced needles; test with better control of the state</li>
<li>A proper job dispatcher for new test configurations</li>
<li>Better internal scheduler, with snapshots and a way to skip tests</li>
<li>Improvement in the communication between webUI and the virtual machine</li>
</ul>
<div id="attachment_9481" style="width: 310px" class="wp-caption alignright"><a href="//lizards.opensuse.org/wp-content/uploads/2013/06/needleeditor.png"><img class="size-medium wp-image-9481" title="The Needle editor in action" alt="The Needle editor in action" src="//lizards.opensuse.org/wp-content/uploads/2013/06/needleeditor_crop-300x204.png" width="300" height="204" /></a><p class="wp-caption-text">The Needle editor in action</p></div>
<h3>openCV brings robust testing</h3>
<p>The tests in openQA need to check what is happening in the virtual (or real) machine to verify results, and the main source of information is the output of the screen. This information is usually a graphical information: we can instruct QEMU (or Vbox) to retry screenshots in a periodic basis. To properly evaluate a test outcome we need to find some kind of information in those pictures, and for that we use the computer vision library openCV.</p>
<p>With this library we can implement different methods to find relevant sections of the image, like buttons, error messages or text. These are then used for the test to get information about the actual environment of the installation process and to find out if the test passed or not. Previously, checksums on the images were used to determine outcomes. This led to many false positives (tests failing too often) due to simple theming and layout changes &#8211; a single pixel changing broke the test. openCV support was introduced earlier by Dominik Heidler to enable testing with noisy analogue VGA capture and we extended the usage of openCV matching to be more versatile, powerful and easier to use (both for test-module-writers and for maintainers).<br />
<a href="http://www.flickr.com/photos/63567936@N00/4210167891/" title="Headless Horse by Perry McKenna, on Flickr"><img src="http://farm3.staticflickr.com/2632/4210167891_dbfe5d540f_n.jpg" width="320" height="192" class="alignright" alt="Finding the needle"></a></p>
<h3>Introducing needles</h3>
<p>openQA has been modified to use PNG instead of PPM files to store images to test against, improving performance but also enabling openQA to store certain meta-data within the images. This brings us to the most important improvement in openQA: the introduction of the needle. A needle is an PNG image with some meta-data associated (a JSON document). This meta-data describes one or multiple &#8216;regions of interest&#8217; (RoI) in the original image which can be used by the test to match the current screenshot. For example, if the installation is in the partition manager and we send the expected keystrokes to set Btrfs as our default file system, we can assert that this option is currently set using a needle where the RoI has the correct check box marked. In other words: we create a needle with an area covering the check box. The system will search this area in the current screen to assert that there is, somewhere, a check box with this label correctly marked. And will use openCV to make sure that slight changes in theming or layout will not result in a failed test.</p>
<p>The needle concept is really powerful. When a test uses needles with multiple RoI&#8217;s, the system will try to match every area in the current screenshot, in whatever position. There are areas that can be excluded, and areas that can be processed using an OCR (Tesseract) to extract and match text from them.</p>
<p>Thanks to needles we can now create tests that are always in a known state and they can inform complex decisions about the next step to take. For example, we can have tests that can detect and respond correctly when a sudo prompt appears suddenly, or where an error dialog appears when is not expected. More important, we can detect errors more quickly, aborting the installation process and pointing the developer to the exact error.</p>
<h3>Faster testing with snapshots</h3>
<div id="attachment_9477" style="width: 310px" class="wp-caption alignright"><a href="//lizards.opensuse.org/wp-content/uploads/2013/06/results.png"><img class="size-medium wp-image-9477" title="Test result overview" alt="Test result overview" src="//lizards.opensuse.org/wp-content/uploads/2013/06/results_crop-300x172.png" width="300" height="172" /></a><p class="wp-caption-text">Test result overview</p></div>
<p>We also implemented a way to create snapshots of the virtual machine status. This is useful if we want to retry some tests, or start the test-set from a specific test. For example, if we are testing the Firefox web browser, we want to avoid all the installation tests, and maybe some of the tests related with other applications. With this snapshot feature, we can load the virtual machine in the state where Firefox can be tested immediately.</p>
<h3>Improved web UI</h3>
<p>The final major area of focus has been on the web interface. We designed a set of dialogs to create and edit needles. Using this editor we can also see why the current tests are failing, comparing the current screenshot with the different expected needles from the tests.</p>
<p>Also, from the web interface we can control the execution of the virtual machine: signaling to stop or continue the execution. This is a feature that is useful when we want to create needles in an interactive way.</p>
<h2>Upstream</h2>
<p>We&#8217;re very happy that Bernhard has helped us, both with work and advice, to get these changes implemented. Several improvements were integrated in the <a href="https://github.com/bmwiedemann/os-autoinst/">current production version of openQA</a> and most of the more invasive ones are part of the V2 branch of openQA. We plan to sit together with Bernhard to see about deploying V2 to <a title="openQA in action" href="http://openqa.opensuse.org/results/" target="_blank">openqa.opensuse.org</a> for testing factory as soon as possible.</p>
<p>There is still work to be done. For example, for full integration testing we need to expand on the current ability which allows to run the tests on real hardware. This will for example allow testing graphics and network cards. Also, writing proper documentation is on the todo list. For those interested in helping out putting openQA to work and keeping the quality of our distribution high, the <a title="openSUSE Conference site" href="http://conference.opensuse.org" target="_blank">openSUSE Conference</a> will feature a workshop on creating tests for Factory.</p>
]]></content:encoded>
			<wfw:commentRss>http://lizards.opensuse.org/2013/06/06/openqa-in-opensuse/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
	</channel>
</rss>
