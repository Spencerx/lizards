<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Miscellaneous &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/category/miscellaneous/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.7.5</generator>
	<item>
		<title>openSUSE OBS git mirror</title>
		<link>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/</link>
		<comments>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/#comments</comments>
		<pubDate>Fri, 13 Sep 2019 19:42:12 +0000</pubDate>
		<dc:creator><![CDATA[bmwiedemann]]></dc:creator>
				<category><![CDATA[Build Service]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[IPFS]]></category>
		<category><![CDATA[mirror]]></category>
		<category><![CDATA[obs]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14032</guid>
		<description><![CDATA[There was some discussion about our OBS and how in contrast Gentoo, VoidLinux or Fedora used git to track packages. So I made an experimental openSUSE:Factory git mirror to see how well it goes and how using it feels. The repo currently needs around 1GB but will slowly grow over time. I did not want [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>There was some discussion about our OBS and how in contrast <a href="https://github.com/gentoo/gentoo">Gentoo</a>, <a href="https://github.com/void-linux/void-packages/tree/master/srcpkgs/aubio/">VoidLinux</a> or <a href="https://src.fedoraproject.org/rpms/aubio/tree/master">Fedora</a> used git to track packages.</p>
<p>So I made an experimental <a href="https://github.com/bmwiedemann/openSUSE/">openSUSE:Factory git mirror</a> to see how well it goes and how using it feels.<br />
The repo currently needs around 1GB but will slowly grow over time. I did not want to spend effort to import all history.</p>
<p>Binary files are replaced by cryptographically secure symlinks into IPFS<br />
and I am currently providing files up to 9MB there.</p>
<p>If you can not run ipfs, you can still get these files through any of the public gateways like this:<br />
<code>curl https://ipfs.io$(readlink packages/a/aubio/aubio-0.4.9.tar.bz2) &gt; OUTPUT</code></p>
<p>So some benefits are already obvious.<br />
It is now much easier to find and download our patches.<br />
Downloading and seaching all of openSUSE is now much faster.<br />
And it works even on Thursdays (when our maintenance window often causes OBS downtimes).</p>
<p>It is meant to be a read-only mirror, so there is no point in opening pull-requests on github.</p>
<p>I hope, you enjoy it and have a lot of fun&#8230;</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/09/13/opensuse-obs-git-mirror/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of the Latest YaST Development Sprints</title>
		<link>https://lizards.opensuse.org/2019/06/25/yast-sprints-77-79/</link>
		<pubDate>Tue, 25 Jun 2019 09:33:05 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Packaging]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13843</guid>
		<description><![CDATA[May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>May and June have been, so far, interesting months for the YaST Team. We worked hard to polish the last details of the recently released openSUSE Leap 15.1, we attended the openSUSE Conference 2019 (with many fruitful conversations), we shared quite some time together around a table without computers (most of the time, we are a geographically distributed team), many team members enjoyed vacations (it&#8217;s spring time in Europe), we organized a Leap 15.1 <a href="https://lists.opensuse.org/opensuse-marketing/2019-06/msg00002.html">launch party with technical talks in Gran Canaria</a>&#8230; and we ran out of energy to also publish our traditional sprint reports in this blog.</p>
<p>We will try to fix that with this blog post in which we will try to summarize some highlights from the latest three development sprints, namely the 77th, 78th and 79th. So be warned, this is going to be a loooong post.</p>
<h3>Support for Multi-device Btrfs File Systems</h3>
<p>We have been working steadily during the three sprints in implementing all the necessary bits to offer a good experience installing and upgrading an (open)SUSE system on top of several block devices by means of Btrfs RAID capabilities. That includes support in the Partitioner, in AutoYaST, in the storage guided setup and more.</p>
<p>We decided that all that deserved a separate blog post. You can find here: <a href="https://lizards.opensuse.org/?p=13814">Getting Further with Btrfs in YaST</a>.</p>
<h3>More Improvements for the Partitioner</h3>
<p>That blog post mentions a couple of changes in the Partitioner that, although initially motivated by the introduction of multi-device Btrfs, go beyond that scope and are aimed to make the all the lists of devices more useful and informative.</p>
<p>Traditionally the Partitioner used two separate columns &#8220;Type&#8221; and &#8220;FS Type&#8221; to describe the function of every device. That was sometimes hard to understand. Moreover, quite often the important information (like the relationship between a partition and its RAID or LVM) was simply missing in those tables.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png" alt="Traditional devices table in the Partitioner" width="300" height="214" class="aligncenter size-medium wp-image-13846" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-300x214.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table-768x549.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/old_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>We have merged those columns into a more informative one that identifies the devices and also gives an overview of the relationship between them at first glance. In addition, the table displaying all the system devices now includes multi-device file systems.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png" alt="Revamped table of devices" width="300" height="215" class="aligncenter size-medium wp-image-13847" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/new_partitioner_table.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Mitigating CPU vulnerabilities from YaST</h3>
<p>If you are interested in security (or simply if you have not been living under a rock) you probably have heard about CPU based attacks like Spectre or Meltdown. The last year has seen a number of these CPU issues, all of them coming along with their own kernel options to change the Linux behavior in order to mitigate the security risks at a price of some performance loss.</p>
<p>However, not all users know what affects their architectures or particular models of CPU and which kernel parameters to use to gain more performance if the security risk is acceptable for them.</p>
<p>For that purpose, a new meta-option called &#8220;mitigations&#8221; was added to the Linux kernel. It allows to enable and disable at once several of those mitigations that prevent CPU attacks. See more information <a href="https://www.suse.com/support/kb/doc/?id=7023836">at this document</a> published by SUSE.</p>
<p>We find that kernel option very useful, so we decided to provide an easy way for users to adjust it. Now the YaST bootloader screen contains a new setting which offers three pre-defined options and even a fourth one to let the users fine-tune the settings on their own. As you can see in the screenshot below, we have included extensive documentation in the help dialog, so you will not need to search for this blog post in the future.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-13849" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/bootloader_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It is also possible to modify this option directly from the installation summary. For that purpose, the &#8220;Firewall&#8221; section was renamed to &#8220;Security&#8221; and it now includes the possibility to tweak the CPU mitigation options, alongside the traditional settings for firewall and opening the SSH port.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png" alt="CPU mitigations in the installation summary" width="300" height="225" class="aligncenter size-medium wp-image-13850" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/summary_mitigations.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Another success story of (open)SUSE offering a promptly solution for our users to easily adapt their systems to ever-changing complex needs.</p>
<h3>Memory Optimizations during Installation</h3>
<p>While the release of openSUSE Leap 15.1 was approaching, we got several bug reports stating the YaST installer used to freeze when using only 1GB RAM with online repositories (see <a href="https://bugzilla.suse.com/show_bug.cgi?id=1136051">bug#1136051</a>).</p>
<p>It turned out that at some point YaST loads the details of <em>all available</em> packages. And that needs a lot of memory if you enable the online repositories during installation. For example the OSS Leap repository contains more than 35.000 binary packages!</p>
<p>The problem was in the YaST internal API accessing the package manager library (<a href="https://github.com/openSUSE/libzypp">libzypp</a>). It did not allow to filter the objects, YaST had to read <em>all</em> objects and then do the filtering in the code. And for each object it returned <em>all</em> attributes, even those which were not needed (like the package description, full RPM name, etc&#8230;). All that data required a lot of memory.</p>
<p>To fix that we have introduced new API calls that allow specifying more filters (like return all selected packages, packages from specific repository,&#8230;) and you can set which attributes should be returned. If you need to know only the name and the version then you will not get the other useless attributes. And to ease the usage of the new API in YaST we provided a nice object oriented wrapper written in Ruby.</p>
<p>This optimization saves a lot of memory, 1GB of RAM should be enough for future installations with the online repositories, even if they grow even more.</p>
<p>Unfortunately, we were only able to diagnose the problem and provide a solution a couple of weeks before the official release of Leap 15.1. Introducing a change in such a sensitive part of the installer was considered too risky (it would have invalidated many of the tests that had been already performed) so the installer included in openSUSE Leap 15.1 is still memory hungry if online repositories are used. For that release, we simply increased the official memory requirements to 1.5 GiB.</p>
<h3>Online Migration from openSUSE Leap 15.1 to SLES15-SP1</h3>
<p>For openSUSE Leap 15.0 it was only possible to migrate from Leap to SLES (SUSE Linux Enterprise Server) manually (see the <a href="https://www.suse.com/documentation/sles-15/book_sle_upgrade/data/sec_upgrade-online_opensuse_to_sle.html">documentation</a>). With Leap 15.1 the goal was to also support a migration using YaST. But we got a bug report saying the online migration from openSUSE Leap 15.1 to SLES15-SP1 displayed a wrong migration summary and didn&#8217;t work well.</p>
<p>It turned out that YaST needed some small fixes to support this properly. The main problem was that YaST did not expect that the base product or the package vendor can be changed during online migration, so far it was only possible to upgrade to the next SLE service pack level. But that is fixed now.</p>
<p>Wanna try the migration from openSUSE Leap 15.1 to SLES15-SP1? Then follow these steps.</p>
<ol>
<li>Install the <code>yast2-registration</code> and <code>yast2-migration</code> packages in the Leap 15.1 installation</li>
<li>Make sure the latest online updates are installed (to install the fixes mentioned above)</li>
<li>Start the YaST registration module and register the openSUSE Leap 15.1 product using your registration key</li>
<li>Then start the YaST migration module, select the migration to SLES15-SP1</li>
<li>(There might be reported some package dependency issues in the migration summary, go to the package manager and resolve them. Usually removing the old openSUSE package is the right solution.)</li>
<li>Start the migration, the SLES packages will be downloaded and installed</li>
<li>At the end the system will be rebooted to start the freshly installed SLES, enjoy! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></li>
<li>(It is recommended to review the orphaned packages, leftovers from the Leap installation, with the command <code>zypper packages --orphaned</code> and possibly remove them.)</li>
</ol>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png" alt="From Leap to SLES via YaST" width="300" height="207" class="aligncenter size-medium wp-image-13851" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-300x207.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration-768x530.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/leap_sles_migration.png 872w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Please note that only minimal server installations of Leap are supported for upgrade, full installations especially with third party packages might not work correctly.</p>
<h3>Why Cannot I Read the Logs?</h3>
<p>Long time ago, the logs of any Linux system were spread over several files living under the <code>/var/log</code> subdirectory. YaST offers its &#8220;System Log&#8221; module to inspect those files in a convenient way. Since the introduction of Systemd and its journal, that information has been gradually moved to this new mechanism by default. And YaST offers its &#8220;Systemd Journal&#8221; module to inspect and query that journal.</p>
<p>Both YaST modules can be executed by any user in the system, not only by root. That&#8217;s intentional because both the Systemd journal and the traditional Linux log files can register information targeted to unprivileged users. But there was some room for improvement in the error message displayed by both modules when such users were trying to access to protected information.</p>
<p>This is how the new more explanatory message looks in the &#8220;System Log&#8221; module.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png" alt="Explanatory pop-up for log viewer" width="300" height="235" class="aligncenter size-medium wp-image-13861" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1-300x235.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/view_anymsg-1.png 527w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And this is the extended message for &#8220;Systemd Journal&#8221;, that now mentions the <code>systemd-journal</code> user&#8217;s group.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/journal.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png" alt="Improved message in the journal viewer" width="300" height="158" class="aligncenter size-medium wp-image-13862" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/journal-300x158.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/journal.png 363w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Another Day at the YaST Office: Adapting to Changes</h3>
<p>As we usually remark in our blog posts, a significant part of the work of the YaST Team consist in keeping YaST in sync with the constant changes in the underlying system. Of course, these sprints were not an exception in that regard. Without trying to do an exhaustive list, let&#8217;s take a look to some of those adaptations since the mentioned underlying changes may be interesting for some readers.</p>
<p>Turns out Systemd developers has decided to change the list of possible states for Systemd services. The <code>systemd-sigabrt</code> state is obsolete and a new <code>systemd-watchdog</code> one was added. In the YaST team we learned some time ago that the list of Systemd states changes more often than what most people would expect. As a consequence we have an automated check to detect these situations. The bell ringed, we adapted the code and everything keeps working.  </p>
<p>Systemd is not the only technology that keeps evolving. Quite some time ago, <a href="https://www.suse.com/documentation/sles-15/book_rmt/data/book_rmt.html">RMT</a> replaced <a href="https://www.suse.com/documentation/sles-12/book_smt/data/book_smt.html">SMT</a> as the default proxy technologies for the <a href="https://scc.suse.com/">SUSE Customer Center</a>. Although both has coexisted for quite some time, from SLE-15 onward only RMT is offered. Thus we have adapted all the references to SMT that still existed in YaST. From now on, only RMT is mentioned to avoid confusion.</p>
<p>Another common adaptation we have to perform in YaST is adjusting some module when the output of the command it runs under the hood has changed. Recently we found out the developers of the command <code>iscsiadm</code> has decided to use more than one exit code to indicate a successful execution (traditionally, only zero should mean that). After a long discussion, we decided to adapt YaST iSCSI to also be happy with the error code 21. What means for you? That future versions of YaST iSCSI should work faster in some situations, since the confusion will not longer result in a timeout. </p>
<h3>YaST Firstboot: a Better Example File</h3>
<p>Those were just some example of the many adaptations we did lately for changes in the system. But not all adjustments are motivated by external changes. We also realized the example configuration file provided by YaST Firstboot (at <code>/etc/YaST2/firstboot.xml</code>) needed some love. Due to the nature of YaST Firstboot, that file should be customized before using YaST Firstboot. But providing an example file with three different steps about acceptance of licenses (two of them enabled and the third one disabled) and other inconsistencies was definitely not helping anyone to understand how to use the module.</p>
<p>In fact, the status of that default example configuration and of the documentation managed to confuse even SUSE&#8217;s quality assurance team. So we improved the example file shipped in the package to make it more realistic and we also updated the YaST Firstboot documentation to clarify how to use that file. Because not all improvements are always done by coding.</p>
<h3>Leap 15.1&#8217;s Most Annoying Bug: Create Home as Btrfs Subvolume</h3>
<p>As all openSUSE users should know, for every Leap release a page is created in the openSUSE wiki listing the so-called Most Annoying Bugs. Leap 15.1 was a very smooth release and this time <a href="https://en.opensuse.org/openSUSE:Most_annoying_bugs_15.1">the corresponding list</a> contains only one bug&#8230; and it&#8217;s a YaST one. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f641.png" alt="&#x1f641;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>In an installed system, when YaST was creating a new user it was always trying to create its home directory as a Btrfs subvolume. Even in cases in which that was impossible. For example, if the directory to be created was not in a Btrfs file system.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png" alt="Writing user error" width="300" height="224" class="aligncenter size-medium wp-image-13865" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error-768x572.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/Writing_user_error.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Fortunately, the bug didn&#8217;t affect the installation process or AutoYaST. We created a fix that was quickly available as a maintenance update. So make sure your openSUSE system is updated before trying to create new users with YaST.</p>
<h3>YaST Network refactoring: status report</h3>
<p>Since we submitted the first bits of the yast2-network refactoring by the end of April, we have made quite some progress in this area. Although it is still an ongoing effort, we would like you to give you an update on the current state.</p>
<p>We might say that we have been working on two different areas the user interface implementation and the future data model.</p>
<p>About the user interface, the team has improved the code quite a lot to make it easier to maintain and extend. We have introduced some classes to de-couple the widgets from the data, and it pays off. Additionally, we have fixed some bugs (many of them related to validations), simplified the process of adding new devices and reorganized the hardware tab.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png" alt="New hardware tab in YaST Network" width="300" height="239" class="aligncenter size-medium wp-image-13854" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-300x239.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware-768x612.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/network_new_hardware.png 844w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Regarding the internal data model, we have been thinking about the best way to represent network configuration in an agnostic way so, in the future, we can not only support <a href="https://en.opensuse.org/Portal:Wicked" rel="nofollow">Wicked</a> but other options too (for the time being, the NetworkManager support is quite limited). If you are curious about the details, we have added a <a href="https://github.com/yast/yast-network/blob/network-ng/doc/network-ng.md">document describing the approach</a> to the repository.</p>
<p>The new data model is already being used to handle DNS and Routing configuration. So if you are using Tumbleweed you have been already using the new network code for some weeks, including the UI enhancements presented in our <a href="https://lizards.opensuse.org/2019/04/30/highlights-of-yast-development-sprint-76/">latest post</a>.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png" alt="New network routing dialog" width="300" height="236" class="aligncenter size-medium wp-image-13748" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png 573w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Although the data model is so far only used in the mentioned parts, the plan is to submit to Tumbleweed a heavily refactored UI layer during next sprint. So stay tuned.</p>
<h3>Added Appstream Metadata to the YaST Packages</h3>
<p>The YaST package manager is not the only software manager in the (open)SUSE distributions. There are some more, like Discover in KDE or the GNOME software manager, not to mention the online <a href="https://software.opensuse.org/appstore">openSUSE appstore</a>.</p>
<p>While the YaST manager is <em>package</em> oriented, those other software managers are <em>application</em> oriented. That makes a huge difference, especially for the beginner users.</p>
<p>The full list of packages does not only include the applications (basically anything a user can start from the desktop), but also shared libraries, pieces that provide functionality for other applications or basic components needed for the system to work. With so many software packages (the openSUSE OSS repository contains over 35.000 of them!) it&#8217;s sometimes hard to find the software you need unless you know what you are looking for.</p>
<p>To offer an application-oriented view on top of all that, the application managers need some special data describing the applications inside the packages. The data are located in the <code>/usr/share/metainfo/*.xml</code> files, if you are interested in the technical details check the <a href="https://www.freedesktop.org/wiki/Distributions/AppStream/" rel="nofollow">AppStream documentation</a> provided by the Freedesktop.org.</p>
<p>Our absolutely awesome community contributor <a href="https://github.com/hellcp">Stasiek Michalski</a> (more famous by his nickname <a href="https://lcp.world/">lcp</a>) realized YaST was not offered in those application managers and decided to fix it. So he created an XML generator which collects the data from YaST packages and automagically generates the metainfo XML file needed by the other software managers.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png" alt="YaST in GNOME Software" width="300" height="271" class="aligncenter size-medium wp-image-13856" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-300x271.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-768x693.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome-1024x924.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-gnome.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As a result, the Gnome Software Manager, Discover and other software managers will offer YaST in Tumbleweed just as any user-oriented application. Thanks lcp!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png" alt="YaST in Discover" width="300" height="244" class="aligncenter size-medium wp-image-13857" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-300x244.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-768x624.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover-1024x832.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/yast-in-discover.png 1072w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>AutoYaST Pre-install Scripts &amp; Storage</h3>
<p>AutoYaST has a special feature to allow users to customize the installation process and take control in different stages of the installation. For that, the AutoYaST profile offers a section where you can insert your custom scripts. There are <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#createprofile.scripts">four types of scripts</a>: <em>pre-scripts</em>, <em>postpartitioning-scripts</em>, <em>chroot-scripts</em>, <em>post-scripts</em> and <em>init-scripts</em>.</p>
<p>For the particular case of <em>pre-scripts</em>, <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#pre-install.scripts">the documentation</a> states that &#8220;<em>It is also possible to change the partitioning in your pre-script</em>&#8220;. That means, for example, you could use a script to create a new partition or to configure some kind of technology. Therefore, it would be very convenient to re-analyze the storage devices after running the user pre-scripts. In fact, that was the default behavior in the old storage stack, but the new one was slightly modified to only re-analyze the system under certain conditions.</p>
<p>But turns out some SLE customers were using pre-scripts to configure the behavior of <a href="https://en.wikipedia.org/wiki/Linux_DM_Multipath">multipath</a> and those changes were not being noticed by AutoYaST.</p>
<p>The solution was quite trivial. We simply decided to always perform a new storage re-analysis after the AutoYaST pre-scripts. We did not find strong reasons to not do it and there should not be significant performance penalty.</p>
<p>And, for the specific case of multipath, YaST now copies some configuration files (e.g., <em>/etc/multipath.conf</em> and <em>/etc/multipath/bindings</em>) to the target system when performing a new installation. Otherwise, the installed system would not contain the configuration applied during the installation.</p>
<h3>Clarifying the Usage of Software Management Options</h3>
<p>Our software manager is one of the most complex YaST modules, which makes some aspects of its usage not fully obvious for some users. You may have even notice that is the only YaST module in which the interface is clearly different when executed in text and graphical mode. Specially the menu at the top of the interface, which is organized in different sections.</p>
<p>Some users where confused by the fact of some options not being persisted between different executions of the module. Those options are there to modify the current operation of the module, not to change the configuration of package management in the system.</p>
<p>When executed in text mode that was clear because such options where labeled as &#8220;<i>temporary change</i>&#8221; but the graphical mode didn&#8217;t have any indication about it. As you can see in the following screenshot, that&#8217;s fixed now.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png" alt="Temporary options in YaST Software" width="300" height="192" class="aligncenter size-medium wp-image-13875" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/sw_single.png 649w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Product License Hard to Understand? Try Another Language!</h3>
<p>Some user reported that in the text-mode installation it was impossible to switch the language of a product license. Although during graphical installation everything works flawlessly, in text mode the language switching widget was there&#8230; but disabled.</p>
<p>The point is that such behavior was not exactly a bug. It was in fact done on purpose. We decided to prevent such language change some time ago because on the Linux console we&#8217;re not able to display the characters of many languages. Hopefully some of our usual reader have just shout &#8220;that&#8217;s not true!&#8221; <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Those users remember that in the <a href="https://lizards.opensuse.org/2018/11/20/yast-sprint-67/">report of our 67th sprint</a> we explained that now we always use <code>fbiterm</code> when installing in text mode in order to be able to display characters of almost every language.</p>
<p>We are now able to display all languages that currently have license translations, so we have enabled the language switching widget and now both graphical installation and text-based one deliver an equivalent user experience.</p>
<h3>More about languages</h3>
<p>This is not the only change related to internationalization we did in these sprints. We also added a specific warning message for situations in which YaST is used to change the language of the system but there is no repository containing the needed translation packages. Something that obviously only affects users configuring system in very restricted environments.</p>
<p>As you can see in this and other recent reports, we have to deal relatively often with difficulties related to translation and internationalization. To reduce the effect of those problems on our final users, we also added some extra mechanisms to detect internationalization errors introduced during development. Hopefully that will mean that in future reports the space dedicated to comment language-related problems gets shorter and shorter. <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </p>
<h3>And that was just a summary!</h3>
<p>As long as this post looks, there are many interesting things we have done in these weeks we left out, intentionally or not. We definitely should avoid skipping three reports in a row in the future!</p>
<p>This week it&#8217;s <a href="https://hackweek.suse.com/">Hack Week</a> at SUSE, which means regular YaST development will be put on hold&#8230; or will turn into something completely different. You never know what the result of a Hack Week can be!</p>
<p>But in any case we will go back to our sprint-based pace in August. So expect a new blog post in three weeks. See you then!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Getting further with Btrfs in YaST</title>
		<link>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/</link>
		<comments>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/#comments</comments>
		<pubDate>Wed, 19 Jun 2019 10:42:24 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13814</guid>
		<description><![CDATA[Since the YaST team rewrote the software stack for managing the storage devices, we have been adding and presenting new capabilities in that area regularly. That includes, among other features, the unpaired ability to format and partition all kind of devices and the possibility of creating and managing Bcache devices. Time has come to present [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Since the YaST team rewrote the software stack for managing the storage devices, we have been adding and presenting new capabilities in that area regularly. That includes, among other features, the unpaired <a href="http://yast.opensuse.org/blog/2018/10/09/highlights-of-yast-development-sprint-64/#changes-in-the-partitioner-ui-to-unleash-the-storage-ng-power">ability to format and partition</a> all kind of devices and the possibility of <a href="https://lizards.opensuse.org/2019/02/27/recap-bcache-in-yast/">creating and managing Bcache devices</a>. Time has come to present another largely awaited feature that is just landing in openSUSE Tumbleweed: support for multi-device Btrfs file systems.</p>
<p>As our usual readers surely know, Btrfs is a modern file system for Linux aimed at implementing advanced features that go beyond the scope and capabilities of traditional file systems. Such capabilities include subvolumes (separate internal file system roots), writable and read-only snapshots, efficient incremental backup and our today&#8217;s special: support for distributing a single file system over multiple block devices.</p>
<h3>Multi-device Btrfs at a glance</h3>
<p>Ok, you got it. YaST now supports multi-device Btrfs file system&#8230; but, what that exactly means? Well, as simple as it sounds, it&#8217;s possible to create a Btrfs file system over several disks, partitions or any other block devices. Pretty much like a software-defined RAID. In fact, you can use it to completely replace software RAIDs.</p>
<p>Let&#8217;s see an example. Imagine you have two disks, <code>/dev/sda</code> and <code>/dev/sdb</code>, and you also have some partitions on the first disk. You can create a Btrfs file system over some devices at the same time, e.g., over <code>/dev/sda2</code> and <code>/dev/sdb</code>, so you will have a configuration that looks like this.</p>
<pre>
        /dev/sda                /dev/sdb
            |                       |   
            |                       |   
     ---------------                |   
    |               |               |   
    |               |               |   
/dev/sda1       /dev/sda2           |   
                    |               |   
                    |               |   
                     ---------------
                            |   
                          Btrfs
                            |   
                            |   
                            @ (default subvolume)
                            |   
                            |   
                 -----------------------
                |       |       |       |   
                |       |       |       |   
              @/home  @/log   @/srv    ...
</pre>
<p>Once you have the file system over several devices, you can configure it to do data striping, mirroring, striping + mirroring, etc. Basically everything that RAID can do. In fact, you can configure how to treat the data and the Btrfs meta-data separately. For example, you could decide to do striping with your data (by setting the data RAID level to the <code>raid0</code> value) and to do mirroring with the Btrfs meta-data (setting it as <code>raid1</code> level). For both, data and meta-data, you can use the following levels: <code>single</code>, <code>dup</code>, <code>raid0</code>, <code>raid1</code>, <code>raid10</code>, <code>raid5</code> and <code>raid6</code>.</p>
<p>The combination of this feature and Btrfs subvolumes opens an almost endless world of possibilities. It basically allows you to manage your whole storage configuration from the file system itself. Usage of separate tools and layers like software-defined RAID or LVM are simply dispensable when using Btrfs in all its glory.</p>
<h3>Managing multi-device Btrfs with the YaST Partitioner</h3>
<p>Interesting feature indeed, but where to start? As usual, YaST brings you the answer! Let&#8217;s see how the YaST version that is currently being integrated in openSUSE Tumbleweed will ease the management of this cool Btrfs feature. SLE and Leap users will have to wait to the next release (15.2) to enjoy all the bells and whistles.</p>
<p>First of all, the Btrfs section of our beloved Expert Partitioner has been revamped as shown in the following picture.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-300x157.png" alt="New Btrfs section of the Partitioner" width="300" height="157" class="aligncenter size-medium wp-image-13818" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-768x401.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/btrfs_section.png 1036w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>It lists all the Btrfs file systems, single- and multi-device ones. You can distinguish them at first sight by the format of the name. The table contains the most relevant information about the file systems, alongside buttons to add a new file system and to delete and modify the existing ones.</p>
<p>Existing Btrfs file system can be inspected and modified in several ways. The &#8220;Overview&#8221; tab includes details like the mount point, file system label, UUID, data and meta-data RAID levels, etc. The file system can be edited to modify some aspects like the mount options or the subvolumes.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/show.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/show-300x157.png" alt="Overview of a Btrfs file system" width="300" height="157" class="aligncenter size-medium wp-image-13822" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/show-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show-768x402.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/show.png 1031w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In addition, the tab called &#8220;Used Devices&#8221; contains a detailed list of the block devices being used by the file system. That list can also be modified to add or remove devices. Note such operation can only be done when the file system does not exist on disk yet. Theoretically, Btrfs allows to add and remove devices from an already created file system, but a balancing operation would be needed after that. Such balancing operation could take quite a considerable amount of time. For that reason it has been avoided in the Expert Partitioner.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/used_devices.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-300x158.png" alt="Devices of a Btrfs file system" width="300" height="158" class="aligncenter size-medium wp-image-13823" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-300x158.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-768x404.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices-1024x539.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/used_devices.png 1033w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, you can still format a single device as Btrfs in the traditional way (using the &#8220;edit&#8221; button for such device). But let&#8217;s see how the new button for adding a Btrfs file system opens new possibilities.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-300x157.png" alt="Adding a Btrfs file system" width="300" height="157" class="aligncenter size-medium wp-image-13820" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-768x401.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem-1024x535.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/add_filesystem.png 1036w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Similar to the RAID dialog, you have the available devices on the left and you can select the devices where you want to create the file system, and also you can indicate the data and meta-data RAID levels. Of course, the admissible RAID levels will depend on the number of selected devices. You will go to the second step of the Btrfs creation by clicking the &#8220;Next&#8221; button. In this second step, you can select the mount options and define the subvolumes, see the next image.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/options.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/options-300x203.png" alt="Options for a new Btrfs file system" width="300" height="203" class="aligncenter size-medium wp-image-13821" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/options-300x203.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/options.png 416w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And apart of all that, the Expert Partitioner has received several small improvements after including multi-device Btrfs file systems. Now that the multi-device Btrfs file systems are considered first class citizens, they are included in the general list of devices. Note the &#8220;Type&#8221; column has also been improved to show more useful information, not only for Btrfs but for all kind of devices.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/06/devices_list.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-300x157.png" alt="Revamped list of devices" width="300" height="157" class="aligncenter size-medium wp-image-13824" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-300x157.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-768x403.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list-1024x537.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/06/devices_list.png 1034w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>What else works?</h3>
<p>But YaST goes far beyond the Partitioner. We have also ensured the storage proposal (i.e. the Guided Setup) can deal with existing multi-device Btrfs configurations when you are performing a new installation. Moreover, the upgrade process is also ready to work with your multi-device Btrfs file system.</p>
<p>Last but not least, AutoYaST can now also be used to specify that kind of Btrfs setups. The <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.htmlhttps://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html">official AutoYaST documentation</a> will include a specific section about advanced management of Btrfs file systems on top of several block devices. The content is being reviewed by the SUSE documentation team right now.</p>
<h3>What does not work (yet)?</h3>
<p>There is still one scenario that is not 100% covered. As described in <a href="https://bugzilla.suse.com/show_bug.cgi?id=1137997">bug#1137997</a>, is still not possible to use the &#8220;Import Mount Points&#8221; button in the Partitioner to recreate a multi-device Btrfs layout. But fear not, it&#8217;s in our list of things to fix in the short term!</p>
<h3>Get it while it&#8217;s hot</h3>
<p>Free Software development is a collaborative process and now we need YOU to do your part. Please test this new feature and report bugs if something does not work as you expected. And please, come with your ideas and further improvements and use cases. And, of course, don&#8217;t forget to have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/06/19/getting-further-with-btrfs-in-yast/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 75</title>
		<link>https://lizards.opensuse.org/2019/04/10/yast-sprint-75/</link>
		<comments>https://lizards.opensuse.org/2019/04/10/yast-sprint-75/#comments</comments>
		<pubDate>Wed, 10 Apr 2019 11:18:24 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Documentation]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Localization]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13736</guid>
		<description><![CDATA[With the upcoming releases of openSUSE Leap 15.1 and SLE-15-SP1 approaching, the YaST Team at SUSE is investing a quite significant time in polishing details and fixing small (and not so small) bugs. But fortunately, that still leaves us enough time to also work in our mid term goals. So welcome to our usual selection [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>With the upcoming releases of openSUSE Leap 15.1 and SLE-15-SP1 approaching, the YaST Team at SUSE is investing a quite significant time in polishing details and fixing small (and not so small) bugs. But fortunately, that still leaves us enough time to also work in our mid term goals.</p>
<p>So welcome to our usual selection of selected bug-fixes (listing them all would be boring) and exciting new stuff. This edition includes:</p>
<ul>
<li>A nice howto for reporting Snapper bugs</li>
<li>Tons of fixes for right-to-left languages like Arabic</li>
<li>Some adjustments and improvements in the storage area</li>
<li>A sneak peak into the future of the yast2-network code</li>
<li>Some contributor-oriented content: like our new pull request templates and revamped Docker images for testing</li>
</ul>
<h3>Snapper Bug Reporting Howto</h3>
<p>During this sprint we fixed a bug that was causing Snapper to crash under very specific circumstances. The scenario was quite unusual so we had to request quite some information from the reporter of the bug to confirm what was happening. As a nice consequence, in addition to having now a more robust Snapper (one bug killed) you can also enjoy <a href="https://en.opensuse.org/openSUSE:Bugreport_Snapper">a new page in the openSUSE wiki</a> listing the information you should attach to Bugzilla if you find a bug in Snapper while using (open)SUSE.</p>
<p>Which is also a nice excuse to remind you about the equivalent &quot;<a href="https://en.opensuse.org/openSUSE:Report_a_YaST_bug">Report a YaST bug</a>&quot; page.</p>
<h3>YaST around the globe&#8230; in all directions</h3>
<p>Many of the YaST users and of our blog readers are not native English speakers that surely appreciate the fact that YaST and (open)SUSE in general can be used in several languages. But have you ever thought about the implications of developing a multi-language software? Sure? In all of them? <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>Human languages are so diverse as the human cultures and there are many details to take into account, from the usage of different alphabets to the various ways of dealing with genre or number (in English the words have just one form for singular and another for plural, but that can be way more complex in other languages). In today&#8217;s issue we will take a look to one of our favorite translation issues &#8211; languages that are written from right to left, like Arabic.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/39228769-ae4c125a-4857-11e8-8b3a-649e2b751e15.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/39228769-ae4c125a-4857-11e8-8b3a-649e2b751e15-300x225.png" alt="The installer summary in Arabic" width="300" height="225" class="aligncenter size-medium wp-image-13739" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/39228769-ae4c125a-4857-11e8-8b3a-649e2b751e15-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/39228769-ae4c125a-4857-11e8-8b3a-649e2b751e15-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/04/39228769-ae4c125a-4857-11e8-8b3a-649e2b751e15.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Dealing with text that is a mixture of Latin and Arabic script is complex and sometimes we have to deal with interesting bugs. Fortunately we have our own weapon to fight those bugs. If in Star Wars they have protocol droids like C3PO, in the YaST team we have Martin Vidner, which is the closer human equivalent.</p>
<p>He fixed all the reported bugs and even created a tool to help debugging similar problems in the future. You can find <a href="https://github.com/mvidner/bidi-debugger">the source code of that tool</a> in Github. There is even a <a href="https://bidi-debugger.herokuapp.com/">hosted instance</a> of the tool to be used by translators or anyone who is curious. </p>
<p>Now, even complex interfaces like our Partitioner look correct enough in right-to-left languages, so we will not have to send mirrors to all our Arabic users.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/ar-partitioner-installed-system.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/ar-partitioner-installed-system-300x227.png" alt="The YaST Partitioner in Arabic" width="300" height="227" class="aligncenter size-medium wp-image-13740" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/ar-partitioner-installed-system-300x227.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/ar-partitioner-installed-system-768x581.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/04/ar-partitioner-installed-system.png 971w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>If you want to know more about this exciting but very complex problem of bidirectional texts, you can start with the following documents.</p>
<ul>
<li><a href="https://gist.github.com/mvidner/e96ac917d9a54e09d9730220a34b0d24#file-bidi-problems-md">Martin&#8217;s great summary</a> of the types problems found in YaST and their respective solutions.</li>
<li><a href="https://en.wikipedia.org/wiki/Bi-directional_text">Wikipedia: Bi-directional text</a>, an overview of the concepts</li>
<li>Unicode Standard Annex #9: <a href="http://www.unicode.org/reports/tr9/">Unicode Bidirectional Algorithm</a>, the gory details, 50 pages of them
</li>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/bidi-989383-hack.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/bidi-989383-hack-300x185.png" alt="More Arabic YaST" width="300" height="185" class="aligncenter size-medium wp-image-13741" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/bidi-989383-hack-300x185.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/bidi-989383-hack-768x474.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/04/bidi-989383-hack.png 801w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>On related news, we got also some reports about some problems visualizing bullet-points in Korean with the beta versions of the future SLE-15-SP1. But as we could verify, all those problems are gone now.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/korean-bullets-sles15sp1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/korean-bullets-sles15sp1-300x194.png" alt="SLES installer in Korean" width="300" height="194" class="aligncenter size-medium wp-image-13744" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/korean-bullets-sles15sp1-300x194.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/korean-bullets-sles15sp1-768x497.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/04/korean-bullets-sles15sp1.png 809w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Storage Fixes</h3>
<p>Other area that has received some attention in this sprint is the storage management. Three related features needed adjustments before the upcoming (open)SUSE releases:</p>
<ul>
<li>Fixed the detection of the boot disk in the Partitioner warnings.</li>
<li>The Guided Setup now works better when doing several attempts in different disks.</li>
<li>AutoYaST can now install over NFS.</li>
</ul>
<p>One of the last storage features that the YaST Team has developed is the support for Bcache devices in the Expert Partitioner. While our QA team was testing it, they found a bug. The Partitioner was complaining because the boot disk did not contain a partition table, which is a mandatory condition for a Legacy (non-UEFI) x86 system. But it was a bogus warning, since they had actually defined a <code>/boot</code> partition in another disk.</p>
<p>That&#8217;s how we found that our Partitioner gets confused if there is a separate partition mounted at <code>/boot</code> and located in a different disk than the root file-system. The Partitioner insisted in considering the disk containing <code>/</code> to be the one that would be using for booting, instead of checking the structure of the disk containing <code>/boot</code>. Now that is fixed and the improvement will be available for the upcoming SLE 15 SP1, Leap 15.1 and, of course, openSUSE Tumbleweed.</p>
<p>But that was not the only storage bug fixed just in time for the upcoming releases. Some sprints ago, the Storage Proposal algorithm for the initial proposal was modified to try installing on each of the individual disks. If the installation was not possible over a given disk, even after disabling all optional configurations (e.g., snapshots and separate <code>/home</code>), a new proposal is tried over the next disk and so on. The problem was that the disabled options in the previous attempt were not restored back when switching to the next disk. This caused some ugly side effects, for example, if the swap partition was disabled when trying over the first disk, then the proposal did not try to create a swap when it was performing the proposal over the next disk. But now this is also fixed and it will work as expected.</p>
<p>And last but not least, AutoYaST now supports to install over a Network File System (NFS). This feature was left back when the new YaST storage stack was re-implemented for SLE 15 GA. Actually, this is a non documented feature. That&#8217;s why we overlooked that SUSE 12 was able to do it using some hacks and a non-validating AutoYaST profile. But no worries, the feature is available again and such profile will work now in any updated SLE-15 or Leap 15.0. Of course, it will also work while installing SLE-15-SP1 or openSUSE Leap 15.1 and Tumbleweed.</p>
<p>Nevertheless, we are working on a better and documented way of supporting that scenario in the future, with no need to twist the specification of the AutoYaST profile. Stay tuned for more information.</p>
<h3>Rethinking the Location of Special Boot Partitions</h3>
<p>And now that the storage layer looks sane and healthy for the upcoming releases, we also took some time to think about future improvements. As you know, the storage Guided Setup always proposes to create special boot partitions as needed on each case. That can be a BIOS BOOT (for Legacy x86 systems with GPT), an ESP (for UEFI systems), PReP (for PPC systems) or zipl (for S/390 systems). Strictly speaking those partitions doesn&#8217;t have to always be in the same disk than the root partition and in some cases having it on a separate one can have some advantages (like sharing the ESP partition with another operating systems).</p>
<p>But we have been reconsidering all the cases, the expectations of most users and of the majority of BIOS vendors and the known bugs in other operating systems about sharing boot partitions. We have decided to be more strict in the future about the location of those partitions. Starting today with openSUSE Tumbleweed and in the 15.2 releases of openSUSE Leap and SLE, the Guided Setup will always propose those partitions in the system disk. That is, in the disk containing <code>/boot</code> and the root filesystem.</p>
<h3>The future of YaST Network is here</h3>
<p>Those who follow this blog know that we invested quite some time on the last couple of years rewriting the part of YaST that was more buggy and harder to modify &#8211; the storage stack. And surely you have already noticed that since we did it we are introducing new features at a very good pace (like bcache, more powerful Partitioner, Raspberry Pi support, etc.) and fixing the reported bugs in a matter of days or even hours.</p>
<p>The next in our list of YaST areas to revamp is the networking support. And we are happy to announce that we are starting to have some visible results in that. There is still a very long road ahead and we will provide more information in upcoming reports. But at least we have already a preview of a fully rewritten management of network routes. It&#8217;s still not available in openSUSE Tumbleweed. But for those who can&#8217;t wait, here you can see the first screenshot. All based in new and clean code backed by automated tests.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png" alt="New network routing dialog" width="300" height="236" class="aligncenter size-medium wp-image-13748" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone-300x236.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/RoutingStandalone.png 573w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3> Activating Online Repositories in openSUSE Leap 15.1</h3>
<p>The openSUSE Tumbleweed installer asks at the beginning of the installation whether to activate and use the online repositories when a network connection is available.</p>
<p>The reason is that the installation DVD does not contain all available packages because of the limited media size. Another advantage is that the installer might directly install newer packages than on the media, this avoids installing the older versions first and then upgrading them to the latest version.</p>
<p>However, in some case you might not want to use the online repositories, for example if the network connection is slow or is paid.</p>
<p>We got a bug report that this question was missing in the Leap 15.1. It turned out that the <code>control.xml</code> file which drives the installer did not contain this step. After adding few lines into the file you can now enjoy the online repositories also in Leap 15.1!</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/04/55151188-f23e1f80-514d-11e9-8dc3-8fe5ab2f93df.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/04/55151188-f23e1f80-514d-11e9-8dc3-8fe5ab2f93df-300x225.png" alt="Online repositories in Leap 15.1" width="300" height="225" class="aligncenter size-medium wp-image-13750" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/04/55151188-f23e1f80-514d-11e9-8dc3-8fe5ab2f93df-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/04/55151188-f23e1f80-514d-11e9-8dc3-8fe5ab2f93df-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/04/55151188-f23e1f80-514d-11e9-8dc3-8fe5ab2f93df.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Why are we writing about this? The reason for the missing step in the Leap 15.1 was a bit surprising. Normally all YaST packages are developed in the Git <code>master</code> branch for both Tumbleweed and Leap. However, in this case the Leap 15.1 has been already branched and was developed separately, the changes in the <code>master</code> went only to the Tumbleweed. And we overlooked that small difference when adding this step.</p>
<p>To avoid this in the future we added a <a href="https://github.com/yast/skelcd-control-openSUSE/pull/180/files">pull request template with a reminder</a> which informs the developers about this difference in the Git setup when opening a pull request.</p>
<p>If your project also has some unusual setup then the <a href="https://help.github.com/en/articles/creating-a-pull-request-template-for-your-repository">pull request template</a> might a good reminder for you as well.</p>
<h3>Building the Docker Images in OBS</h3>
<p>But the reminders about the correct branches and procedures is not the only news we have for YaST contributors and main developers. As you may remember, few years ago we switched to <a href="https://lizards.opensuse.org/2017/02/03/highlights-of-yast-development-sprint-30/">using Docker at Travis</a>. That works well but we found some disadvantages of that initial setup.</p>
<ul>
<li>You need extra account at the Docker Hub to manage the images.</li>
<li>There is no link between OBS and the Docker Hub, we cannot easily trigger image rebuild when a package is updated in OBS.</li>
<li>We only blindly triggered the rebuild every 2 hours (in some cases the rebuild is not necessary, in some cases it took too much time).</li>
<li>The Docker Hub can use the new OBS packages only after they are published by OBS.</li>
<li>The build at the Docker Hub is quite slow (~20 minutes in our case), if an image is currently being built the build is added into the queue and it will start after the previous builds are finished.</li>
</ul>
<p>The result is that a new package can be available in Travis several hours after merging the pull request. And even after triggering the build manually it still might take more than one hour.</p>
<p>We needed a faster cycle and the solution, as usually happens, was in the openSUSE ecosystem. As you may know, the Open Build Service is able of much more than just building packages. So we decided to make use of the OBS capacity of building Docker images.</p>
<p>Building both our packages and our Docker images in OBS comes with many advantages:</p>
<ul>
<li>The image build is started immediately when the new packages are built, it does not wait for publishing the packages and does not wait for full rebuild (only for the needed packages).</li>
<li>No extra accounts/permissions (just use your OBS account).</li>
<li>The build in OBS is faster (6-7 minutes).</li>
<li>No need for extra Jenkins jobs periodically triggering the image rebuilds.</li>
</ul>
<p>This means the new packages should be available in the Docker image in about 10-15 minutes after merging a pull request (for leaf packages, changing a core package which triggers a complete YaST rebuild will of course take more time).</p>
<p>If you want to learn more about this topic, take a look to the following links:</p>
<ul>
<li>The <a href="https://build.opensuse.org/image_templates">OBS Image templates</a> &#8211; examples of Docker images</li>
<li>The <a href="https://registry.opensuse.org">OBS Docker registry</a> &#8211; the built Docker images are published here</li>
<li>The <a href="https://github.com/yast/ci-ruby-container">sources for the YaST Ruby</a> container and the respective OBS <a href="https://build.opensuse.org/package/show/YaST:Head/ci-ruby-container">ci-ruby-container</a> package</li>
<li>The <a href="https://github.com/yast/ci-cpp-container">sources for the YaST C++</a> container and the respective OBS <a href="https://build.opensuse.org/package/show/YaST:Head/ci-cpp-container">ci-cpp-container</a> package</li>
</ul>
<h3>And that was not all!</h3>
<p>As usual, the content of this report is just a small subset of all the work the YaST Team does in two weeks. In this sprint, most of that work went to fixing all kind of bugs in preparation for the next releases. Big bugs, small ones, hidden bugs and embarrassingly obvious ones. Hopefully, you got a fix for your reported bug. If not, you can always stay tuned for more news after the next sprint. And don&#8217;t forget to have a lot of fun!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2019/04/10/yast-sprint-75/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 71 &#038; 72</title>
		<link>https://lizards.opensuse.org/2019/02/27/yast-sprint-71-72/</link>
		<pubDate>Wed, 27 Feb 2019 16:39:45 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13625</guid>
		<description><![CDATA[We know we owe you a report for the previous development sprint (namely the 71th). But we also know how to compensate that. This week we have not only one, but up to three blog posts to keep you tuned to the YaST evolution. So let&#8217;s start with the summary of what have been implemented [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>We know we owe you a report for the previous development sprint (namely the 71th). But we also know how to compensate that. This week we have not only one, but up to three blog posts to keep you tuned to the YaST evolution.</p>
<p>So let&#8217;s start with the summary of what have been implemented and fixed lately. That includes</p>
<ul>
<li>Improvements in the Bcache support in the Partitioner</li>
<li>Users home as Btrfs subvolumes</li>
<li>Better visualization of Salt formulas in YaST Configuration Management</li>
<li>Automatic selection of the needed driver packages</li>
<li>Improvements in many other areas like AutoYaST, bootloader, the Partitioner and the storage Guided Setup</li>
</ul>
<p>You will find links to the other more exhaustive blog posts, about the recently added Bcache support and the revamped Configuration Management module, in the corresponding sections of this report.</p>
<h3>Final Improvements in the Bcache Support</h3>
<p>During several sprints, we have been detailing our efforts to offer a decent support for the Bcache technology in the YaST partitioner. During this sprint we have implemented what we consider the three final bits:</p>
<ul>
<li>Bache devices without caching</li>
<li>Modifying Bcache devices</li>
<li>Listing all caching sets</li>
</ul>
<p>We will now detail this three improvements. But to celebrate that Bcache support looks complete now in the Partitioner, we have published a <a href="https://lizards.opensuse.org/?p=13596">separate blog post</a> explaining what Bcache is and how to take advantage of that technology using the YaST Partitioner. Enjoy!</p>
<p>And back to the topic of recent improvements, we should mention that the Bcache technology allows to create a Bcache device without an associated caching one. This is useful if you are considering to use Bcache in the future. In that case you can setup all your slow devices as Bcache backing devices without a cache, leaving open the possibility of adding caching devices later. That is now possible by selecting the new option labeled &#8220;without caching&#8221; during creation, as shown in the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/no-caching.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/no-caching-300x168.png" alt="No caching device in Bcache" width="300" height="168" class="aligncenter size-medium wp-image-13627" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/no-caching-300x168.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/no-caching.png 433w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, that&#8217;s not much useful without the possibility of modifying a Bcache device. So in the latest sprints we also added a new &#8220;Change Caching&#8221; button.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/modify-bcache.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/modify-bcache-300x223.png" alt="New option to modify a bcache" width="300" height="223" class="aligncenter size-medium wp-image-13628" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/modify-bcache-300x223.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/modify-bcache-768x572.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/modify-bcache.png 952w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>This option will only work for bcaches that do not exist in your system yet (e.g., a bcache that you are creating right now). For existing bcache devices, this option is only available when the bcache has no associated caching device yet. Otherwise, a detaching action would be required, and that could take very long time in some situations.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/no-modify-bcache.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/no-modify-bcache-300x212.png" alt="Avoiding detach operations in bcache" width="300" height="212" class="aligncenter size-medium wp-image-13629" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/no-modify-bcache-300x212.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/no-modify-bcache-768x542.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/no-modify-bcache.png 952w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And last but not least (regarding Bcache), now the Expert Partitioner also shows the list of all caching sets in a separate tab (unsurprisingly) titled &#8220;Caching Set Devices&#8221;. It is only an informative tab, but thanks to it you will be able to check all devices currently used for caching at a quick glance.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/csets.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/csets-300x223.png" alt="List of caching sets" width="300" height="223" class="aligncenter size-medium wp-image-13630" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/csets-300x223.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/csets-768x570.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/csets.png 952w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="create-user-home-btrfs-subvolume">Create the User&#8217;s Home as a Btrfs Subvolume</h3>
<p>As many (open)SUSE users know, <a href="https://btrfs.wiki.kernel.org">Btrfs</a> offers several advantages over traditional Linux file-systems. One of them is the possibility of using subvolumes to customize the configuration and features of different parts of the same file-system.</p>
<p>From now on, the YaST Users module allows to create the home path of new users as a subvolume instead of a plain directory, as long as a Btrfs file-system could be found in the system, of course. As simple as checking the &#8220;Create as Btrfs Subvolume&#8221; option that you will find just below the &#8220;Home Directory&#8221; field.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-qt-300x226.png" alt="Using a Btrfs subvolume as home" width="300" height="226" class="aligncenter size-medium wp-image-13632" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-qt-300x226.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-qt-768x580.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-qt.png 795w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In a multi-user system, using Btrfs subvolumes for the home paths of the users can open a world of possibilities. The system administrator can decide to give some users the ability to create snapshots of their corresponding home directories, even automated on every login and/or logout using PAM Snapper. Similar ideas can be applied to a Samba deployment. Moreover, using subvolumes as homes can also be useful to implement per user quotas.</p>
<p>Beyond multi-user systems, fine-tuning the mount options or customizing snapshots and quotas can also be useful for some special system users (e.g. the user associated to a database system).</p>
<p>And all that, as always in YaST, equally easy to configure with the graphical interface and with the text-based one.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-ncurses-300x192.png" alt="Moreover, using subvolumes as homes can also be useful to implement per user quotas, ncurses version" width="300" height="192" class="aligncenter size-medium wp-image-13633" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-ncurses-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/subvolume-home-ncurses.png 712w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Better Visualization of SUSE Manager Salt Formulas</h3>
<p>As we <a href="https://lizards.opensuse.org/2019/01/31/highlights-of-yast-development-sprint-6970/#revamping-salt-formulas-forms-support">announced on January</a>, we have been working on updating the SUSE Manager Salt Formulas support in <a href="https://github.com/yast/yast-configuration-management/">YaST Configuration Management</a> to comply with the latest forms specification. As it happens with the Bcache support, we feel we have reached a point in which the feature is polished enough to be shipped in the next (open)SUSE stable releases and to deserve its own separate blog post. So go and enjoy our <a href="https://lizards.opensuse.org/2019/02/27/getting-yast-cm-up-to-date/">third blog post of this week</a>, a sneak peak into the marriage of SUSE Manager and YaST, thanks to the magic of Salt Formulas.</p>
<p>In that regard, we have been recently improving how the forms look like to make them as easy to use as possible. Bear in mind that a form can be quite long and the support for scrolling in YaST2 is quite limited. In order to workaround this problem, YaST2 will display a tree at the left side outlining the structure of the form.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm-300x197.png" alt="Tree view of long salt formulas" width="300" height="197" class="aligncenter size-medium wp-image-13634" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm-300x197.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm-768x505.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm-1024x674.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2019/02/yast-cm.png 1388w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Apart from that, we have solved some known problems, like exporting date/time and numeric values in a correct way or handling missing and default values properly.</p>
<p>Sure there are some details that we like to improve but, for now, what we need is feedback from you. So, if you are interested in such a functionality, please check the mentioned dedicated blog post about the topic and have a look to <tt>yast2-configuration-management 4.1.5</tt>.</p>
<h3>Automatically Selecting the Driver Packages in Installed System</h3>
<p>In openSUSE Leap 15.0 and SUSE Linux Enterprise 15, the packages containing drivers needed by the system are installed automatically if they are available during the installation. However, if a repository with driver packages is added later in the installed system then the drivers are not automatically selected to install.</p>
<p>Fortunately, in Leap 15.1 and SLE-15-SP1 the <a href="https://github.com/opensuse/libsolv">package solver</a> implements a new solver mode in which it selects for installation only the recommended driver packages, without also dragging other non-driver recommended packages into the system.</p>
<p>For example, after adding the nVidia driver repository in Leap 15.1 (YaST ➝ Software Repositories ➝ Add ➝ Community Repositories, select &#8220;nVidia Graphics Drivers&#8221;) and starting the package manager (YaST ➝ Software Management), the respective nVidia driver packages are automatically selected to install if there is a supported nVidia graphics card present in the system. This of course works also for the other driver packages and hardware devices.</p>
<p>Just a last note about automatic selection of recommended driver packages. When running the package manager for the first time in a recently installed openSUSE Leap 15.1, it might automatically select some additional packages to install coming from the Leap OSS on-line repository (which is added automatically the end of the installation). Do not be surprised, that&#8217;s actually desired. If you do not want to install those packages simply deselect them, YaST will remember that and it will not select them next time.</p>
<p>See more details in the corresponding <a href="https://github.com/yast/yast-packager/wiki/Selecting-the-Driver-Packages">documentation</a>.</p>
<h3>Improved Disk Selection Screen in the Storage Guided Setup</h3>
<p>Although it may sound surprising for some users, it&#8217;s not uncommon to install SUSE Linux Enterprise on systems with dozens or even hundreds of disks. Of course, in those advanced scenarios the automatic partitioning proposal is not much useful and users are expected to use the Expert Partitioner. But, what if someone tries to use the partitioning Guided Setup in a system with 30 disks? In SLE-15 (or Leap 15.0, in the case of this concrete screenshot) they will see a screen as unusable as this.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/old-qt-30.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/old-qt-30-300x176.png" alt="Broken Guided Setup screen" width="300" height="176" class="aligncenter size-medium wp-image-13643" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/old-qt-30-300x176.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/old-qt-30-768x451.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/old-qt-30.png 928w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, it only gets worse if the number of disks increases or if the text-mode interface is used. So we improved the disk selection screen, taking also the opportunity to include additional information to make easier to identify removable devices like USB and IEEE 1394 ones. In future releases, the screen will normally look pretty much as it looks in the previous version, just with the extra information about USB.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-10.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-10-300x174.png" alt="Normal Guided Setup screen" width="300" height="174" class="aligncenter size-medium wp-image-13644" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-10-300x174.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-10-768x446.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-10.png 913w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>But if the system contains more than 10 disks to choose from, then a different widget that makes scrolling possible will be used, ensuring the user interface remains usable enough in both graphical and text-based modes.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-30.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-30-300x175.png" alt="Guided Setup screen with more than 10 disks" width="300" height="175" class="aligncenter size-medium wp-image-13645" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-30-300x175.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-30-768x449.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/new-qt-30.png 918w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>YaST Bootloader Becomes Less Whinny</h3>
<p>When the installation of the system is spread over multiple physical disks, YaST Bootloader always tries to setup the bootloader in all those disks. This helps for example when MD RAID is used to achieve redundancy and some disk fails. Then the system can still boot from any of the other disks, since they also contain a proper bootloader.</p>
<p>But in some cases the installation can be spread over multiple disks but with only one of them being prepared to host the bootloader (e.g. containing the needed partitions). YaST bootloader used to complain about it while generating its proposal, which resulted in an error shown during installation.</p>
<p>In this sprint we have relaxed the YaST Bootloader expectations a bit. It still tries to create a fail-over setup, but the proposal does not complain if at least one disk looks bootable. Additionally if Grub2 is properly installed to at least one device, then possible failures in other disks will not result in an error pop-up, but just logged for future reference.</p>
<h3>Device Order for MD RAIDs in AutoYaST</h3>
<p>During the development of storage-ng, the feature to specify the device order for MD RAIDs with AutoYaST was lost. The feature can be useful for RAID level 10 to ensure that one full half of the RAID will only reside on one disk subsystem and the other half on the other subsystem. Only then a complete failure of a single subsystem keeps the RAID working.</p>
<p>Now the feature has been re-implemented for Leap 15.1 and SLE-15-SP1 and the &#8220;device_order&#8221; tag of the AutoYaST profile works as expected. For further information about configuring RAID with AutoYaST, consult the <a href="https://www.suse.com/documentation/sles-15/singlehtml/book_autoyast/book_autoyast.html#ay.raid_configuration">AutoYaST documentation</a>.</p>
<h3>Improvements in the Partitioner</h3>
<p>That AutoYaST feature was not the only thing that temporarily disappeared with the replacement of the old storage components by storage-ng. The &#8220;Provide Crypt Passwords&#8221; button in the Partitioner was also not there in the early versions included in openSUSE Leap 15.0. But it was not really an omission, but a consequence on how the activation of logical devices works now in YaST.</p>
<p>During installation, all pre-existing logical devices that need some initialization are always activated to make possible to use them. That includes LVM, Multipath devices (for which a user confirmation is requested) and encrypted devices (for which the password is asked to the user). But triggering such activations in an already installed and running system cannot be done so lightly, since it affects the execution of the whole system.</p>
<p>Still, there are cases in which a user executing the YaST Partitioner in an already installed system may desire to activate currently inactive devices. To allow that we brought back the &#8220;Provide Crypt Passwords&#8221; button, but with two small changes compared to its historical behavior.</p>
<ul>
<li>It activates all kind of devices, not only the crypt ones.</li>
<li>It refreshes all the Partitioner information, reading again the status of all the storage devices.</li>
</ul>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-300x193.png" alt="Provide Crypt Passwords button" width="300" height="193" class="aligncenter size-medium wp-image-13649" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-300x193.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button.png 741w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Of course, any change in behavior is a nice opportunity to revisit and expand the help texts.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-help.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-help-300x202.png" alt="The button explained" width="300" height="202" class="aligncenter size-medium wp-image-13650" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-help-300x202.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-help-768x516.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/02/crypt-button-help.png 786w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Another change that was intentionally introduced in the first versions of the rewritten Partitioner was the fact that new file-systems always got an empty label by default, independently of the previous content of the partition being formatted.</p>
<p>But the old Partitioner used to do things differently when reformatting a partition. In that case, it actually copied the label of the previous file-system into the new one. Some users told us (via bug reports) they wanted the old behavior back, so now the Partitioner preserves the old label when a partition is reformatted.</p>
<h3>Wow, that was a lot!</h3>
<p>As usual, this report only covers a small portion of what the YaST Team has been doing. But definitely this time our readers will have enough material to keep themselves entertained for quite some time. Specially combining this with the two already mentioned monographic posts about <a href="https://lizards.opensuse.org/?p=13596">the Bcache support</a> and about <a href="https://lizards.opensuse.org/2019/02/27/getting-yast-cm-up-to-date/">the compatibility with SUSE Manager Salt Formulas</a>.</p>
<p>Have a lot of fun reading!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprint 67</title>
		<link>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/</link>
		<comments>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/#comments</comments>
		<pubDate>Tue, 20 Nov 2018 16:16:47 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Software Management]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13484</guid>
		<description><![CDATA[Time flies and another development sprint has finished for the YaST team. During it we have focused on improving the installation process, refining it and adding new features to unleash new possibilities. That includes: More options to configure Kubic during installation. Several improvements in the storage proposal. Easing the network configuration and the usage of [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Time flies and another development sprint has finished for the YaST team. During it we have focused on improving the installation process, refining it and adding new features to unleash new possibilities. That includes:</p>
<ul>
<li>More options to configure Kubic during installation.</li>
<li>Several improvements in the storage proposal.</li>
<li>Easing the network configuration and the usage of online repositories in openSUSE.</li>
<li>Improving installation in text mode for CJK and other languages.</li>
<li>Configuring SSH access during installation and in a running system.</li>
<li>And many other small fixes here and there!</li>
<p>Many of these features will be already available in openSUSE Tumbleweed during November (the sprint just finished November 16th and the integration process usually takes some days), others will be visible for the first time in the next SLE-15-SP1 and Leap 15.1 Alpha versions.</p>
<h3>New Dialogs in the openSUSE Kubic Installation</h3>
<p>The <a href="https://www.suse.com/products/caas-platform/">SUSE CaaSP</a> and the <a href="https://kubic.opensuse.org/">openSUSE Kubic</a> products got a new installation workflow some time ago. Originally they used a specific installation workflow (a single all-in-one configuration dialog), but the problem was that many openSUSE/SLE installation features were missing because the installer code was completely different.</p>
<p>That has been changed some time ago to use the usual installation as in standard SLE or openSUSE products. You can read the details about the new installation workflow at the <a href="https://en.opensuse.org/Kubic:CaaSPInstallationComparision#Combined_Workflow">Kubic wiki page</a>.</p>
<p>However, the CaaSP or Kubic products required some more specific settings depending on the  selected role. During this sprint we have added the corresponding steps to the installation.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/kubic.gif" alt="New installation steps for openSUSE Kubic" /></p>
<p>Currently the extra dialog only asks for the NTP server address, but some more options can be added later.</p>
<h3>Improve Textmode Support for CJK and Other Languages</h3>
<p>YaST is able to cope with many languages even when running in textmode. When a user wants to run the installer in textmode using some specific languages -like Chinese, Japanese or Korean-, YaST will use a special terminal emulator called <code>fbiterm</code> which is able to display the characters which are needed in those languages.</p>
<p>Now, instead of keeping two different approaches depending on the language, YaST will try to use this special terminal emulator whenever is possible for all text based installations. Unfortunately, there is a small set of languages that are not properly handled by fbiterm. In those cases, YaST will inform the user about the problem and it will fall back to English.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/japanese.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/japanese-300x225.png" alt="YaST installing SLE-15-SP1 in Japanese" width="300" height="225" class="aligncenter size-medium wp-image-13487" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/japanese.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As a side effect of this unification, the font used during the textmode installation has changed for all the languages that didn&#8217;t used <code>fbiterm</code> in the past. So your SUSE or openSUSE installation may now look slightly different.</p>
<h3>Storage proposal: playing nicely with Intel Rapid Start Technology</h3>
<p><a href="https://software.intel.com/en-us/articles/what-is-intel-rapid-start-technology">Intel Rapid Start Technology</a> (shorted as IRST) enables systems to quickly resume from deep sleep (e.g. if your battery runs out). It&#8217;s a firmware-driven technology that relies on the existence of a special partition located on a SSD (solid state device).</p>
<p>But our partitioning proposal (the so-called Guided Setup) was not aware of the important role of such partition, so it sometimes proposed to delete it in order to use the freed space for installing (open)SUSE on top.</p>
<p>We have improved that and now the IRST partition will only be deleted as a last resort, if deleting all other allowed partitions in the disk is still not enough to make the new system fit. Moreover, an IRST partition located in the same disk than a Windows system will only be deleted if the user explicitly allows the storage proposal to delete that Windows installation.</p>
<h3>Running the storage proposal on top of software RAIDs and USB devices</h3>
<p>But that&#8217;s not the only improvement done in the area of the partitioning guided setup. We have also broadened its usefulness by allowing it to be used on top of new kinds of devices.</p>
<p>First of all, it&#8217;s now possible to execute the guided setup on top of a software MD RAID. For that, the candidate RAIDs has to fulfill one of two conditions: to contain a partition table or to be completely empty (which includes not being formatted, encrypted or used for any other purpose). That is not only another step to take advantage of the relatively recent capability of YaST to partition software RAIDs (thanks to <code>libstorage-ng</code>) but also a very natural way to support the usage of Dell EMC PowerEdge RAID controllers S130 and S140, which offer an hybrid solution based on software RAIDs but backed up by a firmware-driven configuration.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/md_raid.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-300x208.png" alt="Partitioning proposal on top of a software MD RAID" width="300" height="208" class="aligncenter size-medium wp-image-13489" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-300x208.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid-768x533.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/11/md_raid.png 803w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Almost for the same price, we decided that it was time to offer the available USB devices as candidates for the guided setup, even when there are also non-USB candidates. Excluding, of course, the installation media (except when performing a network-based installation, in that case the USB device can be reused to install the system).</p>
<p>As usual, these features will be soon available in openSUSE Tumbleweed, as well as in the next stable versions of openSUSE Leap (15.1) and SUSE Linux Enterprise (SLE-15-SP1).</p>
<h3>Fine-tuning the initial storage proposal</h3>
<p>All the described changes open new possibilities for the users to decide where to execute the storage proposal. But as our users already know, when the installer reaches the storage proposal step for first time (before the user has had the chance to run the Guided Setup or the Expert Partitioner), an initial proposal is automatically calculated and displayed. This proposal is performed without user intervention, and all necessary information is taken from the control file of the current product. For example, whether to create a separate home, or whether to enable snapshots for root, etc.</p>
<p><a href="https://lizards.opensuse.org/2018/11/07/highlights-of-yast-development-sprint-66/#partitioning-proposel-uses-a-single-disk" rel="nofollow">During the previous sprint</a>, this initial proposal was already improved to make an attempt over each individual disk instead of considering all disks together. Now we have improved this behavior to not discard the first disk so early, even if that means getting a smaller (open)SUSE system.</p>
<p>For example, let&#8217;s image we have a system with a first small SSD disk of 40 GiB and a second big Hard Disk of 1 TiB, which is a relatively common configuration for laptops. Since the first disk is too small to allocate a system with the optimal partition sizes and a separate <code>/home</code> partition, the installer used to switch to the second disk, in which it could propose a root partition of the recommended size to use Btrfs snapshots (50 GiB) and a partition for <code>/home</code> bigger than the 40GiB specified as minimum for it in the product description.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-old.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-old-300x228.png" alt="Initial storage proposal before the latest change" width="300" height="228" class="aligncenter size-medium wp-image-13490" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-old-300x228.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-old.png 511w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Now, more attempts will be performed in the first disk before giving up and moving to the next one. So, when the proposal is not possible with the desired sizes and with all the optional devices enabled, it will try to disable some optional settings and to relax the size requirements (using the minimum sizes instead of the recommended ones). In the following screenshot you can see the result of this adjusted initial proposal.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-new.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/initial-new-300x222.png" alt="Initial storage proposal after the latest change" width="300" height="222" class="aligncenter size-medium wp-image-13491" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-new-300x222.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/initial-new.png 508w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Tumbleweed: Add Online Repositories during Installation</h3>
<p>We added a step in the installation workflow to enable online repositories. This means you can now get the latest packages installed immediately during installation instead of installing older versions from the installation media first and later updating them to the latest versions from the openSUSE servers.</p>
<p>Also, because of disk space limitations, the installation media don&#8217;t contain all the packages that openSUSE provides and thus not all <i>system roles</i>; some of the less frequently used desktops, for example, had not been available in the <i>role selection</i> (formerly <em>desktop selection</em>) dialog. With online repositories, they are now available immediately during installation.</p>
<p>For details, see the corresponding <a href="https://github.com/yast/yast-packager/pull/385">pull request</a>.</p>
<h3>Choosing the network backend</h3>
<p>And more changes to the installer you will be able to enjoy very soon in openSUSE Tumbleweed and also in the upcoming openSUSE Leap 15.1. Now it&#8217;s possible to choose the network backend, <i>wicked</i> or NetworkManager, to be used in the final installed system from the Network proposal.</p>
<p>As easy as a click on a hyperlink, as you can see in the images below.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked-300x169.png" alt="New shortcut to change the network backend" width="300" height="169" class="aligncenter size-medium wp-image-13496" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked-300x169.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/11/using-wicked.png 555w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Managing SSH public keys</h3>
<p>When you want to access to a system via SSH, it is a good practice to use public key based authentication instead of the common password-based approach. For that reason, we have added support to handle authorized SSH public keys in the <em>user and group management module</em>, also known as the <em>users module</em>.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/11/ssh-keys.gif" alt="Configuring SSH in yast2-users" /></p>
<p>Additionally, you will be able to set up a public key for the root user at installation time, something that can be especially handy for products like the SUSE CaaS Platform.</p>
<h3>And it keeps moving!</h3>
<p>The YaST crew keeps working hard on fixing bugs and, specially, on building new features for everybody to enjoy in the upcoming versions of all the products of the SLE and openSUSE families. So, as much as we would like to keep talking to you all about all the improvements&#8230; it&#8217;s time to go back to coding! See you again in two weeks with a new report.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/11/20/yast-sprint-67/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 64</title>
		<link>https://lizards.opensuse.org/2018/10/09/yast-sprint-64/</link>
		<comments>https://lizards.opensuse.org/2018/10/09/yast-sprint-64/#comments</comments>
		<pubDate>Tue, 09 Oct 2018 15:09:06 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Usability]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13402</guid>
		<description><![CDATA[Another two weeks of development, another report from the YaST team. During this sprint, we have been working to improve the usage and installation experience in many areas, including but not limited to the following. Improvements in several areas of the Partitioner. More informative Snapper. Better integration of the new Firewall UI with AutoYaST. Improvements [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Another two weeks of development, another report from the YaST team. During this sprint, we have been working to improve the usage and installation experience in many areas, including but not limited to the following.</p>
<ul>
<li>Improvements in several areas of the Partitioner.</li>
<li>More informative Snapper.</li>
<li>Better integration of the new Firewall UI with AutoYaST.</li>
<li>Improvements in roles management and in the roles description.</li>
<li>Better support in YaST Firstboot for devices with no hardware clock, like Raspberry Pi.</li>
</ul>
<p>Let&#8217;s dive into the details </p>
<h3>Changes in the Partitioner UI to Unleash the Storage-ng Power</h3>
<p>We have explained already in several previous posts how we were struggling to come up with a set of changes to the user interface of the Partitioner that would allow to expose all the new functionality brought by storage-ng, while still being familiar to our users and fitting in a text console with 80 columns and 24 lines.</p>
<p>We finally implemented the interface described in <a>this gist</a>,  which fits into a 80&#215;24 text console and allows all kind of operations. Check that document for more info about the behavior and its rationale.</p>
<p>But what does &#8220;all kind of operations&#8221; mean? For example, it means it&#8217;s possible to start with three empty disks and end up creating this complex setup using only the Partitioner.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/complex-devicegraph.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/complex-devicegraph-236x300.png" alt="Complex storage setup" width="236" height="300" class="aligncenter size-medium wp-image-13404" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/complex-devicegraph-236x300.png 236w, https://lizards.opensuse.org/wp-content/uploads/2018/10/complex-devicegraph.png 461w" sizes="(max-width: 236px) 100vw, 236px" /></a></p>
<ul>
<li>In that example, <code>/dev/md0</code> is an MD RAID defined on top of two partitions and formatted as &#8220;/&#8221;. Nothing impressive here so far.
<li><code>/dev/md1</code> is an MD RAID defined on top of a combination of full disks and partitions. Using disks as base for a RAID was not possible in the old Partitioner.</li>
<li>Even more, <code>/dev/md1</code> contains partitions like <code>/dev/md1p1</code> and <code>/dev/md1p2</code>, another thing that the old Partitioner didn&#8217;t allow to configure.</li>
<li><code>/dev/volgroup0</code> is an LVM VG based on one of those MD partitions, allowing to combine the best of the MD and LVM technologies in a new way.</li>
<li>Last but not least, <code>/dev/sdc</code> is a disk formatted to host a file-system directly, with no partitions in between (also a new possibility).</li>
</ul>
<p>The general approach of the new UI is described in the linked document. But since an image is worth a thousand words (and an animation is probably worth two thousands), let&#8217;s see how some part of the process to create the complex setup described about would look in a text console.</p>
<p>This is how you can now directly format a disk with no partitions.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/formatting_a_disk.gif" alt="Formatting a disk" /></p>
<p>Playing with the partitions of a disk is also a good way to get a feeling on how the buttons are now organized and how they dynamically change based on which row is selected in each table. Click on the following image to animate it and see those views in action.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/playing_with_partitions.gif"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/playing_with_partitions-play.png" alt="Playing with partitions" width="300" height="190" class="aligncenter size-medium wp-image-13408" /></a></p>
<p>And for a full experience of completely new stuff. Click on the image below to see an animation showing the whole process of creating an MD RAID on top of two full disks and then creating partitions within the resulting RAID.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/creating_partitioned_array.gif"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/creating_partitioned_array-play.png" alt="Creating a partitioned RAID" width="300" height="190" class="aligncenter size-medium wp-image-13409" /></a></p>
<p>But although the text mode is the limiting factor to design a YaST UI, many users install their systems and use the Partitioner in graphical mode. For those wondering how the reorganized buttons look in that case, here are some screenshots of the installation process of the upcoming SLE-15-SP1 (static screenshots this time, we already had enough animations for one post).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/raid-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/raid-qt-300x215.png" alt="Managing RAIDs with the new Partitioner UI" width="300" height="215" class="aligncenter size-medium wp-image-13414" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/raid-qt-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/raid-qt-768x550.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/raid-qt.png 1009w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/partitions-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/partitions-qt-300x214.png" alt="Managing Partitions with the new Partitioner UI" width="300" height="214" class="aligncenter size-medium wp-image-13415" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/partitions-qt-300x214.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/partitions-qt-768x547.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/partitions-qt.png 1008w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Displaying Bcache Devices Consistently in the Device Graphs</h3>
<p>Surely most Partitioner users have recognized the style of the visual representation used above for the complex example setup. As you know, the Partitioner offers similar representations in the &#8220;Device Graphs&#8221; section, both for the original layout of the system and for the target one.</p>
<p>After adding support for Bcache to the Partitioner we detected a small but annoying problem in those graphs. The caching devices were using their UUID as labels, which had two drawbacks.</p>
<ul>
<li>It was too long.</li>
<li>It&#8217;s not known in advance for &#8220;planned&#8221; cache sets (i.e. sets that will be created after going forward in the Partitioner), which resulted in boxes with no labels</li>
</ul>
<p>So know we use a fixed &#8220;bcache cache&#8221; label for all cache sets, which looks like this.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/cset-label.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/cset-label-300x221.png" alt="New label for cache sets in the Device Graph" width="300" height="221" class="aligncenter size-medium wp-image-13416" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-label-300x221.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-label-768x565.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-label-1024x753.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-label.png 1027w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>As opposed to the old way with empty boxes.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label-300x222.png" alt="Lack of labels in the old Device Graphs" width="300" height="222" class="aligncenter size-medium wp-image-13417" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label-300x222.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label-768x567.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label-1024x756.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/10/cset-no-label.png 1029w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Adding and removing Bcache devices</h3>
<p>And since we mention the Bcache support in the Partitioner, it&#8217;s worth noticing that the implementation continues moving forward at good pace. During this sprint we implemented a first version of the operations to add a new Bcache device and to delete it.</p>
<p>When adding a new device, the only options that can currently be defined is which devices to use to construct it. But the next sprint has started and you can expect more options to be supported in the near future.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache-300x220.png" alt="Creating a new Bcache device" width="300" height="220" class="aligncenter size-medium wp-image-13418" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache-300x220.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache-768x564.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache-1024x752.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/10/create-bcache.png 1030w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>When the Bcache device is created, then it can be formatted, mounted or partitioned with the same level of flexibility than other devices in the system. So soon (after the usual integration and automated testing phases) Tumbleweed users will be able to use the YaST Partitioner to test this exciting technology.</p>
<p>Of course the operation to delete a Bcache device offers the usual checks and information available in other parts of the Partitioner, like shown in the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/delete-bcache.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/delete-bcache-300x221.png" alt="Deleting a bcache device" width="300" height="221" class="aligncenter size-medium wp-image-13419" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/delete-bcache-300x221.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/delete-bcache-768x565.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/delete-bcache.png 1022w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Both screenshots are taken with an updated version of the installer of the upcoming SLE-15-SP1, since this functionality will be available in such distribution and, of course, also in openSUSE Leap 15.1.</p>
<h3>Snapper: Show Used Space for each Snapshot</h3>
<p>As those following our blog already know, the YaST Team is also somehow responsible for the development and maintenance of Snapper, the ultimate file-system snapshot tool for Linux. And Snapper has also received some usability improvements during this sprint.</p>
<p>For systems with btrfs and quota enabled, the output of &#8220;snapper list&#8221; now shows the used space for each snapshot. The used space in this case is the exclusive space of the btrfs quota group corresponding to the snapshot.</p>
<pre>
# snapper --iso list
Type   | # | Pre # | Date                | User | Used Space | Cleanup | Description      | Userdata     
-------+---+-------+---------------------+------+------------+---------+------------------+--------------
single | 0 |       |                     | root |            |         | current          |              
single | 1 |       | 2018-10-04 21:00:11 | root | 15.77 MiB  |         | first filesystem |              
single | 2 |       | 2018-10-04 21:19:47 | root | 13.78 MiB  | number  | after install    | important=yes
</pre>
<p>For more details about this change, its advantages and limitations, check the <a href="http://snapper.io/2018/10/04/used-space.html">new post at the Snapper blog</a>.</p>
<h3>Simplified Role Selection</h3>
<p>The role selection dialog in SLE-15 is always displayed in the installation workflow. However, it does not make much sense to display it if there is only one role to select. When you do not register the system and do not use any additional installation repository then in the default SLES-15 installation you can see only the <i>minimal</i> system role.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/10/one-role.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/one-role-300x225.png" alt="Selecting one out of one roles" width="300" height="225" class="aligncenter size-medium wp-image-13435" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/10/one-role-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/10/one-role-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/10/one-role.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>In such case you cannot actually change anything as the only role is pre-selected by default and the only thing which you can do is to press the <i>Next</i> button.</p>
<p>Therefore we improved in for SLE15-SP1, if there is only one role to select then the role is selected automatically and the dialog is skipped.</p>
<p>In addition to that, many of the role descriptions have been adapted and simplified to, hopefully, be more clear.</p>
<h3>YaST Firstboot in devices with no hardware clock</h3>
<p>SLE and openSUSE can be installed on a great variety of devices, including some system that doesn&#8217;t include a hardware Real Time Clock, like the popular Raspberry Pi. That means the usual mechanism to establish the current date and time (using the <code>hwclock</code> command) fails in such devices. That general problem was detected during the usage of YaST Firstboot to configure new devices.</p>
<p>So now YaST detects situations in which there is no Real Time Clock and uses the <code>date</code> as an alternative to set the date and time. This fix, already submitted to openSUSE Tumbleweed, will be available in all upcoming versions of SLE (like SLE-12-SP4 and SLE-15-SP1) and openSUSE Leap.</p>
<h3>Better integration of the new Firewall UI with AutoYaST</h3>
<p>On the <a href="https://lizards.opensuse.org/2018/10/01/yast-sprint-63/">previous report</a> we anticipated the new UI we are building for configuring Firewalld from YaST. During this sprint we have been focusing on some aspects that need to be finished before we can release this new functionality.</p>
<p>Now this UI can be invoked from the AutoYaST module in YaST, meaning it can be used to import and then fine tune the current configuration of the system so it can be exported to an AutoYaST profile.</p>
<p>And since we are already in animation mood, check how the new UI can be used to define an AutoYaST profile.</p>
<p><img src="//lizards.opensuse.org/wp-content/uploads/2018/10/firewall_ay_config.gif" alt="Using the Firewalld UI from the AutoYaST module" /></p>
<p>Very soon the whole functionality will be ready for prime time and we will release it together with a separate blog post to explain all the details.</p>
<h3>Stay tuned</h3>
<p>We are already working on the next sprint, with special focus on AutoYaST, on Snapper and on improving the installation experience in several scenarios. As mentioned above, it&#8217;s likely that you will get more news from us (about the new Firewalld support) even before that sprint is finished.</p>
<p>But if you can&#8217;t wait for more news, don&#8217;t hesitate to visit us on our Irc #yast channel on Freenode. Otherwise, see you here again soon.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/10/09/yast-sprint-64/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>YaST Squad Sprint 61</title>
		<link>https://lizards.opensuse.org/2018/08/29/yast-sprint-61/</link>
		<comments>https://lizards.opensuse.org/2018/08/29/yast-sprint-61/#comments</comments>
		<pubDate>Wed, 29 Aug 2018 08:53:18 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13325</guid>
		<description><![CDATA[We have to admit that lately we have not been exactly regular and reliable in delivering our blog posts. But with the vacation season coming to an end, we are determined to recover the good pace. Since the proof is in the pudding, here is our latest report, just one week after the previous one. [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>We have to admit that lately we have not been exactly regular and reliable in delivering our blog posts. But with the vacation season coming to an end, we are determined to recover the good pace. Since the proof is in the pudding, here is our latest report, just one week after the previous one.</p>
<h3>Improving the user experience in the Services Manager</h3>
<p>And talking about <a href="https://lizards.opensuse.org/2018/08/22/yast-squad-sprint-59-60/">the previous report</a>, we presented there several improvements in the YaST Services Manager module, including the new &#8220;Apply&#8221; and &#8220;Show Log&#8221; buttons. With the &#8220;Apply&#8221; button, all changes performed over the services are applied without closing the Services Manager, which allows you to continue using it and to inspect the logs of a service without relaunching the Services Manager again. But this new &#8220;Apply&#8221; button only makes sense when there is something to save, so during this sprint we have improved the UI to disable the button when nothing has been changed yet. In addition, now it is easier to know what we have edited so far in the Services Manager. For every change over a service, the new value is explicitly highlighted by using the special mark <code>(*)</code>. For example, when you change the start mode of a service from &#8220;On boot&#8221; to &#8220;On demand&#8221;, you will see &#8220;<code>(*) On Demand</code>&#8221; in the corresponding column, see example.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/services-mark.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/services-mark-300x224.png" alt="https://lizards.opensuse.org/2018/08/22/yast-squad-sprint-59-60/" width="300" height="224" class="aligncenter size-medium wp-image-13327" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/services-mark-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/services-mark-768x573.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/services-mark.png 871w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The list of services and the changes performed on them can be quite long. So in addition to the new mark, now a confirmation popup is shown up when using the &#8220;Apply&#8221; or &#8220;OK&#8221; button. This popup will present a summary with all changes that will be applied, that is, what services will be started or stopped, what services will change its start mode to &#8220;on boot&#8221;, &#8220;on demand&#8221; or &#8220;manually&#8221;, and even which will be the new default Systemd Target in case you have modified it. See an example in the following screenshot.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/services-popup.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/services-popup-300x224.png" alt="New summary of changes in the Services Manager" width="300" height="224" class="aligncenter size-medium wp-image-13328" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/services-popup-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/services-popup-768x572.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/services-popup.png 871w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>These improvements will reach openSUSE Tumbleweed soon and will be available in the upcoming versions of SLE (SLE-15-SP1) and openSUSE Leap (15.1).</p>
<h3>Yast2 Systemd classes reorganized</h3>
<p>Related to the changes in the Service Manager and in a more developer-oriented note. Yast2 Systemd (the set of YaST components that handle Systemd units under the hood) also has been completely reorganized in a more Ruby compliant way. Moving from YCP-style modules to a set of classes that behave like nice citizens of the Ruby ecosystem in their own proper namespace.</p>
<h3>AutoYaST support for Xen virtual partitions</h3>
<p>And to continue with refinements over the features introduced in the previous sprint, we have also improved the support for the so-called Xen virtual partitions that we presented in our previous post. As explained there, the old storage stack used to represent the Xen devices like <code>/dev/xvda1</code> as partitions of a non-existing <code>/dev/xvda</code> hard disk. In the new stack, those devices are treated as they deserve, as independent block devices on themselves with no made-up disks coming from nowhere.</p>
<p>But AutoYaST profiles from a SLE-12 or Leap 42.x still pretend there are hard disks grouping the Xen virtual partitions. So in addition to the fixes introduced in the Partitioner during the previous sprint, we also had to teach the new storage stack how to handle fanciful AutoYaST <code>&lt;drive&gt;</code> sections like this, used to describe groups of Xen devices (<code>xvda1</code> and <code>xvda2</code> really exist in the system, <code>xvda</code> doesn&#8217;t).</p>
<pre>
 &lt;drive&gt;
    &lt;device&gt;/dev/xvda&lt;/device&gt;

    &lt;partition&gt;
      &lt;partition_nr&gt;1&lt;/partition_nr&gt;
      ...information about /dev/xvda1...
    &lt;/partition&gt;

    &lt;partition&gt;
      &lt;partition_nr&gt;2&lt;/partition_nr&gt;
      ...information about /dev/xvda2...
    &lt;/partition&gt;

  &lt;/drive&gt;
&lt;/pre&gt;
</pre>
<p>The fix will be released as an installer self-update patch so users installing SLE-15 (with access to a self-update repository) can take advantage of it. In the mid term we will have to come up with a more realistic format to represent such devices in the AutoYaST profiles, but so far the limitations of the current AutoYaST format enforces us to keep the current approach.</p>
<h3>Ignoring inactive RAID arrays</h3>
<p>But that&#8217;s not the only new skill of Storage-ng for this sprint. It also learned how to better manage inactive RAID arrays. MD RAID arrays are built to handle failures of the underlying physical devices. When some of the devices fail, the RAID becomes &#8220;degraded&#8221; which means the data is still accessible but it&#8217;s time to fix things. When too many devices suffer a fault, the RAID becomes inactive and it cannot operate any longer until it&#8217;s repaired. Our Partitioner was not handling this situation well, popping up a generic &#8220;unexpected situation&#8221; error message.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/unexpected-error.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/unexpected-error.png" alt="Generic error message in Storage-ng" width="298" height="193" class="aligncenter size-full wp-image-13332" /></a></p>
<p>We have fixed that, and the storage stack doesn&#8217;t go nuts any longer if an inactive RAID array is found. Even more, it now shows an &#8220;Active: Yes/No&#8221; field under the RAID heading to inform the user in case the RAID is in such bad shape.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/inactive-raid.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/inactive-raid-300x225.png" alt="Partitioner displaying an inactive RAID array" width="300" height="225" class="aligncenter size-medium wp-image-13334" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/inactive-raid-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/inactive-raid-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/inactive-raid.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>All that will be soon available as a maintenance update for SLE-15 and Leap 15.0. So far, no mechanisms have been introduced to stop the user from modifying an inactive RAID array with the Partitioner. That will come in the future, together with other MD RAID improvements in Storage-ng targeting future releases of SLE and openSUSE Leap.</p>
<h3>Media support in the Installation Server module</h3>
<p>It&#8217;s quite embarrassing but it turned out that the Installation Server YaST module in SLE15 and openSUSE Leap 15.0 is not able to add the SLE15/Leap15 installation media. The reason is that the new media use a different repository format and the Installation Server module crashed when trying to add a new repository.</p>
<p>Fortunately the fix was small and allows adding the new media correctly. We plan to release a maintenance update for SLE15, openSUSE Leap 15.0 and SLE12-SP3. It turned out that the code in SLE11-SP4 is more robust and does not crash so we do not need an update there.</p>
<h3>Improved help text for system roles</h3>
<p>We recently got a bug report about how hard was to read the help text in the installation screen explaining the system roles. So we took it as an opportunity to try how flexible our help text system is. Adding some richtext format made it look much better in graphical mode and also surprisingly well text mode. Let&#8217;s see some screenshots from Leap 15.0, although the fix applies to as well to openSUSE Tumbleweed and the SLE15 family.</p>
<p>This is how it looked before the fix.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-prefix.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-prefix-300x226.png" alt="The poorly formatted help of the System Roles screen" width="300" height="226" class="aligncenter size-medium wp-image-13336" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-prefix-300x226.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-prefix-768x578.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-prefix.png 1023w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And that how it looks now, in both Qt and Ncurses, with the new format.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-qt-300x225.png" alt="The properly formatted text of the System Roles screen" width="300" height="225" class="aligncenter size-medium wp-image-13337" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-qt-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-qt-768x577.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-qt.png 1022w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses-300x224.png" alt="Proper format even in text mode" width="300" height="224" class="aligncenter size-medium wp-image-13338" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses-768x574.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses-1024x765.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/08/roles-ncurses.png 1028w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Fixed PHP support in the YaST HTTP server module</h3>
<p>The YaST HTTP server module allows enabling the PHP support in the Apache web server configuration. However, as the module is not actively developed it turned out that the PHP support was broken. YaST wanted to install the <code>apache2-mod_php5</code> package which is not available in openSUSE Leap 15.0 or SLE15, there is a newer <code>apache2-mod_php7</code> package.</p>
<p>After checking the other required packages it turned out that a similar problem exists for some other Apache modules. To avoid this issue in the future again we have added an additional test which checks the availability of all potentially installed packages. If there is a new version or a package is dropped we should be notified earlier by continuous integration instead of an user bug report later.</p>
<h3>Stay tuned</h3>
<p>Of course, in addition to the mentioned highlights we have fixed several small and medium bugs. And we plan to continue improving YaST in many ways&#8230; and to keep you punctually updated. So don&#8217;t go too far away.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/08/29/yast-sprint-61/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Update on YaST Development Status</title>
		<link>https://lizards.opensuse.org/2018/07/05/yast-development-update/</link>
		<comments>https://lizards.opensuse.org/2018/07/05/yast-development-update/#comments</comments>
		<pubDate>Thu, 05 Jul 2018 15:53:56 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13248</guid>
		<description><![CDATA[Five weeks without blogging is certainly a quite an hiatus for the YaST Team. But fear no more, we are back! This is the first time in quite a while in which our post is not titled &#8220;Highlights of YaST Development Sprint&#8221; and there are good reasons for that. Adapting the YaST Team Structure the [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Five weeks without blogging is certainly a quite an hiatus for the YaST Team. But fear no more, we are back! This is the first time in quite a while in which our post is not titled &#8220;Highlights of YaST Development Sprint&#8221; and there are good reasons for that.</p>
<h3>Adapting the YaST Team Structure the Agile Way</h3>
<p>Now that openSUSE Leap 15.0 is out and SUSE Enterprise Linux 15 is ready to be shipped, we felt it was time to rethink our activities. For the duration of the storage-ng development, we had split the YaST team into two sub-teams: Team S for <strong>S</strong>torage and Team R for the <strong>R</strong>est. But now new challenges await us; there are some things that were pushed aside because getting storage-ng into an acceptable state had top priority.</p>
<p>We decided we&#8217;d try an approach that other development teams in SUSE have already been using successfully: split up the YaST team into &#8220;squads&#8221; of 3-5 people each for the duration of a couple of sprints. Each squad is centered around a big topic that needs to be addressed. There is no long-term fixed assignment of anyone to any squad; the idea is to shuffle people and thus know-how around as needed, of course taking each developer&#8217;s interests into account. So the squads and the topics will change every few weeks.</p>
<p>Is this the pure spirit of Scrum and the agile bible? We don&#8217;t know. And we don&#8217;t care. The agile spirit is to adapt your work based on what makes sense in every moment. We work the agile way, so the way of working also has to be agile.</p>
<p>The next sprint&#8217;s report will contain more information about the first set of squads and the results they are delivering. But meanwhile we have done much more than just reorganizing our forces. While the sprint-based work was suspended (thus the blog title not containing the word &#8220;sprint&#8221;), the YaST team still managed to put out of the door quite some features, improvements and bug fixes targeting mainly Tumbleweed.</p>
<h3>Expert Partitioner: Moving Partitions</h3>
<p>After quite some effort, the YaST team has completely rewritten the Expert Partitioner from scratch using the new storage stack (a.k.a. storage-ng). And although this new Expert Partitioner already offers practically all the same features than the old one, some last options are still coming. One them in the button for moving partitions, which saves us of a lot unnecessary work in many cases. For example, imagine you are installing openSUSE Tumbleweed and the installer automatically proposes you to create a partition for root and, just following it, a second partition for home. In case you don&#8217;t like the default proposed sizes (e.g. because you want a bigger root), you have to use the Expert Partitioner to fix the situation. You have to completely remove the home partition, resize root for enlarging it and then create home again with the same options than before.</p>
<p>Now, with the &#8220;Move&#8221; button, this kind of modifications are much easier. For that example, you can accomplish exactly the same by simply resizing home (without deleting it completely) and moving the resized home closer to the end of the disk (by using Move button). After moving the home partition, you have enough free space for enlarging the root partition. In the following screenshot you can see this dialog for moving partitions.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/moving1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/moving1-300x225.png" alt="Moving partitions" width="300" height="225" class="aligncenter size-medium wp-image-13253" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/moving1-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/moving1-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/moving1.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>One important thing to take into account is that the movement of partitions is only possible for new partitions, that is, it is not possible to move partitions that already exist on disk.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/nomoving.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/nomoving-300x225.png" alt="Trying to move an existing partition" width="300" height="225" class="aligncenter size-medium wp-image-13254" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/nomoving-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/nomoving-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/nomoving.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>YaST Masking Systemd Mount and Swap Units</h3>
<p>And speaking about the Partitioner and its relationship with the rest of the system, the transition from SysVinit to Systemd changed the behavior of (open)SUSE concerning mounting devices. Systemd generates mount units for various file systems, e.g. those listed in <code>/etc/fstab</code>. The result is that Systemd may automatically mount any file system, even if that file system has been manually unmounted before. This can be problematic when the user needs the file system to be unmounted for certain operations, like resizing or unplugging.</p>
<p>Thus, now the Partitioner uses a new mechanism to prevent that to happen during its execution. Starting with version 4.0.194, the <code>yast2-storage-ng</code> package includes and uses the script <code>/usr/lib/YaST2/bin/mask-systemd-units</code> to mask all mount and swap units one by one. The script might also be useful for direct use of system administrators. So&#8230; profit!</p>
<h3>Showing Logs the Systemd Way</h3>
<p>And since we speak about how Systemd has changed the way the overall system works, it&#8217;s also worth noticing how more and more services has been adopting the Systemd journal for its logging purposes.</p>
<p>Some of the existing YaST modules to configure a given service include a button to show the logs of such service. In the past, they used to display the content of <code>/var/log/messages</code> with some basic filtering to ensure only the information relative to the service (e.g. <code>tftp</code>) was shown. But that didn&#8217;t work out of the box for services already using the Systemd journal, and we had gotten quite some bug reports about it.</p>
<p>Fortunately, the solution is really at our fingertips. You surely know by now that there is a YaST module for viewing the  journal content with powerful queries for filtering, searching and so so on.  The obvious solution is to use that YaST journal module also within other YaST modules, in order to show domain specific logs.</p>
<p>So far we adapted the YaST tftp module, but it will be easy to fix also other places that use the old approach that no longer works. And this is how it looks when you click the &#8220;Show Logs&#8221; button in the YaST module to configure tftp.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/tftp-journal-entries.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/tftp-journal-entries-300x201.png" alt="Journal entries for the tftp module" width="300" height="201" class="aligncenter size-medium wp-image-13256" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/tftp-journal-entries-300x201.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/tftp-journal-entries-768x514.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/tftp-journal-entries.png 999w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Usability Improvement in the Repositories Manager</h3>
<p>The YaST repositories manager displays the repositories sorted by priority. But some people have a lot of repositories in their system and make no use of the priorities. Since there was not a clear second criteria, the order of the repository list looked quite arbitrary in those cases. Now all the repositories with the same priority are sorted by name, which makes more sense. See how it looked before the improvement.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/repos-before.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/repos-before-300x193.png" alt="List of repositories sorted only by priority" width="300" height="193" class="aligncenter size-medium wp-image-13258" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-before-300x193.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-before-768x494.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-before-1024x659.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-before.png 1345w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>And compare to how it looks now.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/repos-after.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/repos-after-300x192.png" alt="List of repositories sorted by priority and name" width="300" height="192" class="aligncenter size-medium wp-image-13259" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-after-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-after-768x491.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-after-1024x655.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/repos-after.png 1346w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Handling Inconsistent Boot Methods During Upgrade</h3>
<p>We got a rather interesting amount of bug reports for openSUSE Leap 15.0 about collisions between the <code>grub2</code> and <code>grub2-efi</code> bootloaders during the upgrade process. The root cause was that the installation medium used a different booting mode than the installed system being upgraded. For example, the installed system uses EFI boot but the upgrade is executed from a DVD booted via legacy mode (i.e. disabling EFI). In that case, the kernel running from the DVD does not expose some devices that are needed to write to the EFI boot manager. Moreover, it causes troubles to the updater itself, which does not expect this situation.</p>
<p>Looking at the majority of the bug reports, it is obvious that in most cases it happens by accident rather than the user consciously trying to mix both boot modes. So to improve the user experience we added a warning that will be displayed when this situation is detected, before starting the upgrade. That gives the user the possibility to fix the problem or to continue if the situation is really intentional.</p>
<p>Below you can see how it looks, both in graphical and text mode, in a patched openSUSE Leap 15.0 installation media, since the feature was developed too late to be included in the official installation images.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt-300x224.png" alt="Graphical warning about inconsistent boot mode" width="300" height="224" class="aligncenter size-medium wp-image-13261" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt-768x575.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt-1024x766.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-qt.png 1028w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-300x224.png" alt="Text-mode warning about inconsistent boot mode" width="300" height="224" class="aligncenter size-medium wp-image-13262" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-300x224.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-768x574.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses-1024x765.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/07/efi-warning-ncurses.png 1025w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>What&#8217;s Next? Hack Week!</h3>
<p>As commented at the beginning of the post, we have restarted the sprint-based work, although with a little twist to try out the squads approach. But before we come back to you to show the results of the first squad-based sprint, we have something else to do &#8211; <a href="https://hackweek.suse.com/">Hack Week 17!</a>.</p>
<p>Again it&#8217;s the time of the year for all SUSE Engineers (and any Open Source enthusiast willing to join) to innovate and learn new stuff. So please forgive us if we go too deep into playing and we are less responsive next week. See you again soon!</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/07/05/yast-development-update/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Highlights of YaST Development Sprint 57</title>
		<link>https://lizards.opensuse.org/2018/05/31/yast-sprint-57/</link>
		<pubDate>Thu, 31 May 2018 13:02:21 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Events]]></category>
		<category><![CDATA[Factory]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Programming]]></category>
		<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13201</guid>
		<description><![CDATA[Three weeks from our last update on this blog. Time flies when you are busy! As you know, openSUSE Leap 15.0 was released in the meantime, which also means the active development of SLE15 is coming to an end&#8230; so time to look a little bit further into the future. That&#8217;s why we had a [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Three weeks from our last update on this blog. Time flies when you are busy! As you know, openSUSE Leap 15.0 was released in the meantime, which also means the active development of SLE15 is coming to an end&#8230; so time to look a little bit further into the future.</p>
<p>That&#8217;s why we had a face-to-face workshop with the whole YaST Team at the beautiful city of Prague during several days right before joining the <a href="https://events.opensuse.org/conference/oSC18">openSUSE Conference 2018</a>.</p>
<p>But we have done much more in three weeks than attending workshops and conferences. Apart from last-minute fixes, here you have a list of some interesting changes we have done in YaST in this period. Take into account that some of these changes didn&#8217;t make it into Leap 15.0, although all will be available in SLES15 and are probably already integrated into openSUSE Tumbleweed.</p>
<h3>Fine tuning installer behavior in small disks</h3>
<p>As you may know, the default installation of SLE and both openSUSE distribution enables Btrfs snapshots in the root partition alongside separate partitions for <code>/home</code> and swap. That means a default installation needs quite some space. In SLE12 and openSUSE Leap 42.X, if such disk space was not there the installer silently tries to disable the separate <code>/home</code> and even the snapshots in order to be able to create an initial proposal.</p>
<p>That behavior has become configurable for each product and role with Storage-ng and during the last sprint there was some controversy about what the configuration should be, both for openSUSE and the SLE family. It may look like a minor problem, but it becomes very relevant in virtualization environment (where virtual disks smaller than 10 GiB are not uncommon) or certain architectures with special storage devices like s390 and ARM.</p>
<p>The final decision was to never disable snapshots automatically in the case of openSUSE, so the user will be forced to manually go through the Guided Setup and explicitly disable snapshots to install in a small disk. In the SLE case, it was decided to keep the traditional behavior (automatically disabling snapshots if really needed) but making the situation more visible by adding a previous sentence to explain how the initial proposal was calculated.</p>
<p>So the installation in a normal disk would look like this.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/05/default.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/05/default-300x197.png" alt="Default initial partitioning proposal" width="300" height="197" class="aligncenter size-medium wp-image-13203" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/05/default-300x197.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/05/default.png 632w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>While the installation in a very small disk displays some information similar to the following screen (the wording was slightly improved after taking the screenshots).</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/05/minimal.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/05/minimal-300x192.png" alt="Adjusted initial partitioning proposal" width="300" height="192" class="aligncenter size-medium wp-image-13204" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/05/minimal-300x192.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/05/minimal.png 599w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The explanatory text preceding the list of actions will be available in all products based on SLE15, but will not be there for Leap 15.0, since the modification to the installer was not ready on time for the deadline and, moreover, would have been impossible to get the translations on time.</p>
<p>By the way, if you are interested in a more in-depth explanation on how the partitioning proposal adapts to all kind of situations like small disks and other scenarios, don&#8217;t hesitate to check Iván&#8217;s presentation at openSUSE Conference 2018 detailing its internals.</p>
<p><iframe width="500" height="281" src="https://www.youtube.com/embed/_0VKUjFAIwo?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></p>
<h3>More parameter passing for s390</h3>
<p>And talking about uncommon scenarios and the s390 architecture, you may remember that in the latest sprint we improved the handling of the persistent network device names kernel parameter for such systems. Shortly after, we found out a similar improvement was needed also for the FIPS parameter.</p>
<p>FIPS is a military encryption standard in USA. If the installation is started using the corresponding parameter, YaST will enforce strong encryption and will install an specific FIPS pattern. Moreover, after the recent fix, a system installed in hardened mode s390 will continue operating in this mode after the installation.</p>
<h3>Fun with MD RAIDs</h3>
<p>As SLE15 comes closer, future users start testing the system with more exotic and complex hardware setups. Same applies to openSUSE Leap 15.0 right after the official release. As a result of all that testing, we found several scenarios in which Storage-ng got confused about MD RAIDs defined by some specific hardware or manually by the user before starting the installation.</p>
<p>By default, the old storage didn&#8217;t handle partitions within software RAIDs and it didn&#8217;t handle software RAIDs directly on top of full disks (with no partitions in the physical disks). For the first version of Storage-ng present in Leap 15.0 and SLE15, we tried to implement the same behavior with the intention to rethink the whole thing and open new possibilities in the close future. Check more about the present and future of Storage-ng in Ancor&#8217;s talk at openSUSE Conference 2018.</p>
<p><iframe width="500" height="281" src="https://www.youtube.com/embed/etsT3xP52Zs?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></p>
<p>Unfortunately, while trying to replicate the old storage behavior with software-defined MD RAIDs, we overlooked some heuristic that was hidden in the old implementation to recognize some special setups in which a given RAID device currently detected as regular software-defined RAIDs should be treated like hardware RAIDs. That&#8217;s the case of Software RAID Virtual Disks defined on a S130/S140 controller on DellEMC PowerEdge Servers through the BIOS Interface. We also found that some users used to produce a similar situation by manually creating software MD RAIDs and creating partitions within them before starting the installation.</p>
<p>With the preparation of SLE15 already in the final stages and with openSUSE Leap 15 already out, it was too late to introduce drastic changes in how MD RAIDs are detected and used.  To mitigate the problem while limiting the potential breakage, we reintroduced an ancient installer parameter. Now, when we run the installer using <code>LIBSTORAGE_MDPART=1</code>, all existing software-defined RAIDs will be considered as BIOS RAIDs.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/05/raid.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/05/raid-300x225.png" alt="Using LIBSTORAGE_MDPART" width="300" height="225" class="aligncenter size-medium wp-image-13211" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/05/raid-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/05/raid-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/05/raid.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The new parameter is not available in Leap 15.0 (we added it too late) and will hopefully not be necessary anymore in future versions of SLE and openSUSE, since the short term plan is to redesign everything about how MD RAIDs are handled during installation.</p>
<h3>And even more fun with MD RAIDs</h3>
<p>Another example of RAID that looks like defined by software but is indeed assembled by BIOS is the Intel RSTe technology. In this case, the usage of <code>LIBSTORAGE_MDPART</code> is not needed, but still we found the bootloader installation to be broken because YaST was once again getting confused by the mixed RAID setup.</p>
<p>Fortunately it was possible to fix the issue and verify the solution in only two days, despite the YaST Team not having direct access to the hardware, thanks to the outstanding help of the user reporting the bug. Connecting users and developers directly always produces great results&#8230; and that&#8217;s one of the reasons open source rocks so much!</p>
<h3>Improved error reporting for wrong bootloader in AutoYaST</h3>
<p>That was not the only improvement in the bootloader handling done during this sprint. We also invested some time improving the user experience in AutoYAST, since the error message displayed when using an EFI variant not supported in the system architecture was far from being useful or even informative.</p>
<p>So alongside a more clear message, AutoYaST will now list all the possible values supported on the given architecture to better guide the user.</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2018/05/bootloader.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/05/bootloader-300x227.png" alt="More precise bootloader error in AutoYaST" width="300" height="227" class="aligncenter size-medium wp-image-13216" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/05/bootloader-300x227.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/05/bootloader-768x582.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/05/bootloader-1024x776.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/05/bootloader.png 1025w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3>Setting the default subvolume name in AutoYaST</h3>
<p>AutoYaST also received improvements in other areas, like making use of the new possibilities offered by Storage-ng. The new storage layer allows the user to set different default subvolumes (or none at all) for every Btrfs file system. As shown in the example below, a prefix name can be specified for each partition using the <code>subvolumes_prefix</code>.</p>
<pre>
&lt;partition&gt;
  &lt;mount&gt;/&lt;/mount&gt;
  &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
  &lt;size&gt;max&lt;/size&gt;
  &lt;subvolumes_prefix&gt;@&lt;/subvolumes_prefix&gt;
&lt;/partition&gt;
</pre>
<p>To omit the subvolume prefix, set the <code>subvolumes_prefix</code> tag:</p>
<pre>
&lt;partition&gt;
  &lt;mount&gt;/&lt;/mount&gt;
  &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
  &lt;size&gt;max&lt;/size&gt;
  &lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;
&lt;/partition&gt;
</pre>
<p>As a consequence of the new behaviour, the old <code>btrfs_set_default_subvolume_name</code> tag is not needed and, therefore, it is not supported in Leap 15.0 and SLE15.</p>
<h3>Skipping Btrfs subvolume creation</h3>
<p>And more changes in AutoYaST that arrived just in time for SLE15 and openSUSE Leap 15.0. Recently, we have introduced a new flag in AutoYaST partition sections to skip the creation of Btrfs subvolumes because, due to a known limitation of our XML parser, it is not possible to specify an empty list.</p>
<p>So from now on, setting <code>create_subvolumes</code> to <code>false</code> will prevent AutoYaST from creating any Btrfs subvolumes in a given partition.</p>
<pre>
&lt;partition&gt;
  &lt;mount&gt;/&lt;/mount&gt;
  &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
  &lt;size&gt;max&lt;/size&gt;
  &lt;create_subvolumes config:type="boolean"&gt;false&lt;/create_subvolumes&gt;
&lt;/partition&gt;
</pre>
<h3>Keep it rolling!</h3>
<p>As usual, the content of this post is just a small part of everything we did during the sprint. There were also many other fixes and improvements, from auto-repairing wrong partition tables (with different sizes than the underlying disk) during installation to better interaction with other components like udisk or mdadm auto-assembling and many other things in between.</p>
<p>But it&#8217;s time to go back to work and start implementing all the new ideas that emerged from the YaST Team Workshop and the openSUSE Conference. See you in the next report!</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
