<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>partitioner &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/tag/partitioner/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>

	<item>
		<title>Highlights of YaST Development Sprint 92</title>
		<link>https://lizards.opensuse.org/2020/01/24/highlights-of-yast-development-sprint-92/</link>
		<pubDate>Fri, 24 Jan 2020 15:35:49 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[YaST]]></category>
		<category><![CDATA[faster]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[nfs]]></category>
		<category><![CDATA[partitioner]]></category>
		<category><![CDATA[progress]]></category>
		<category><![CDATA[retracted]]></category>
		<category><![CDATA[table]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14289</guid>
		<description><![CDATA[Partitioner: An Actionable Overview Screen Not only Partitioner: Numeric Sorting in Tables Improving the NFS Module Package Installation: Installation Progress Improvements Doomsday Preparations: Retracted Packages Qt Package Selection Gets Faster An Actionable Partitioner Overview Screen Until now, the Partitioner landing screen has been useful to have a big picture of the devices in your system [&#8230;]]]></description>
				<content:encoded><![CDATA[<ul>
<li><a href="#an-actionable-partitioner-overview-screen">Partitioner: An Actionable Overview Screen</a></li>
<li><a href="#numeric-sorting-in-tables">Not only Partitioner: Numeric Sorting in Tables</a></li>
<li><a href="#improving-the-nfs-module">Improving the NFS Module</a></li>
<li>Package Installation:
<ul>
<li><a href="#installation-progress-improvements">Installation Progress Improvements</a></li>
<li><a href="#doomsday-preparations-retracted-packages">Doomsday Preparations: Retracted Packages</a></li>
<li><a href="#qt-package-selection-gets-faster">Qt Package Selection Gets Faster</a></li>
</ul>
</li>
</ul>
<h3 id="an-actionable-partitioner-overview-screen">An Actionable Partitioner Overview Screen</h3>
<p>Until now, the Partitioner landing screen has been useful to have a big picture of the devices in your system and as a shortcut to jump directly to the device page just with a double click over it. But, do you know what? From yast-storage-ng 4.2.74 on you can work directly with devices from that screen similar as you already do in the more specific pages, through the contextual actions added below the devices list. That means, for example, no more jumps to Hard Disks just to add a new partition nor resize an existing one. Enjoy <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14290" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>More details: <a href="https://github.com/yast/yast-storage-ng/pull/1024">PR 1024</a></p>
<h3 id="numeric-sorting-in-tables">Numeric Sorting in Tables</h3>
<p>We have improved the sorting for tables in <a href="https://github.com/libyui">libyui</a>, the UI library of YaST. So far columns were sorted directly by the text displayed, e.g. the device name or the size in the expert partitioner. For some use-cases this resulted in unexpected ordering, e.g. partitions of a disk were ordered “/dev/sda1”, “/dev/sda10”, “/dev/sda2”, and sizes were ordered “1 GiB”, “2 TiB” and “4 GiB”.</p>
<p>Now it is possible to <a href="https://github.com/yast/yast-ycp-ui-bindings/blob/master/examples/Table-sort-key.rb">provide a sort-key for every table entry</a> which is then used instead of the displayed text. This allows the expected ordering and is already implemented for the tables in the expert partitioner as the two pictures below show.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1-300x228.png" alt="" width="300" height="228" class="aligncenter size-medium wp-image-14291" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1-300x228.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1.png 733w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2-300x240.png" alt="" width="300" height="240" class="aligncenter size-medium wp-image-14292" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2-300x240.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2.png 765w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<h3 id="improving-the-nfs-module">Improving the NFS Module</h3>
<p>YaST offers a specific module to configure your <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a> shares. Similar to every YaST module, you can run it by executing <code>yast2 nfs</code> in your terminal, or by launching it from the YaST Control Center. But there is another cool way to use the YaST NFS module: opening the Expert Partitioner!</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs-300x201.png" alt="" width="300" height="201" class="aligncenter size-medium wp-image-14293" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs-300x201.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs.png 715w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>The Expert Partitioner offers a NFS section on the left menu tree where you can do everything that the NFS module provides. Thanks to that, you can configure your NFS shares at the same time you format your partitions!</p>
<p>But that integration needed some improvements after we migrated YaST to the new Storage Stack (a.k.a. storage-ng). Moreover, some bugs were detected when using the NFS module for mounting and unmounting shares, see for example <a href="https://bugzilla.suse.com/show_bug.cgi?id=1006815">bsc#1006815</a> and <a href="https://bugzilla.suse.com/show_bug.cgi?id=1151426">bsc#1151426</a>.</p>
<p>All those bugs were fixed, ww the NFS module behaves as expected in both cases, when running in standalone mode and inside the Expert Partitioner. Note that now the current status of the existing shares is preserved. That is, an unmounted share will continue unmounted after editing it. Unmounted entries are indicated with an asterisk in the list of shares, similar to what the Expert Partitioner does for the rest of unmounted devices. All these improvements will be available for SUSE Linux Enterprise SP1, openSUSE Leap 15.1 and openSUSE Tumbleweed.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2-300x210.png" alt="" width="300" height="210" class="aligncenter size-medium wp-image-14294" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2-300x210.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2.png 530w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<h3 id="installation-progress-improvements">Installation Progress Improvements</h3>
<p>We got some bug reports about how installation progress reporting works and while we were touching it, we also added a few smaller improvements to the code.</p>
<p>The first change is that nowadays installing from multiple discs almost never happens but still there was always a “<strong>Medium 1</strong>” column which did not make much sense. So we removed the column and if there is a multi-media source, it will be appended to the name if needed.</p>
<p>The second visible change is a new Unicode character ⌛ (<strong>hourglass</strong>) during the initial phase of RPM installation until the remaining time can be estimated.</p>
<p>The third change is that now the maximum time is always capped at 2 hours, so even if there are multiple sources and some of them took more then two hours, it always show just “<strong>&gt;2:00:00</strong>” and even in total it is capped, so it can no longer show something like “&gt;6:00:00”.</p>
<p>The fourth one is that now you can read the <strong>release notes</strong> without disturbances. Previously you would get switched to the package log tab after each package finished its installation. Now it will redraw only when you go back from the release notes screen.</p>
<p>The fifth one is a fix for showing the <strong>remaining packages</strong>, where it is shown only for the active source and not for all. So now it shows remaining packages for all repositories.</p>
<p>And last but not least we do a bunch of refactoring, code quality improvements and also adding automatic unit tests to reduce regressions in the future.</p>
<p>Tumbleweed before and now:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14295" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a> </p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14296" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-768x577.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-1024x769.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2.png 1025w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>SLE before and now:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14297" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14298" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-1024x768.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4.png 1026w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>and new ncurses: <a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14299" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-1024x768.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5.png 1026w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="doomsday-preparations-retracted-packages">Doomsday Preparations: Retracted Packages</h3>
<p>If a maintenance update is released for any of our supported products, it may happen that after its release we realize that it introduces new problems, so we have to unpublish (retract) it.</p>
<p>So far, our maintenance team always managed to find other solutions, but sooner or later it will happen that it takes too long to realize that an update was broken, so users will install it.</p>
<p>For that purpose we introduced a new status <em>retracted</em> for patches and packages. We hope that we will never need it, but if we do, we need it in a hurry — until a better, fixed version of those packages is released.</p>
<p>We added new filters “Retracted Packages” and “Retracted Installed Packages” to the package selection, and the affected versions are colored in red and get a <strong>[RETRACTED]</strong> marker in the “Versions” tab:</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-300x171.png" alt="" width="300" height="171" class="aligncenter size-medium wp-image-14300" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-300x171.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-768x437.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-1024x583.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr.png 1087w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>Those lists should always be empty. Also, retracted versions will never automatically be installed. If package versions are retracted, but are already installed, the “Retracted Installed Packages” view will be opened automatically when starting the package selection to make you aware of them. Then you can choose to manually downgrade to a previous version or to wait until a fixed version is available.</p>
<p>In general, don’t worry: We never needed this so far, and we hope that we will never need it. Still, we take precautions for the worst case.</p>
<p>More details: <a href="https://github.com/libyui/libyui-qt-pkg/pull/82">PR 82</a></p>
<h3 id="qt-package-selection-gets-faster">Qt Package Selection Gets Faster</h3>
<p>This came as a byproduct of the previous item: While working on the new filter views for retracted packages, we found that it could take a long time (10-20 seconds) when switching away from the “All Packages” view, so we started digging deeper to find out why.</p>
<p>We found it strange that <em>clearing</em> the package list on the right side of that dialog was so slow; considerably slower than <em>filling</em> it with all packages. After some investigations, we found that in the course of all those changes for all those Qt versions (since Qt 3.x in mid-2006) some internal housekeeping for those list items was now no longer necessary because later Qt versions took over more and more of those responsibilities, and our own housekeeping now got in the way of that and was considerably slowing it down.</p>
<p>Once we found the cause, the fix was easy: We threw out our own housekeeping code and are now relying on what the Qt widget does, and hey presto, clearing that list now happens instantly instead of taking 10-20 seconds.</p>
<p>More details: <a href="https://github.com/libyui/libyui-qt-pkg/pull/82">PR 82 (“Other Fixes”)</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprints 88 and 89</title>
		<link>https://lizards.opensuse.org/2019/11/22/highlights-of-yast-development-sprints-88-and-89/</link>
		<pubDate>Fri, 22 Nov 2019 14:13:35 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[YaST]]></category>
		<category><![CDATA[autoyast]]></category>
		<category><![CDATA[CSV]]></category>
		<category><![CDATA[encryption]]></category>
		<category><![CDATA[GUI]]></category>
		<category><![CDATA[JSON]]></category>
		<category><![CDATA[partitioner]]></category>
		<category><![CDATA[roles]]></category>
		<category><![CDATA[snapper]]></category>
		<category><![CDATA[storage]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14176</guid>
		<description><![CDATA[The System Role selection dialog got usability improvements and we added a CustomStatusItemSelector to the widget library in the process. Snapper gained machine-readable output Storage: remote encrypted devices are activated properly at boot time random and pervasive encryption also supported in AutoYaST improved support for AutoYaST Guided Partitioning A More User Friendly Role Selector Dialog [&#8230;]]]></description>
				<content:encoded><![CDATA[<ul>
<li>The <a href="#roles">System Role</a> selection dialog got usability improvements
<ul>
<li>and we added a <a href="#widget">CustomStatusItemSelector</a> to the widget library in the process.</li>
</ul>
</li>
<li>Snapper gained <a href="#snapper">machine-readable output</a></li>
<li>Storage:
<ul>
<li><a href="#netdev">remote encrypted devices</a> are activated properly at boot time</li>
<li><a href="#encryption">random and pervasive encryption</a> also supported in AutoYaST</li>
<li>improved support for <a href="#guided">AutoYaST Guided Partitioning</a></li>
</ul>
</li>
</ul>
<h3 id="a-more-user-friendly-role-selector-dialog">A More User Friendly Role Selector Dialog</h3>
<p><a name="roles"></a> Step by step, we continue improving the user experience making use of the newly added widgets to libyui. This sprint was the turn to update the role selection dialog to use the <a href="https://lizards.opensuse.org/2019/10/23/yast-sprint-87/">new item selector introduced during the sprint 87</a>. Apart from looking better as it can be seen in the screenshots below, there are two immediate improvements:</p>
<ul>
<li>the vertical scroll, when present, is respected after selecting a role (instead of “jumping to the beginning”), and</li>
<li>the selected role (if any) will be visible when arriving at the dialog even when the list is quite long or the available space too short.</li>
</ul>
<table>
<tr>
<td>Before</td>
<td>After</td>
</tr>
<tr>
<td><a href="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles1-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14194" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles1-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles1-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles1.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
<td><a href="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles2-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14195" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles2-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles2-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-roles2.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></td>
</tr>
</table>
<p>What is more, updating the dialog was also useful for us to realize about some needed improvements for the widget itself, mentioned in the next section. Quite a productive <a href="https://github.com/yast/yast-installation/pull/827">change</a> <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<h3 id="when-one-bit-is-not-enough-the-customstatusitemselector">When one Bit is not Enough: The CustomStatusItemSelector</h3>
<p><a name="widget"></a> A few weeks ago, we wrote about the new <em>ItemSelector</em> widget that is finding its way into YaST user interfaces. It turned out that just a simple on/off status is not enough in some cases, so we had to extend that concept. For example, software modules may have dependencies, and we want to show the difference between one that was explicitly selected by the user and one that was auto-selected because some other software module requires it.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-qt.png"><img class="aligncenter size-medium wp-image-14181" src="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-qt-236x300.png" alt="" width="236" height="300" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-qt-236x300.png 236w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-qt.png 520w" sizes="(max-width: 236px) 100vw, 236px" /></a></figure>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-curses.png"><img class="aligncenter size-medium wp-image-14180" src="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-curses-300x215.png" alt="" width="300" height="215" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-curses-300x215.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-curses-768x549.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-selector-curses.png 966w" sizes="(max-width: 300px) 100vw, 300px" /></a></figure>
<p>This kind of shook the foundations of the underlying classes; all of a sudden a bit is no longer just a bit, but it needs to be broken down into even smaller pieces. Well, we cheated; we now use integer values instead. Most of the class hierarchy still only uses 0 and 1, but the new <em>YCustomStatusItemSelector</em> also supports using higher numbers for application-defined purposes.</p>
<p>For each possible status value, the application defines the name of the icon to be displayed (for graphical UIs like the Qt UI), the text equivalent (for text mode / the NCurses UI), and an optional <em>nextStatus</em> which tells the widget what status to cycle to when the user changes the status of an item with a mouse click or with the keyboard. A value of -1 lets the application handle this.</p>
<p>So this is not a one-trick-pony that is useful only for that one use case (the software modules), but a generic tool that might find good uses in other places all over YaST as well.</p>
<p>Usage examples: <a href="https://github.com/libyui/libyui/blob/master/examples/CustomStatusItemSelector1.cc">C++</a>, <a href="https://github.com/yast/yast-ycp-ui-bindings/blob/master/examples/CustomStatusItemSelector1.rb">Ruby</a>.</p>
<h3 id="snapper-and-machine-readable-output">Snapper and Machine-readable Output</h3>
<p><a name="snapper"></a> Most likely you already know <a href="http://snapper.io/"><em>snapper</em></a>, a great tool to work with your filesystem snapshots. Some third-party scripts and tools (e.g., YaST) use the <em>snapper</em> <abbr title="command line interface">CLI</abbr> to get some information, but generally, <em>snapper</em> generates an output intended to be human-readable. Sometimes that could cause some troubles in scripts checking the <em>snapper</em> output. Now on, <em>snapper</em> also offers CLI options to generate its output in a machine-readable format, i.e., CSV and JSON. Please, check <a href="http://snapper.io/2019/11/06/machine-readable-output.html">this post</a> for more information about those new options.</p>
<h3 id="fix-boot-problems-with-remote-encrypted-devices">Fix Boot Problems with Remote Encrypted Devices</h3>
<p><a name="netdev"></a> Since we adopted systemd, the management during system boot of encrypted devices on top of network-based devices like <a href="https://en.wikipedia.org/wiki/ISCSI">iSCSI</a> or <a href="https://en.wikipedia.org/wiki/Fibre_Channel_over_Ethernet">FCoE</a> disks has been less than optimal. But now we are happy to announce that we have put all the pieces together to make the experience as smooth as possible.</p>
<p>One of the main responsibilities of systemd is sorting the actions performed during boot and setting the dependencies between them. For example, if there are encrypted devices, systemd will first ask you for the password and activate the devices to afterwards mount the file system contained in those encrypted devices. Systemd should be able to distinguish when an encrypted device is based on a network-based storage device and, thus, can only be initialized after the network is up. In some cases that detection failed (for example network block device based mounts, such as iSCSI and FCoE disks) and systemd got stuck before initializing the network waiting for the device to be available.</p>
<p>Recently, SLE and openSUSE Leap has incorporated support for specifying the <a href="https://www.freedesktop.org/software/systemd/man/crypttab.html#_netdev"><code>_netdev</code> option in the <code>/etc/crypttab</code> file</a>. With such option, systemd will recognize the encrypted device as network-based and will only try to activate it after setting up the network. That’s analogous to the corresponding <code>_netdev</code> option in <code>/etc/fstab</code> that has been already there for quite some time and that can be used to defer when a device is mounted. For it to work properly, the <code>_netdev</code> option must be present in all the relevant entries of both <code>crypttab</code> and <code>fstab</code>.</p>
<p>And that’s exactly what YaST will do now in openSUSE Tumbleweed and upcoming releases of both SLE and openSUSE Leap. From now on, the <code>_netdev</code> option will be added <code>fstab</code> for all mount points depending (directly or indirectly) on the network. In addition, that option (and also the <code>noauto</code> and <code>nofail</code> ones) will be propagated from <code>fstab</code> to all the corresponding <code>crypttab</code> entries.</p>
<p>This should mark the end of a dark age of encrypted iSCSI and FCoE devices timing out during boot.</p>
<h3 id="autoyast-support-for-random-and-pervasive-encryption">AutoYaST Support for Random and Pervasive Encryption</h3>
<p><a name="encryption"></a> Back in October, we announced that <a href="https://lizards.opensuse.org/2019/10/09/advanced-encryption-yast/">YaST got support for new encryption methods</a> like random or pervasive encryption. At that time, AutoYaST was out of scope because we wanted to have a stable (and tested) API first. Fortunately, the time has come and now AutoYaST supports these encryption mechanisms.</p>
<p>Starting in autoyast2 4.2.17, you can specify the encryption method using a <code>crypt_method</code> element, as shown in the example below. Possible values are <code>luks1</code> (regular LUKS1 encryption), <code>pervasive_luks2</code> (pervasive volume encryption), <code>protected_swap</code> (encryption with volatile protected key), <code>secure_swap</code> (encryption with volatile secure key) and <code>random_swap</code> (encryption with volatile random key).</p>
<div id="cb1" class="sourceCode">
<pre class="sourceCode xml"><code class="sourceCode xml"><a id="cb1-1" class="sourceLine" title="1"></a>    <span class="kw">&lt;drive&gt;</span>
<a id="cb1-2" class="sourceLine" title="2"></a>     <span class="kw">&lt;type</span><span class="ot"> config:type=</span><span class="st">"symbol"</span><span class="kw">&gt;</span>CT_DISK<span class="kw">&lt;/type&gt;</span>
<a id="cb1-3" class="sourceLine" title="3"></a>     <span class="kw">&lt;use&gt;</span>all<span class="kw">&lt;/use&gt;</span>
<a id="cb1-4" class="sourceLine" title="4"></a>     <span class="kw">&lt;partitions</span><span class="ot"> config:type=</span><span class="st">"list"</span><span class="kw">&gt;</span>
<a id="cb1-5" class="sourceLine" title="5"></a>      <span class="kw">&lt;partition&gt;</span>
<a id="cb1-6" class="sourceLine" title="6"></a>       <span class="kw">&lt;size&gt;</span>20G<span class="kw">&lt;/size&gt;</span>
<a id="cb1-7" class="sourceLine" title="7"></a>       <span class="kw">&lt;mount&gt;</span>/<span class="kw">&lt;/mount&gt;</span>
<a id="cb1-8" class="sourceLine" title="8"></a>       <span class="kw">&lt;filesystem</span><span class="ot"> config:type=</span><span class="st">"symbol"</span><span class="kw">&gt;</span>ext4<span class="kw">&lt;/filesystem&gt;</span>
<a id="cb1-9" class="sourceLine" title="9"></a>       <span class="kw">&lt;crypt_method</span><span class="ot"> config:type=</span><span class="st">"symbol"</span><span class="kw">&gt;</span>luks1<span class="kw">&lt;/crypt_method&gt;</span> <span class="co">&lt;!-- default method if crypt_key is defined --&gt;</span>
<a id="cb1-10" class="sourceLine" title="10"></a>       <span class="kw">&lt;crypt_key&gt;</span>S3CR3T<span class="kw">&lt;/crypt_key&gt;</span>
<a id="cb1-11" class="sourceLine" title="11"></a>      <span class="kw">&lt;/partition&gt;</span>
<a id="cb1-12" class="sourceLine" title="12"></a>      <span class="kw">&lt;partition&gt;</span>
<a id="cb1-13" class="sourceLine" title="13"></a>       <span class="kw">&lt;size&gt;</span>1G<span class="kw">&lt;/size&gt;</span>
<a id="cb1-14" class="sourceLine" title="14"></a>       <span class="kw">&lt;mount&gt;</span>swap<span class="kw">&lt;/mount&gt;</span>
<a id="cb1-15" class="sourceLine" title="15"></a>       <span class="kw">&lt;crypt_method</span><span class="ot"> config:type=</span><span class="st">"symbol"</span><span class="kw">&gt;</span>random_swap<span class="kw">&lt;/crypt_method&gt;</span> <span class="co">&lt;!-- set encryption method --&gt;</span>
<a id="cb1-16" class="sourceLine" title="16"></a>      <span class="kw">&lt;/partition&gt;</span>
<a id="cb1-17" class="sourceLine" title="17"></a>     <span class="kw">&lt;/partitions&gt;</span>
<a id="cb1-18" class="sourceLine" title="18"></a>    <span class="kw">&lt;/drive&gt;</span></code></pre>
</div>
<p>As we want AutoYaST to be as user-friendly as possible, it will try to help you if you do some mistake setting the encryption configuration as when in the screenshot below.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-ay-encryption.png"><img class="aligncenter size-medium wp-image-14179" src="//lizards.opensuse.org/wp-content/uploads/2019/11/s89-ay-encryption-300x225.png" alt="" width="300" height="225" srcset="https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-ay-encryption-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-ay-encryption-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2019/11/s89-ay-encryption.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></figure>
<p>Finally, the old <code>crypt_fs</code> element is deprecated, although it stills works for backward-compatibility reasons. Basically, it is equivalent to setting <code>crypt_method</code> to <code>luks1</code>.</p>
<h3 id="improve-support-for-autoyast-guided-partitioning">Improve Support for AutoYaST Guided Partitioning</h3>
<p><a name="guided"></a> When it comes to partitioning, we can categorize AutoYaST use cases into three different levels:</p>
<ul>
<li>Automatic partitioning: the user does not care about the partitioning and trusts in AutoYaST to do the right thing.</li>
<li>Guided partitioning: the user would like to set some basic settings (use LVM, set an encryption password, etc.)</li>
<li>Expert partitioning: the user specifies how the layout should look, although a complete definition is not required.</li>
</ul>
<p>To some extent, it is like using the regular installer where you can skip the partitioning screen and trust in YaST, use the Guided Proposal, or define the partitioning layout through the Expert Partitioner.</p>
<p>The second level (Guided partitioning) was introduced in AutoYaST with the release of SUSE Linux Enteprise 15 (and Leap 15.0) but it was not documented at all. Additionally, although it was working as designed at first sight, it was far from being that useful.</p>
<p>This sprint with invested quite some time improving the documentation (kudos to our awesome documentation team) and the behaviour. Now, if you want to set up an LVM system without having the specify all the details, you can use the following snippet in your profile:</p>
<div id="cb2" class="sourceCode">
<pre class="sourceCode xml"><code class="sourceCode xml"><a id="cb2-1" class="sourceLine" title="1"></a><span class="kw">&lt;general&gt;</span>
<a id="cb2-2" class="sourceLine" title="2"></a>  <span class="kw">&lt;storage&gt;</span>
<a id="cb2-3" class="sourceLine" title="3"></a>    <span class="kw">&lt;lvm</span><span class="ot"> config:type=</span><span class="st">"boolean"</span><span class="kw">&gt;</span>true<span class="kw">&lt;/lvm&gt;</span>
<a id="cb2-4" class="sourceLine" title="4"></a>  <span class="kw">&lt;/storage&gt;</span>
<a id="cb2-5" class="sourceLine" title="5"></a><span class="kw">&lt;/general&gt;</span></code></pre>
</div>
<p>If you are interested in the available options, you can check the <a href="https://susedoc.github.io/doc-sle/master/SLES-autoyast/html/configuration.html#CreateProfile-Partitioning">documentation draft</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprint 68</title>
		<link>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/</link>
		<comments>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/#comments</comments>
		<pubDate>Tue, 04 Dec 2018 14:32:45 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[YaST]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[partitioner]]></category>
		<category><![CDATA[Raspberry Pi]]></category>
		<category><![CDATA[udf]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13513</guid>
		<description><![CDATA[UDF: Share big files with other operating systems Raspberry Pi: Fully customized installation with YaST Support for UDF file system UDF (Universal Disk Format) is a file system format widely used for DVDs and newer optical disk formats, replacing ISO 9660. But this technology is not limited to optical media only, in fact it can [&#8230;]]]></description>
				<content:encoded><![CDATA[<ul>
<li>UDF: Share big files with other operating systems</li>
<li>Raspberry Pi: Fully customized installation with YaST</li>
</ul>
<h3 id="support-for-udf-file-system">Support for UDF file system</h3>
<p>UDF (<a href="https://en.wikipedia.org/wiki/Universal_Disk_Format">Universal Disk Format</a>) is a file system format widely used for DVDs and newer optical disk formats, replacing ISO 9660. But this technology is not limited to optical media only, in fact it can be perfectly used on flash devices like USB sticks and hard drives too. UDF is one of the best choices when transferring data between platforms. Mostly all modern operating system already support it, including Windows, BSD, MacOS X, Solaris, OS/2 (eComStation), BeOS (Haiku) as well as Linux kernel.</p>
<p>UDF offers several advantages. One of them is the support for quite very large files. With UDF you can create files of several terabytes, making really ridiculous the maximum limitation of 4 gigabytes in VFAT. And not only that, UDF also has optional built-in ability to minimize wearing-off of rewritable media with limited rewrite cycles, such as flash, CD-RW and DVD-RAM.</p>
<p>YaST is starting to support UDF file systems out of the box. The Expert Partitioner now offers the UDF option when formatting a device, see the following screenshot. And this is available even during the installation, so you could create a volume with UDF format and share it between your different operating systems.</p>
<div class="figure">
<a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-300x218.png" alt="" width="300" height="218" class="aligncenter size-medium wp-image-13516" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-300x218.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-768x558.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-1024x743.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6.png 1044w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<h3 id="just-click-next-to-install-opensuse-in-a-raspberry-pi">Just click &quot;next&quot; to install (open)SUSE in a Raspberry Pi</h3>
<p>Anybody who has not been living under a rock for the last five years knows <a href="https://www.raspberrypi.org/">Raspberry Pi</a>. And anyone who has used one of those devices knows the usual way to put an operating system into it is different from what we are used to do in other computers. Instead of installing from a regular ISO, customizing all the options in the process, Raspberry Pi and similar mini-computers are usually loaded with a pre-built image of an operating system (specific for each model) downloaded from the Internet. Many of those precooked Linux systems are purpose-specific and many decisions (like the file-system type to use) are already taken by those who built the image.</p>
<p>But we wanted SLE 15-SP1 and openSUSE Leap 15.1 to be the first multi-purpose operating systems to support a full standard Linux experience in Raspberry Pi. No custom specific ISO to install from, no precooked image to be copied, just taking the standard unmodified SLE or openSUSE ISO image and installing like you would do in any other computer. And we wanted the process to be as easy as pressing &quot;next&quot;, &quot;next&quot;, &quot;next&quot;, &quot;install&quot;. With the installer detecting and proposing the set of default configurations that makes sense, as usual.</p>
<p>The main challenge in that regard was the partitioning layout. In order to boot, the Raspberry Pi needs a very specific partition containing the system firmware. So it is important for the installer to detect such a partition and preserve it no matter what, mounting it in <code>/boot/vc</code> to allow the operating system to perform updates of the firmware. In the following screenshot of the installation process performed trough the Raspberry Pi serial console you can see that in action.</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-300x198.png" alt="" width="300" height="198" class="aligncenter size-medium wp-image-13515" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-300x198.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-768x507.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<p>The serial console is the method preferred by the experts to manage the Raspberry Pi locally and it works out of the box with the pre-releases of the upcoming SLE-15-SP1 and Leap 15.1. But less advanced users will likely prefer to perform a graphical installation with a keyboard and a screen attached to the device. For it to work flawlessly, the following arguments must be provided to the installer during boot.</p>
<pre><code>textmode=0 modprobe.blacklist=vc4</code></pre>
<p>The second argument prevents the HDMI output to be disconnected shortly after the computer has booted, something that will only happen with some monitors. It happened to us during our testing (that you can see below) and that argument certainly made the problem disappear.</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-208x300.jpg" alt="" width="208" height="300" class="aligncenter size-medium wp-image-13517" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-208x300.jpg 208w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-711x1024.jpg 711w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2.jpg 720w" sizes="(max-width: 208px) 100vw, 208px" /></a>
</div>
<p>Just one final note if you want to play with this: Take into account Raspberry Pi uses a different internal architecture than usual PCs. So instead of the x86 image of the installer, you will need to use the aarch64 one. The aarch64 architecture is officially fully supported by SLE and also available for openSUSE Leap and Tumbleweed as an unofficial port.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
	</channel>
</rss>
