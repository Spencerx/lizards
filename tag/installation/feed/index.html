<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>installation &#8211; openSUSE Lizards</title>
	<atom:link href="https://lizards.opensuse.org/tag/installation/feed/" rel="self" type="application/rss+xml" />
	<link>https://lizards.opensuse.org</link>
	<description>Blogs and Ramblings of the openSUSE Members</description>
	<lastBuildDate>Fri, 06 Mar 2020 11:29:40 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.7.5</generator>
	<item>
		<title>Highlights of YaST Development Sprint 92</title>
		<link>https://lizards.opensuse.org/2020/01/24/highlights-of-yast-development-sprint-92/</link>
		<pubDate>Fri, 24 Jan 2020 15:35:49 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[Systems Management]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[YaST]]></category>
		<category><![CDATA[faster]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[nfs]]></category>
		<category><![CDATA[partitioner]]></category>
		<category><![CDATA[progress]]></category>
		<category><![CDATA[retracted]]></category>
		<category><![CDATA[table]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=14289</guid>
		<description><![CDATA[Partitioner: An Actionable Overview Screen Not only Partitioner: Numeric Sorting in Tables Improving the NFS Module Package Installation: Installation Progress Improvements Doomsday Preparations: Retracted Packages Qt Package Selection Gets Faster An Actionable Partitioner Overview Screen Until now, the Partitioner landing screen has been useful to have a big picture of the devices in your system [&#8230;]]]></description>
				<content:encoded><![CDATA[<ul>
<li><a href="#an-actionable-partitioner-overview-screen">Partitioner: An Actionable Overview Screen</a></li>
<li><a href="#numeric-sorting-in-tables">Not only Partitioner: Numeric Sorting in Tables</a></li>
<li><a href="#improving-the-nfs-module">Improving the NFS Module</a></li>
<li>Package Installation:
<ul>
<li><a href="#installation-progress-improvements">Installation Progress Improvements</a></li>
<li><a href="#doomsday-preparations-retracted-packages">Doomsday Preparations: Retracted Packages</a></li>
<li><a href="#qt-package-selection-gets-faster">Qt Package Selection Gets Faster</a></li>
</ul>
</li>
</ul>
<h3 id="an-actionable-partitioner-overview-screen">An Actionable Partitioner Overview Screen</h3>
<p>Until now, the Partitioner landing screen has been useful to have a big picture of the devices in your system and as a shortcut to jump directly to the device page just with a double click over it. But, do you know what? From yast-storage-ng 4.2.74 on you can work directly with devices from that screen similar as you already do in the more specific pages, through the contextual actions added below the devices list. That means, for example, no more jumps to Hard Disks just to add a new partition nor resize an existing one. Enjoy <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f609.png" alt="&#x1f609;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14290" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-01-part.png 800w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>More details: <a href="https://github.com/yast/yast-storage-ng/pull/1024">PR 1024</a></p>
<h3 id="numeric-sorting-in-tables">Numeric Sorting in Tables</h3>
<p>We have improved the sorting for tables in <a href="https://github.com/libyui">libyui</a>, the UI library of YaST. So far columns were sorted directly by the text displayed, e.g. the device name or the size in the expert partitioner. For some use-cases this resulted in unexpected ordering, e.g. partitions of a disk were ordered “/dev/sda1”, “/dev/sda10”, “/dev/sda2”, and sizes were ordered “1 GiB”, “2 TiB” and “4 GiB”.</p>
<p>Now it is possible to <a href="https://github.com/yast/yast-ycp-ui-bindings/blob/master/examples/Table-sort-key.rb">provide a sort-key for every table entry</a> which is then used instead of the displayed text. This allows the expected ordering and is already implemented for the tables in the expert partitioner as the two pictures below show.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1-300x228.png" alt="" width="300" height="228" class="aligncenter size-medium wp-image-14291" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1-300x228.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-02-num1.png 733w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2-300x240.png" alt="" width="300" height="240" class="aligncenter size-medium wp-image-14292" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2-300x240.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-03-num2.png 765w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<h3 id="improving-the-nfs-module">Improving the NFS Module</h3>
<p>YaST offers a specific module to configure your <a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a> shares. Similar to every YaST module, you can run it by executing <code>yast2 nfs</code> in your terminal, or by launching it from the YaST Control Center. But there is another cool way to use the YaST NFS module: opening the Expert Partitioner!</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs-300x201.png" alt="" width="300" height="201" class="aligncenter size-medium wp-image-14293" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs-300x201.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-04-nfs.png 715w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>The Expert Partitioner offers a NFS section on the left menu tree where you can do everything that the NFS module provides. Thanks to that, you can configure your NFS shares at the same time you format your partitions!</p>
<p>But that integration needed some improvements after we migrated YaST to the new Storage Stack (a.k.a. storage-ng). Moreover, some bugs were detected when using the NFS module for mounting and unmounting shares, see for example <a href="https://bugzilla.suse.com/show_bug.cgi?id=1006815">bsc#1006815</a> and <a href="https://bugzilla.suse.com/show_bug.cgi?id=1151426">bsc#1151426</a>.</p>
<p>All those bugs were fixed, ww the NFS module behaves as expected in both cases, when running in standalone mode and inside the Expert Partitioner. Note that now the current status of the existing shares is preserved. That is, an unmounted share will continue unmounted after editing it. Unmounted entries are indicated with an asterisk in the list of shares, similar to what the Expert Partitioner does for the rest of unmounted devices. All these improvements will be available for SUSE Linux Enterprise SP1, openSUSE Leap 15.1 and openSUSE Tumbleweed.</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2-300x210.png" alt="" width="300" height="210" class="aligncenter size-medium wp-image-14294" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2-300x210.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-05-nfs2.png 530w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<h3 id="installation-progress-improvements">Installation Progress Improvements</h3>
<p>We got some bug reports about how installation progress reporting works and while we were touching it, we also added a few smaller improvements to the code.</p>
<p>The first change is that nowadays installing from multiple discs almost never happens but still there was always a “<strong>Medium 1</strong>” column which did not make much sense. So we removed the column and if there is a multi-media source, it will be appended to the name if needed.</p>
<p>The second visible change is a new Unicode character ⌛ (<strong>hourglass</strong>) during the initial phase of RPM installation until the remaining time can be estimated.</p>
<p>The third change is that now the maximum time is always capped at 2 hours, so even if there are multiple sources and some of them took more then two hours, it always show just “<strong>&gt;2:00:00</strong>” and even in total it is capped, so it can no longer show something like “&gt;6:00:00”.</p>
<p>The fourth one is that now you can read the <strong>release notes</strong> without disturbances. Previously you would get switched to the package log tab after each package finished its installation. Now it will redraw only when you go back from the release notes screen.</p>
<p>The fifth one is a fix for showing the <strong>remaining packages</strong>, where it is shown only for the active source and not for all. So now it shows remaining packages for all repositories.</p>
<p>And last but not least we do a bunch of refactoring, code quality improvements and also adding automatic unit tests to reduce regressions in the future.</p>
<p>Tumbleweed before and now:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14295" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-06-inst1.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a> </p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14296" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-768x577.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2-1024x769.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-07-inst2.png 1025w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>SLE before and now:</p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14297" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-08-inst3.png 1024w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14298" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4-1024x768.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-09-inst4.png 1026w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>and new ncurses: <a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-300x225.png" alt="" width="300" height="225" class="aligncenter size-medium wp-image-14299" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-300x225.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-768x576.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5-1024x768.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-10-inst5.png 1026w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<h3 id="doomsday-preparations-retracted-packages">Doomsday Preparations: Retracted Packages</h3>
<p>If a maintenance update is released for any of our supported products, it may happen that after its release we realize that it introduces new problems, so we have to unpublish (retract) it.</p>
<p>So far, our maintenance team always managed to find other solutions, but sooner or later it will happen that it takes too long to realize that an update was broken, so users will install it.</p>
<p>For that purpose we introduced a new status <em>retracted</em> for patches and packages. We hope that we will never need it, but if we do, we need it in a hurry — until a better, fixed version of those packages is released.</p>
<p>We added new filters “Retracted Packages” and “Retracted Installed Packages” to the package selection, and the affected versions are colored in red and get a <strong>[RETRACTED]</strong> marker in the “Versions” tab:</p>
<figure><a href="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr.png"><img src="//lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-300x171.png" alt="" width="300" height="171" class="aligncenter size-medium wp-image-14300" srcset="https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-300x171.png 300w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-768x437.png 768w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr-1024x583.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2020/01/s92-11-retr.png 1087w" sizes="(max-width: 300px) 100vw, 300px" /></a><br />
</figure>
<p>Those lists should always be empty. Also, retracted versions will never automatically be installed. If package versions are retracted, but are already installed, the “Retracted Installed Packages” view will be opened automatically when starting the package selection to make you aware of them. Then you can choose to manually downgrade to a previous version or to wait until a fixed version is available.</p>
<p>In general, don’t worry: We never needed this so far, and we hope that we will never need it. Still, we take precautions for the worst case.</p>
<p>More details: <a href="https://github.com/libyui/libyui-qt-pkg/pull/82">PR 82</a></p>
<h3 id="qt-package-selection-gets-faster">Qt Package Selection Gets Faster</h3>
<p>This came as a byproduct of the previous item: While working on the new filter views for retracted packages, we found that it could take a long time (10-20 seconds) when switching away from the “All Packages” view, so we started digging deeper to find out why.</p>
<p>We found it strange that <em>clearing</em> the package list on the right side of that dialog was so slow; considerably slower than <em>filling</em> it with all packages. After some investigations, we found that in the course of all those changes for all those Qt versions (since Qt 3.x in mid-2006) some internal housekeeping for those list items was now no longer necessary because later Qt versions took over more and more of those responsibilities, and our own housekeeping now got in the way of that and was considerably slowing it down.</p>
<p>Once we found the cause, the fix was easy: We threw out our own housekeeping code and are now relying on what the Qt widget does, and hey presto, clearing that list now happens instantly instead of taking 10-20 seconds.</p>
<p>More details: <a href="https://github.com/libyui/libyui-qt-pkg/pull/82">PR 82 (“Other Fixes”)</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Highlights of YaST Development Sprint 68</title>
		<link>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/</link>
		<comments>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/#comments</comments>
		<pubDate>Tue, 04 Dec 2018 14:32:45 +0000</pubDate>
		<dc:creator><![CDATA[Yast Team]]></dc:creator>
				<category><![CDATA[YaST]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[partitioner]]></category>
		<category><![CDATA[Raspberry Pi]]></category>
		<category><![CDATA[udf]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=13513</guid>
		<description><![CDATA[UDF: Share big files with other operating systems Raspberry Pi: Fully customized installation with YaST Support for UDF file system UDF (Universal Disk Format) is a file system format widely used for DVDs and newer optical disk formats, replacing ISO 9660. But this technology is not limited to optical media only, in fact it can [&#8230;]]]></description>
				<content:encoded><![CDATA[<ul>
<li>UDF: Share big files with other operating systems</li>
<li>Raspberry Pi: Fully customized installation with YaST</li>
</ul>
<h3 id="support-for-udf-file-system">Support for UDF file system</h3>
<p>UDF (<a href="https://en.wikipedia.org/wiki/Universal_Disk_Format">Universal Disk Format</a>) is a file system format widely used for DVDs and newer optical disk formats, replacing ISO 9660. But this technology is not limited to optical media only, in fact it can be perfectly used on flash devices like USB sticks and hard drives too. UDF is one of the best choices when transferring data between platforms. Mostly all modern operating system already support it, including Windows, BSD, MacOS X, Solaris, OS/2 (eComStation), BeOS (Haiku) as well as Linux kernel.</p>
<p>UDF offers several advantages. One of them is the support for quite very large files. With UDF you can create files of several terabytes, making really ridiculous the maximum limitation of 4 gigabytes in VFAT. And not only that, UDF also has optional built-in ability to minimize wearing-off of rewritable media with limited rewrite cycles, such as flash, CD-RW and DVD-RAM.</p>
<p>YaST is starting to support UDF file systems out of the box. The Expert Partitioner now offers the UDF option when formatting a device, see the following screenshot. And this is available even during the installation, so you could create a volume with UDF format and share it between your different operating systems.</p>
<div class="figure">
<a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-300x218.png" alt="" width="300" height="218" class="aligncenter size-medium wp-image-13516" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-300x218.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-768x558.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6-1024x743.png 1024w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49377614-8e0cd100-f702-11e8-9832-10b5dac142a6.png 1044w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<h3 id="just-click-next-to-install-opensuse-in-a-raspberry-pi">Just click &quot;next&quot; to install (open)SUSE in a Raspberry Pi</h3>
<p>Anybody who has not been living under a rock for the last five years knows <a href="https://www.raspberrypi.org/">Raspberry Pi</a>. And anyone who has used one of those devices knows the usual way to put an operating system into it is different from what we are used to do in other computers. Instead of installing from a regular ISO, customizing all the options in the process, Raspberry Pi and similar mini-computers are usually loaded with a pre-built image of an operating system (specific for each model) downloaded from the Internet. Many of those precooked Linux systems are purpose-specific and many decisions (like the file-system type to use) are already taken by those who built the image.</p>
<p>But we wanted SLE 15-SP1 and openSUSE Leap 15.1 to be the first multi-purpose operating systems to support a full standard Linux experience in Raspberry Pi. No custom specific ISO to install from, no precooked image to be copied, just taking the standard unmodified SLE or openSUSE ISO image and installing like you would do in any other computer. And we wanted the process to be as easy as pressing &quot;next&quot;, &quot;next&quot;, &quot;next&quot;, &quot;install&quot;. With the installer detecting and proposing the set of default configurations that makes sense, as usual.</p>
<p>The main challenge in that regard was the partitioning layout. In order to boot, the Raspberry Pi needs a very specific partition containing the system firmware. So it is important for the installer to detect such a partition and preserve it no matter what, mounting it in <code>/boot/vc</code> to allow the operating system to perform updates of the firmware. In the following screenshot of the installation process performed trough the Raspberry Pi serial console you can see that in action.</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4.png"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-300x198.png" alt="" width="300" height="198" class="aligncenter size-medium wp-image-13515" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-300x198.png 300w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4-768x507.png 768w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49296302-25321880-f4b8-11e8-9796-7363bc9ddbc4.png 802w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<p>The serial console is the method preferred by the experts to manage the Raspberry Pi locally and it works out of the box with the pre-releases of the upcoming SLE-15-SP1 and Leap 15.1. But less advanced users will likely prefer to perform a graphical installation with a keyboard and a screen attached to the device. For it to work flawlessly, the following arguments must be provided to the installer during boot.</p>
<pre><code>textmode=0 modprobe.blacklist=vc4</code></pre>
<p>The second argument prevents the HDMI output to be disconnected shortly after the computer has booted, something that will only happen with some monitors. It happened to us during our testing (that you can see below) and that argument certainly made the problem disappear.</p>
<div class="figure"><a href="//lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2.jpg"><img src="//lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-208x300.jpg" alt="" width="208" height="300" class="aligncenter size-medium wp-image-13517" srcset="https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-208x300.jpg 208w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2-711x1024.jpg 711w, https://lizards.opensuse.org/wp-content/uploads/2018/12/49433714-ebf8f180-f7b2-11e8-9541-36e49113f2f2.jpg 720w" sizes="(max-width: 208px) 100vw, 208px" /></a>
</div>
<p>Just one final note if you want to play with this: Take into account Raspberry Pi uses a different internal architecture than usual PCs. So instead of the x86 image of the installer, you will need to use the aarch64 one. The aarch64 architecture is officially fully supported by SLE and also available for openSUSE Leap and Tumbleweed as an unofficial port.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2018/12/04/highlights-of-yast-development-sprint-68/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Fun things to do with driver updates</title>
		<link>https://lizards.opensuse.org/2017/04/25/fun-things-to-do-with-driver-updates-3/</link>
		<pubDate>Tue, 25 Apr 2017 07:45:33 +0000</pubDate>
		<dc:creator><![CDATA[Steffen Winterfeldt]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[DUD]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[Linux]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12432</guid>
		<description><![CDATA[Today: And what if I want to remove some files? It&#8217;s easy and obvious to add new files with a driver update (DUD). But what if you need to remove some files? Or, related: can you replace some read-only file by a writable copy? Let&#8217;s for this article assume you want to modify the Xorg [&#8230;]]]></description>
				<content:encoded><![CDATA[<h3>Today: And what if I want to <i>remove</i> some files?</h3>
<p>It&#8217;s easy and obvious to add new files with a driver update (DUD). But what if you need to <b>remove</b> some files? Or, related: can you replace some read-only file by a writable copy?</p>
<p>Let&#8217;s for this article assume you want to modify the Xorg configuration. Say,<br />
<code>/usr/share/X11/xorg.conf.d/10-evdev.conf</code> troubles you.</p>
<p>The direct way would be to write an <code>update.pre</code> script than removes the file and include this into a DUD.</p>
<p><code>update.pre</code> is run right after the DUD has updated the files in the installation system.</p>
<p>For example:</p>
<pre>
echo \
  rm /usr/share/X11/xorg.conf.d/10-evdev.conf \
  &gt; update.pre
mkdud --create test1.dud --dist tw --name "remove 10-evdev.conf" update.pre
</pre>
<p>But when we try <code>test1.dud</code> we run into this:</p>
<pre>
Driver Update: remove 10-evdev.conf
Driver Updates added:
  remove 10-evdev.conf
[...]
rm: cannot remove '/usr/share/X11/xorg.conf.d/10-evdev.conf': Read-only file system
</pre>
<p>So, we see the catch: much of the installation system resides on a read-only file system! You can&#8217;t just go and modify things.</p>
<p>But how does the driver update process manage to add new files to the installation system then? It does so by restructuring the file system using symlinks. In the process all directories that need to be modified are replaced by writable copies.</p>
<p>In other words: if you include the file you want to remove in the DUD &#8211; you will be able to remove it. It&#8217;s actually sufficient to include the directory the file resides in to make this work.</p>
<p>So, let&#8217;s try this:</p>
<pre>
mkdir -p /tmp/dud/usr/share/X11/xorg.conf.d
echo \
  "rm /usr/share/X11/xorg.conf.d/10-evdev.conf" \
  &gt; update.pre
mkdud --create test2.dud --dist tw --name "remove 10-evdev.conf" update.pre /tmp/dud
</pre>
<p>Now we don&#8217;t get any error applying <code>test2.dud</code> and when we login to the installation system, we see:</p>
<pre>
console:vm9732:/ # ls -l /usr/share/X11/xorg.conf.d
total 0
console:vm9732:/ # 
</pre>
<blockquote>
<h4>Tip</h4>
<p>For easy testing a DUD, boot the machine with</p>
<pre>
startshell=1 sshd=1 password=*** dud=&lt;URL&gt;
</pre>
<p><code>startshell=1</code> wi ll stop the installation workflow after the installation system has been fully prepared just before <code>YaST</code> will be started. <code>sshd=1</code> will start an SSH daemon and you&#8217;ll be able to connect to the machine and look around.</p>
</blockquote>
<p>A similar trick can be used to make files writable (watch out for correct shell quoting):</p>
<pre>
mkdir -p /tmp/dud/usr/share/X11/xorg.conf.d
echo \
  cp --remove-destination '$(readlink -f /usr/share/X11/xorg.conf.d/10-evdev.conf)' \
  /usr/share/X11/xorg.conf.d/10-evdev.conf \
  &gt; update.pre
mkdud --create test3.dud --dist tw --name "make 10-evdev.conf writable" update.pre /tmp/dud
</pre>
<p>We can verify the result:</p>
<pre>
console:vm9732:/ # ls -l /usr/share/X11/xorg.conf.d               
total 4
-rw-r--r-- 1 root root 1099 Apr 24 13:06 10-evdev.conf
console:vm9732:/ #
</pre>
<p>The file is now writable.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Fun things to do with driver updates</title>
		<link>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/</link>
		<comments>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/#comments</comments>
		<pubDate>Thu, 16 Mar 2017 12:12:16 +0000</pubDate>
		<dc:creator><![CDATA[Steffen Winterfeldt]]></dc:creator>
				<category><![CDATA[Base System]]></category>
		<category><![CDATA[Distribution]]></category>
		<category><![CDATA[Miscellaneous]]></category>
		<category><![CDATA[Uncategorized]]></category>
		<category><![CDATA[DUD]]></category>
		<category><![CDATA[installation]]></category>
		<category><![CDATA[Linux]]></category>

		<guid isPermaLink="false">http://lizards.opensuse.org/?p=12356</guid>
		<description><![CDATA[Today: But what if I need a new kernel? A driver update (DUD) can of course update a single driver. But if that&#8217;s not enough and you need a whole new kernel to run an installation? There are two parts to solve: replace the kernel used during installation and get the new kernel installed We&#8217;ll [&#8230;]]]></description>
				<content:encoded><![CDATA[<h3>Today: But what if I need a new kernel?</h3>
<p>A driver update (<a href="https://en.opensuse.org/SDB:Linuxrc#p_dud">DUD</a>) can of course update a single driver. But if that&#8217;s not enough and you need a whole new kernel to run an installation?</p>
<p>There are two parts to solve:</p>
<ol>
<li>replace the kernel used <b>during</b> installation and</li>
<li>get the new kernel installed</li>
</ol>
<p>We&#8217;ll need two tools for this (both available in Tumbleweed or here: <a href="https://software.opensuse.org/package/mksusecd">mksusecd</a> and <a href="https://software.opensuse.org/package/mkdud">mkdud</a>).</p>
<h4>1. Replace the kernel used during installation</h4>
<p>For this it&#8217;s important to know which kernel packages you&#8217;ll actually need. Typically it will be <code>kernel-default</code> and <code>kernel-firmware</code>. But older SUSE distributions (SLE 11 comes to mind) had the kernel packages split into <code>kernel-default</code> and <code>kernel-default-base</code> &#8211; you&#8217;ll need them <b>both</b>.</p>
<p>To make things confusing, modern SUSE distributions also have <code>kernel-default-base</code> &#8211; but it&#8217;s an <b>alternative</b> to <code>kernel-default</code>. In this case we <b>don&#8217;t</b> need it.</p>
<p>If unsure, check <code>kernel-default</code>. If it contains the actual kernel (e.g. <code>/boot/vmlinuz</code>) then you <b>don&#8217;t</b> need <code>kernel-default-base</code>.</p>
<p>On some architectures modules are also taken from <code>xen-kmp-default</code>. If that&#8217;s important for you, you can add this package to the kernel list as well.</p>
<p>In fact you can add any number of kernel packages or kmps you like.</p>
<p>In the past, sometimes a different kernel flavor was used. For example PowerPC had <code>kernel-ppc64</code> for a while. Simply use the flavor you need.</p>
<p>It&#8217;s a good idea to gather all the kernel rpms into a single directory for easier use:</p>
<pre>&gt; mkdir k
&gt; cp kernel-default.rpm kernel-firmware.rpm k
&gt; cp kernel-default-base.rpm k    # only if needed
# add any kernel-related rpms you need
</pre>
<p>Then, take your SUSE installation iso and run</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* -- \
  original_dvd1.iso
</pre>
<p>Note that the <code>--kernel</code> option accepts a variable number of arguments, so you have to add an isolated <code>--</code> to terminate the argument list properly.</p>
<p>The output could look like this:</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
kernel version: 3.0.101-63-ppc64 --&gt; 3.0.101-94-ppc64
CHRP bootable (ppc64)
building: 100%
calculating sha1...
</pre>
<p>The command above will actually get the list of required modules from the old installation iso. If you are missing some driver or the new kernel comes with some additional driver, the module will not be added to the new iso.</p>
<p>But there&#8217;s the <code>--modules</code> option. It will add the listed modules together with any implicitly required modules via module dependencies.</p>
<p>For example, let&#8217;s add the <code>airport</code> wifi-module to our PowerPC iso:</p>
<pre>&gt; mksusecd --create new.iso \
  --kernel k/* \
  --modules airport -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
kernel version: 3.0.101-63-ppc64 --&gt; 3.0.101-94-ppc64
kernel modules added:
  airport, cfg80211, orinoco
CHRP bootable (ppc64)
building: 100%
calculating sha1...
</pre>
<p>As you can see, it automatically adds <code>orinoco</code> and <code>cfg80211</code> as well.</p>
<h4>2. Get the new kernel installed</h4>
<p>This is relatively simple. A driver update can do this:</p>
<pre>&gt; mkdud --create foo.dud \
  --dist sle11 \
  --install repo \
  k/*
</pre>
<p>This creates a driver update for SLE 11 (which also applies to SP4) and the kernel rpms are installed via an auto-generated add-on repo (<code>--install repo</code>).</p>
<p>Now we have the driver update that installs our kernel packages. But how do we use it?</p>
<p>We integrate it into our iso above!</p>
<pre>&gt; mksusecd --create new.iso \
  --initrd foo.dud \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
</pre>
<p><code>mksusecd</code> has an <code>--initrd</code> option that directly accepts driver updates and integrates them into the iso.</p>
<h4>3. Can I have a choice?</h4>
<p>Maybe you just want to test this new kernel or sometimes need the old one and sometimes the new one. Can you make an installation iso that lets you choose the kernel?</p>
<p>Oh yes! <img src="https://s.w.org/images/core/emoji/2.2.1/72x72/1f642.png" alt="&#x1f642;" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<pre>&gt; mksusecd --create new.iso \
  --add-entry 3.0.101-94 \
  --initrd foo.dud \
  --kernel k/* -- \
  SLES-11-SP4-DVD-ppc64-GM-DVD1.iso
</pre>
<p>This does not replace the old kernel but <b>adds</b> a new boot entry <code>Installation - 3.0.101-94</code>.</p>
<p>So you can install with old or the new kernel.</p>
]]></content:encoded>
			<wfw:commentRss>https://lizards.opensuse.org/2017/03/16/fun-things-to-do-with-driver-updates-2/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
	</channel>
</rss>
